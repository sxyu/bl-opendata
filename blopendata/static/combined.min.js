/*
 * This combined file was created by the DataTables downloader builder:
 *   https://datatables.net/download
 *
 * To rebuild or modify this file with the latest versions of the included
 * software please visit:
 *   https://datatables.net/download/#bs4/dt-1.10.18
 *
 * Included libraries:
 *   DataTables 1.10.18
 */

/*!
 DataTables 1.10.18
 ©2008-2018 SpryMedia Ltd - datatables.net/license
*/
(function(h){"function"===typeof define&&define.amd?define(["jquery"],function(E){return h(E,window,document)}):"object"===typeof exports?module.exports=function(E,H){E||(E=window);H||(H="undefined"!==typeof window?require("jquery"):require("jquery")(E));return h(H,E,E.document)}:h(jQuery,window,document)})(function(h,E,H,k){function Z(a){var b,c,d={};h.each(a,function(e){if((b=e.match(/^([^A-Z]+?)([A-Z])/))&&-1!=="a aa ai ao as b fn i m o s ".indexOf(b[1]+" "))c=e.replace(b[0],b[2].toLowerCase()),
d[c]=e,"o"===b[1]&&Z(a[e])});a._hungarianMap=d}function J(a,b,c){a._hungarianMap||Z(a);var d;h.each(b,function(e){d=a._hungarianMap[e];if(d!==k&&(c||b[d]===k))"o"===d.charAt(0)?(b[d]||(b[d]={}),h.extend(!0,b[d],b[e]),J(a[d],b[d],c)):b[d]=b[e]})}function Ca(a){var b=n.defaults.oLanguage,c=b.sDecimal;c&&Da(c);if(a){var d=a.sZeroRecords;!a.sEmptyTable&&(d&&"No data available in table"===b.sEmptyTable)&&F(a,a,"sZeroRecords","sEmptyTable");!a.sLoadingRecords&&(d&&"Loading..."===b.sLoadingRecords)&&F(a,
a,"sZeroRecords","sLoadingRecords");a.sInfoThousands&&(a.sThousands=a.sInfoThousands);(a=a.sDecimal)&&c!==a&&Da(a)}}function eb(a){A(a,"ordering","bSort");A(a,"orderMulti","bSortMulti");A(a,"orderClasses","bSortClasses");A(a,"orderCellsTop","bSortCellsTop");A(a,"order","aaSorting");A(a,"orderFixed","aaSortingFixed");A(a,"paging","bPaginate");A(a,"pagingType","sPaginationType");A(a,"pageLength","iDisplayLength");A(a,"searching","bFilter");"boolean"===typeof a.sScrollX&&(a.sScrollX=a.sScrollX?"100%":
"");"boolean"===typeof a.scrollX&&(a.scrollX=a.scrollX?"100%":"");if(a=a.aoSearchCols)for(var b=0,c=a.length;b<c;b++)a[b]&&J(n.models.oSearch,a[b])}function fb(a){A(a,"orderable","bSortable");A(a,"orderData","aDataSort");A(a,"orderSequence","asSorting");A(a,"orderDataType","sortDataType");var b=a.aDataSort;"number"===typeof b&&!h.isArray(b)&&(a.aDataSort=[b])}function gb(a){if(!n.__browser){var b={};n.__browser=b;var c=h("<div/>").css({position:"fixed",top:0,left:-1*h(E).scrollLeft(),height:1,width:1,
overflow:"hidden"}).append(h("<div/>").css({position:"absolute",top:1,left:1,width:100,overflow:"scroll"}).append(h("<div/>").css({width:"100%",height:10}))).appendTo("body"),d=c.children(),e=d.children();b.barWidth=d[0].offsetWidth-d[0].clientWidth;b.bScrollOversize=100===e[0].offsetWidth&&100!==d[0].clientWidth;b.bScrollbarLeft=1!==Math.round(e.offset().left);b.bBounding=c[0].getBoundingClientRect().width?!0:!1;c.remove()}h.extend(a.oBrowser,n.__browser);a.oScroll.iBarWidth=n.__browser.barWidth}
function hb(a,b,c,d,e,f){var g,j=!1;c!==k&&(g=c,j=!0);for(;d!==e;)a.hasOwnProperty(d)&&(g=j?b(g,a[d],d,a):a[d],j=!0,d+=f);return g}function Ea(a,b){var c=n.defaults.column,d=a.aoColumns.length,c=h.extend({},n.models.oColumn,c,{nTh:b?b:H.createElement("th"),sTitle:c.sTitle?c.sTitle:b?b.innerHTML:"",aDataSort:c.aDataSort?c.aDataSort:[d],mData:c.mData?c.mData:d,idx:d});a.aoColumns.push(c);c=a.aoPreSearchCols;c[d]=h.extend({},n.models.oSearch,c[d]);ka(a,d,h(b).data())}function ka(a,b,c){var b=a.aoColumns[b],
d=a.oClasses,e=h(b.nTh);if(!b.sWidthOrig){b.sWidthOrig=e.attr("width")||null;var f=(e.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/);f&&(b.sWidthOrig=f[1])}c!==k&&null!==c&&(fb(c),J(n.defaults.column,c),c.mDataProp!==k&&!c.mData&&(c.mData=c.mDataProp),c.sType&&(b._sManualType=c.sType),c.className&&!c.sClass&&(c.sClass=c.className),c.sClass&&e.addClass(c.sClass),h.extend(b,c),F(b,c,"sWidth","sWidthOrig"),c.iDataSort!==k&&(b.aDataSort=[c.iDataSort]),F(b,c,"aDataSort"));var g=b.mData,j=S(g),i=b.mRender?
S(b.mRender):null,c=function(a){return"string"===typeof a&&-1!==a.indexOf("@")};b._bAttrSrc=h.isPlainObject(g)&&(c(g.sort)||c(g.type)||c(g.filter));b._setter=null;b.fnGetData=function(a,b,c){var d=j(a,b,k,c);return i&&b?i(d,b,a,c):d};b.fnSetData=function(a,b,c){return N(g)(a,b,c)};"number"!==typeof g&&(a._rowReadObject=!0);a.oFeatures.bSort||(b.bSortable=!1,e.addClass(d.sSortableNone));a=-1!==h.inArray("asc",b.asSorting);c=-1!==h.inArray("desc",b.asSorting);!b.bSortable||!a&&!c?(b.sSortingClass=d.sSortableNone,
b.sSortingClassJUI=""):a&&!c?(b.sSortingClass=d.sSortableAsc,b.sSortingClassJUI=d.sSortJUIAscAllowed):!a&&c?(b.sSortingClass=d.sSortableDesc,b.sSortingClassJUI=d.sSortJUIDescAllowed):(b.sSortingClass=d.sSortable,b.sSortingClassJUI=d.sSortJUI)}function $(a){if(!1!==a.oFeatures.bAutoWidth){var b=a.aoColumns;Fa(a);for(var c=0,d=b.length;c<d;c++)b[c].nTh.style.width=b[c].sWidth}b=a.oScroll;(""!==b.sY||""!==b.sX)&&la(a);r(a,null,"column-sizing",[a])}function aa(a,b){var c=ma(a,"bVisible");return"number"===
typeof c[b]?c[b]:null}function ba(a,b){var c=ma(a,"bVisible"),c=h.inArray(b,c);return-1!==c?c:null}function V(a){var b=0;h.each(a.aoColumns,function(a,d){d.bVisible&&"none"!==h(d.nTh).css("display")&&b++});return b}function ma(a,b){var c=[];h.map(a.aoColumns,function(a,e){a[b]&&c.push(e)});return c}function Ga(a){var b=a.aoColumns,c=a.aoData,d=n.ext.type.detect,e,f,g,j,i,h,l,q,t;e=0;for(f=b.length;e<f;e++)if(l=b[e],t=[],!l.sType&&l._sManualType)l.sType=l._sManualType;else if(!l.sType){g=0;for(j=d.length;g<
j;g++){i=0;for(h=c.length;i<h;i++){t[i]===k&&(t[i]=B(a,i,e,"type"));q=d[g](t[i],a);if(!q&&g!==d.length-1)break;if("html"===q)break}if(q){l.sType=q;break}}l.sType||(l.sType="string")}}function ib(a,b,c,d){var e,f,g,j,i,m,l=a.aoColumns;if(b)for(e=b.length-1;0<=e;e--){m=b[e];var q=m.targets!==k?m.targets:m.aTargets;h.isArray(q)||(q=[q]);f=0;for(g=q.length;f<g;f++)if("number"===typeof q[f]&&0<=q[f]){for(;l.length<=q[f];)Ea(a);d(q[f],m)}else if("number"===typeof q[f]&&0>q[f])d(l.length+q[f],m);else if("string"===
typeof q[f]){j=0;for(i=l.length;j<i;j++)("_all"==q[f]||h(l[j].nTh).hasClass(q[f]))&&d(j,m)}}if(c){e=0;for(a=c.length;e<a;e++)d(e,c[e])}}function O(a,b,c,d){var e=a.aoData.length,f=h.extend(!0,{},n.models.oRow,{src:c?"dom":"data",idx:e});f._aData=b;a.aoData.push(f);for(var g=a.aoColumns,j=0,i=g.length;j<i;j++)g[j].sType=null;a.aiDisplayMaster.push(e);b=a.rowIdFn(b);b!==k&&(a.aIds[b]=f);(c||!a.oFeatures.bDeferRender)&&Ha(a,e,c,d);return e}function na(a,b){var c;b instanceof h||(b=h(b));return b.map(function(b,
e){c=Ia(a,e);return O(a,c.data,e,c.cells)})}function B(a,b,c,d){var e=a.iDraw,f=a.aoColumns[c],g=a.aoData[b]._aData,j=f.sDefaultContent,i=f.fnGetData(g,d,{settings:a,row:b,col:c});if(i===k)return a.iDrawError!=e&&null===j&&(K(a,0,"Requested unknown parameter "+("function"==typeof f.mData?"{function}":"'"+f.mData+"'")+" for row "+b+", column "+c,4),a.iDrawError=e),j;if((i===g||null===i)&&null!==j&&d!==k)i=j;else if("function"===typeof i)return i.call(g);return null===i&&"display"==d?"":i}function jb(a,
b,c,d){a.aoColumns[c].fnSetData(a.aoData[b]._aData,d,{settings:a,row:b,col:c})}function Ja(a){return h.map(a.match(/(\\.|[^\.])+/g)||[""],function(a){return a.replace(/\\\./g,".")})}function S(a){if(h.isPlainObject(a)){var b={};h.each(a,function(a,c){c&&(b[a]=S(c))});return function(a,c,f,g){var j=b[c]||b._;return j!==k?j(a,c,f,g):a}}if(null===a)return function(a){return a};if("function"===typeof a)return function(b,c,f,g){return a(b,c,f,g)};if("string"===typeof a&&(-1!==a.indexOf(".")||-1!==a.indexOf("[")||
-1!==a.indexOf("("))){var c=function(a,b,f){var g,j;if(""!==f){j=Ja(f);for(var i=0,m=j.length;i<m;i++){f=j[i].match(ca);g=j[i].match(W);if(f){j[i]=j[i].replace(ca,"");""!==j[i]&&(a=a[j[i]]);g=[];j.splice(0,i+1);j=j.join(".");if(h.isArray(a)){i=0;for(m=a.length;i<m;i++)g.push(c(a[i],b,j))}a=f[0].substring(1,f[0].length-1);a=""===a?g:g.join(a);break}else if(g){j[i]=j[i].replace(W,"");a=a[j[i]]();continue}if(null===a||a[j[i]]===k)return k;a=a[j[i]]}}return a};return function(b,e){return c(b,e,a)}}return function(b){return b[a]}}
function N(a){if(h.isPlainObject(a))return N(a._);if(null===a)return function(){};if("function"===typeof a)return function(b,d,e){a(b,"set",d,e)};if("string"===typeof a&&(-1!==a.indexOf(".")||-1!==a.indexOf("[")||-1!==a.indexOf("("))){var b=function(a,d,e){var e=Ja(e),f;f=e[e.length-1];for(var g,j,i=0,m=e.length-1;i<m;i++){g=e[i].match(ca);j=e[i].match(W);if(g){e[i]=e[i].replace(ca,"");a[e[i]]=[];f=e.slice();f.splice(0,i+1);g=f.join(".");if(h.isArray(d)){j=0;for(m=d.length;j<m;j++)f={},b(f,d[j],g),
a[e[i]].push(f)}else a[e[i]]=d;return}j&&(e[i]=e[i].replace(W,""),a=a[e[i]](d));if(null===a[e[i]]||a[e[i]]===k)a[e[i]]={};a=a[e[i]]}if(f.match(W))a[f.replace(W,"")](d);else a[f.replace(ca,"")]=d};return function(c,d){return b(c,d,a)}}return function(b,d){b[a]=d}}function Ka(a){return D(a.aoData,"_aData")}function oa(a){a.aoData.length=0;a.aiDisplayMaster.length=0;a.aiDisplay.length=0;a.aIds={}}function pa(a,b,c){for(var d=-1,e=0,f=a.length;e<f;e++)a[e]==b?d=e:a[e]>b&&a[e]--; -1!=d&&c===k&&a.splice(d,
1)}function da(a,b,c,d){var e=a.aoData[b],f,g=function(c,d){for(;c.childNodes.length;)c.removeChild(c.firstChild);c.innerHTML=B(a,b,d,"display")};if("dom"===c||(!c||"auto"===c)&&"dom"===e.src)e._aData=Ia(a,e,d,d===k?k:e._aData).data;else{var j=e.anCells;if(j)if(d!==k)g(j[d],d);else{c=0;for(f=j.length;c<f;c++)g(j[c],c)}}e._aSortData=null;e._aFilterData=null;g=a.aoColumns;if(d!==k)g[d].sType=null;else{c=0;for(f=g.length;c<f;c++)g[c].sType=null;La(a,e)}}function Ia(a,b,c,d){var e=[],f=b.firstChild,g,
j,i=0,m,l=a.aoColumns,q=a._rowReadObject,d=d!==k?d:q?{}:[],t=function(a,b){if("string"===typeof a){var c=a.indexOf("@");-1!==c&&(c=a.substring(c+1),N(a)(d,b.getAttribute(c)))}},G=function(a){if(c===k||c===i)j=l[i],m=h.trim(a.innerHTML),j&&j._bAttrSrc?(N(j.mData._)(d,m),t(j.mData.sort,a),t(j.mData.type,a),t(j.mData.filter,a)):q?(j._setter||(j._setter=N(j.mData)),j._setter(d,m)):d[i]=m;i++};if(f)for(;f;){g=f.nodeName.toUpperCase();if("TD"==g||"TH"==g)G(f),e.push(f);f=f.nextSibling}else{e=b.anCells;
f=0;for(g=e.length;f<g;f++)G(e[f])}if(b=b.firstChild?b:b.nTr)(b=b.getAttribute("id"))&&N(a.rowId)(d,b);return{data:d,cells:e}}function Ha(a,b,c,d){var e=a.aoData[b],f=e._aData,g=[],j,i,m,l,q;if(null===e.nTr){j=c||H.createElement("tr");e.nTr=j;e.anCells=g;j._DT_RowIndex=b;La(a,e);l=0;for(q=a.aoColumns.length;l<q;l++){m=a.aoColumns[l];i=c?d[l]:H.createElement(m.sCellType);i._DT_CellIndex={row:b,column:l};g.push(i);if((!c||m.mRender||m.mData!==l)&&(!h.isPlainObject(m.mData)||m.mData._!==l+".display"))i.innerHTML=
B(a,b,l,"display");m.sClass&&(i.className+=" "+m.sClass);m.bVisible&&!c?j.appendChild(i):!m.bVisible&&c&&i.parentNode.removeChild(i);m.fnCreatedCell&&m.fnCreatedCell.call(a.oInstance,i,B(a,b,l),f,b,l)}r(a,"aoRowCreatedCallback",null,[j,f,b,g])}e.nTr.setAttribute("role","row")}function La(a,b){var c=b.nTr,d=b._aData;if(c){var e=a.rowIdFn(d);e&&(c.id=e);d.DT_RowClass&&(e=d.DT_RowClass.split(" "),b.__rowc=b.__rowc?qa(b.__rowc.concat(e)):e,h(c).removeClass(b.__rowc.join(" ")).addClass(d.DT_RowClass));
d.DT_RowAttr&&h(c).attr(d.DT_RowAttr);d.DT_RowData&&h(c).data(d.DT_RowData)}}function kb(a){var b,c,d,e,f,g=a.nTHead,j=a.nTFoot,i=0===h("th, td",g).length,m=a.oClasses,l=a.aoColumns;i&&(e=h("<tr/>").appendTo(g));b=0;for(c=l.length;b<c;b++)f=l[b],d=h(f.nTh).addClass(f.sClass),i&&d.appendTo(e),a.oFeatures.bSort&&(d.addClass(f.sSortingClass),!1!==f.bSortable&&(d.attr("tabindex",a.iTabIndex).attr("aria-controls",a.sTableId),Ma(a,f.nTh,b))),f.sTitle!=d[0].innerHTML&&d.html(f.sTitle),Na(a,"header")(a,d,
f,m);i&&ea(a.aoHeader,g);h(g).find(">tr").attr("role","row");h(g).find(">tr>th, >tr>td").addClass(m.sHeaderTH);h(j).find(">tr>th, >tr>td").addClass(m.sFooterTH);if(null!==j){a=a.aoFooter[0];b=0;for(c=a.length;b<c;b++)f=l[b],f.nTf=a[b].cell,f.sClass&&h(f.nTf).addClass(f.sClass)}}function fa(a,b,c){var d,e,f,g=[],j=[],i=a.aoColumns.length,m;if(b){c===k&&(c=!1);d=0;for(e=b.length;d<e;d++){g[d]=b[d].slice();g[d].nTr=b[d].nTr;for(f=i-1;0<=f;f--)!a.aoColumns[f].bVisible&&!c&&g[d].splice(f,1);j.push([])}d=
0;for(e=g.length;d<e;d++){if(a=g[d].nTr)for(;f=a.firstChild;)a.removeChild(f);f=0;for(b=g[d].length;f<b;f++)if(m=i=1,j[d][f]===k){a.appendChild(g[d][f].cell);for(j[d][f]=1;g[d+i]!==k&&g[d][f].cell==g[d+i][f].cell;)j[d+i][f]=1,i++;for(;g[d][f+m]!==k&&g[d][f].cell==g[d][f+m].cell;){for(c=0;c<i;c++)j[d+c][f+m]=1;m++}h(g[d][f].cell).attr("rowspan",i).attr("colspan",m)}}}}function P(a){var b=r(a,"aoPreDrawCallback","preDraw",[a]);if(-1!==h.inArray(!1,b))C(a,!1);else{var b=[],c=0,d=a.asStripeClasses,e=
d.length,f=a.oLanguage,g=a.iInitDisplayStart,j="ssp"==y(a),i=a.aiDisplay;a.bDrawing=!0;g!==k&&-1!==g&&(a._iDisplayStart=j?g:g>=a.fnRecordsDisplay()?0:g,a.iInitDisplayStart=-1);var g=a._iDisplayStart,m=a.fnDisplayEnd();if(a.bDeferLoading)a.bDeferLoading=!1,a.iDraw++,C(a,!1);else if(j){if(!a.bDestroying&&!lb(a))return}else a.iDraw++;if(0!==i.length){f=j?a.aoData.length:m;for(j=j?0:g;j<f;j++){var l=i[j],q=a.aoData[l];null===q.nTr&&Ha(a,l);var t=q.nTr;if(0!==e){var G=d[c%e];q._sRowStripe!=G&&(h(t).removeClass(q._sRowStripe).addClass(G),
q._sRowStripe=G)}r(a,"aoRowCallback",null,[t,q._aData,c,j,l]);b.push(t);c++}}else c=f.sZeroRecords,1==a.iDraw&&"ajax"==y(a)?c=f.sLoadingRecords:f.sEmptyTable&&0===a.fnRecordsTotal()&&(c=f.sEmptyTable),b[0]=h("<tr/>",{"class":e?d[0]:""}).append(h("<td />",{valign:"top",colSpan:V(a),"class":a.oClasses.sRowEmpty}).html(c))[0];r(a,"aoHeaderCallback","header",[h(a.nTHead).children("tr")[0],Ka(a),g,m,i]);r(a,"aoFooterCallback","footer",[h(a.nTFoot).children("tr")[0],Ka(a),g,m,i]);d=h(a.nTBody);d.children().detach();
d.append(h(b));r(a,"aoDrawCallback","draw",[a]);a.bSorted=!1;a.bFiltered=!1;a.bDrawing=!1}}function T(a,b){var c=a.oFeatures,d=c.bFilter;c.bSort&&mb(a);d?ga(a,a.oPreviousSearch):a.aiDisplay=a.aiDisplayMaster.slice();!0!==b&&(a._iDisplayStart=0);a._drawHold=b;P(a);a._drawHold=!1}function nb(a){var b=a.oClasses,c=h(a.nTable),c=h("<div/>").insertBefore(c),d=a.oFeatures,e=h("<div/>",{id:a.sTableId+"_wrapper","class":b.sWrapper+(a.nTFoot?"":" "+b.sNoFooter)});a.nHolding=c[0];a.nTableWrapper=e[0];a.nTableReinsertBefore=
a.nTable.nextSibling;for(var f=a.sDom.split(""),g,j,i,m,l,q,k=0;k<f.length;k++){g=null;j=f[k];if("<"==j){i=h("<div/>")[0];m=f[k+1];if("'"==m||'"'==m){l="";for(q=2;f[k+q]!=m;)l+=f[k+q],q++;"H"==l?l=b.sJUIHeader:"F"==l&&(l=b.sJUIFooter);-1!=l.indexOf(".")?(m=l.split("."),i.id=m[0].substr(1,m[0].length-1),i.className=m[1]):"#"==l.charAt(0)?i.id=l.substr(1,l.length-1):i.className=l;k+=q}e.append(i);e=h(i)}else if(">"==j)e=e.parent();else if("l"==j&&d.bPaginate&&d.bLengthChange)g=ob(a);else if("f"==j&&
d.bFilter)g=pb(a);else if("r"==j&&d.bProcessing)g=qb(a);else if("t"==j)g=rb(a);else if("i"==j&&d.bInfo)g=sb(a);else if("p"==j&&d.bPaginate)g=tb(a);else if(0!==n.ext.feature.length){i=n.ext.feature;q=0;for(m=i.length;q<m;q++)if(j==i[q].cFeature){g=i[q].fnInit(a);break}}g&&(i=a.aanFeatures,i[j]||(i[j]=[]),i[j].push(g),e.append(g))}c.replaceWith(e);a.nHolding=null}function ea(a,b){var c=h(b).children("tr"),d,e,f,g,j,i,m,l,q,k;a.splice(0,a.length);f=0;for(i=c.length;f<i;f++)a.push([]);f=0;for(i=c.length;f<
i;f++){d=c[f];for(e=d.firstChild;e;){if("TD"==e.nodeName.toUpperCase()||"TH"==e.nodeName.toUpperCase()){l=1*e.getAttribute("colspan");q=1*e.getAttribute("rowspan");l=!l||0===l||1===l?1:l;q=!q||0===q||1===q?1:q;g=0;for(j=a[f];j[g];)g++;m=g;k=1===l?!0:!1;for(j=0;j<l;j++)for(g=0;g<q;g++)a[f+g][m+j]={cell:e,unique:k},a[f+g].nTr=d}e=e.nextSibling}}}function ra(a,b,c){var d=[];c||(c=a.aoHeader,b&&(c=[],ea(c,b)));for(var b=0,e=c.length;b<e;b++)for(var f=0,g=c[b].length;f<g;f++)if(c[b][f].unique&&(!d[f]||
!a.bSortCellsTop))d[f]=c[b][f].cell;return d}function sa(a,b,c){r(a,"aoServerParams","serverParams",[b]);if(b&&h.isArray(b)){var d={},e=/(.*?)\[\]$/;h.each(b,function(a,b){var c=b.name.match(e);c?(c=c[0],d[c]||(d[c]=[]),d[c].push(b.value)):d[b.name]=b.value});b=d}var f,g=a.ajax,j=a.oInstance,i=function(b){r(a,null,"xhr",[a,b,a.jqXHR]);c(b)};if(h.isPlainObject(g)&&g.data){f=g.data;var m="function"===typeof f?f(b,a):f,b="function"===typeof f&&m?m:h.extend(!0,b,m);delete g.data}m={data:b,success:function(b){var c=
b.error||b.sError;c&&K(a,0,c);a.json=b;i(b)},dataType:"json",cache:!1,type:a.sServerMethod,error:function(b,c){var d=r(a,null,"xhr",[a,null,a.jqXHR]);-1===h.inArray(!0,d)&&("parsererror"==c?K(a,0,"Invalid JSON response",1):4===b.readyState&&K(a,0,"Ajax error",7));C(a,!1)}};a.oAjaxData=b;r(a,null,"preXhr",[a,b]);a.fnServerData?a.fnServerData.call(j,a.sAjaxSource,h.map(b,function(a,b){return{name:b,value:a}}),i,a):a.sAjaxSource||"string"===typeof g?a.jqXHR=h.ajax(h.extend(m,{url:g||a.sAjaxSource})):
"function"===typeof g?a.jqXHR=g.call(j,b,i,a):(a.jqXHR=h.ajax(h.extend(m,g)),g.data=f)}function lb(a){return a.bAjaxDataGet?(a.iDraw++,C(a,!0),sa(a,ub(a),function(b){vb(a,b)}),!1):!0}function ub(a){var b=a.aoColumns,c=b.length,d=a.oFeatures,e=a.oPreviousSearch,f=a.aoPreSearchCols,g,j=[],i,m,l,k=X(a);g=a._iDisplayStart;i=!1!==d.bPaginate?a._iDisplayLength:-1;var t=function(a,b){j.push({name:a,value:b})};t("sEcho",a.iDraw);t("iColumns",c);t("sColumns",D(b,"sName").join(","));t("iDisplayStart",g);t("iDisplayLength",
i);var G={draw:a.iDraw,columns:[],order:[],start:g,length:i,search:{value:e.sSearch,regex:e.bRegex}};for(g=0;g<c;g++)m=b[g],l=f[g],i="function"==typeof m.mData?"function":m.mData,G.columns.push({data:i,name:m.sName,searchable:m.bSearchable,orderable:m.bSortable,search:{value:l.sSearch,regex:l.bRegex}}),t("mDataProp_"+g,i),d.bFilter&&(t("sSearch_"+g,l.sSearch),t("bRegex_"+g,l.bRegex),t("bSearchable_"+g,m.bSearchable)),d.bSort&&t("bSortable_"+g,m.bSortable);d.bFilter&&(t("sSearch",e.sSearch),t("bRegex",
e.bRegex));d.bSort&&(h.each(k,function(a,b){G.order.push({column:b.col,dir:b.dir});t("iSortCol_"+a,b.col);t("sSortDir_"+a,b.dir)}),t("iSortingCols",k.length));b=n.ext.legacy.ajax;return null===b?a.sAjaxSource?j:G:b?j:G}function vb(a,b){var c=ta(a,b),d=b.sEcho!==k?b.sEcho:b.draw,e=b.iTotalRecords!==k?b.iTotalRecords:b.recordsTotal,f=b.iTotalDisplayRecords!==k?b.iTotalDisplayRecords:b.recordsFiltered;if(d){if(1*d<a.iDraw)return;a.iDraw=1*d}oa(a);a._iRecordsTotal=parseInt(e,10);a._iRecordsDisplay=parseInt(f,
10);d=0;for(e=c.length;d<e;d++)O(a,c[d]);a.aiDisplay=a.aiDisplayMaster.slice();a.bAjaxDataGet=!1;P(a);a._bInitComplete||ua(a,b);a.bAjaxDataGet=!0;C(a,!1)}function ta(a,b){var c=h.isPlainObject(a.ajax)&&a.ajax.dataSrc!==k?a.ajax.dataSrc:a.sAjaxDataProp;return"data"===c?b.aaData||b[c]:""!==c?S(c)(b):b}function pb(a){var b=a.oClasses,c=a.sTableId,d=a.oLanguage,e=a.oPreviousSearch,f=a.aanFeatures,g='<input type="search" class="'+b.sFilterInput+'"/>',j=d.sSearch,j=j.match(/_INPUT_/)?j.replace("_INPUT_",
g):j+g,b=h("<div/>",{id:!f.f?c+"_filter":null,"class":b.sFilter}).append(h("<label/>").append(j)),f=function(){var b=!this.value?"":this.value;b!=e.sSearch&&(ga(a,{sSearch:b,bRegex:e.bRegex,bSmart:e.bSmart,bCaseInsensitive:e.bCaseInsensitive}),a._iDisplayStart=0,P(a))},g=null!==a.searchDelay?a.searchDelay:"ssp"===y(a)?400:0,i=h("input",b).val(e.sSearch).attr("placeholder",d.sSearchPlaceholder).on("keyup.DT search.DT input.DT paste.DT cut.DT",g?Oa(f,g):f).on("keypress.DT",function(a){if(13==a.keyCode)return!1}).attr("aria-controls",
c);h(a.nTable).on("search.dt.DT",function(b,c){if(a===c)try{i[0]!==H.activeElement&&i.val(e.sSearch)}catch(d){}});return b[0]}function ga(a,b,c){var d=a.oPreviousSearch,e=a.aoPreSearchCols,f=function(a){d.sSearch=a.sSearch;d.bRegex=a.bRegex;d.bSmart=a.bSmart;d.bCaseInsensitive=a.bCaseInsensitive};Ga(a);if("ssp"!=y(a)){wb(a,b.sSearch,c,b.bEscapeRegex!==k?!b.bEscapeRegex:b.bRegex,b.bSmart,b.bCaseInsensitive);f(b);for(b=0;b<e.length;b++)xb(a,e[b].sSearch,b,e[b].bEscapeRegex!==k?!e[b].bEscapeRegex:e[b].bRegex,
e[b].bSmart,e[b].bCaseInsensitive);yb(a)}else f(b);a.bFiltered=!0;r(a,null,"search",[a])}function yb(a){for(var b=n.ext.search,c=a.aiDisplay,d,e,f=0,g=b.length;f<g;f++){for(var j=[],i=0,m=c.length;i<m;i++)e=c[i],d=a.aoData[e],b[f](a,d._aFilterData,e,d._aData,i)&&j.push(e);c.length=0;h.merge(c,j)}}function xb(a,b,c,d,e,f){if(""!==b){for(var g=[],j=a.aiDisplay,d=Pa(b,d,e,f),e=0;e<j.length;e++)b=a.aoData[j[e]]._aFilterData[c],d.test(b)&&g.push(j[e]);a.aiDisplay=g}}function wb(a,b,c,d,e,f){var d=Pa(b,
d,e,f),f=a.oPreviousSearch.sSearch,g=a.aiDisplayMaster,j,e=[];0!==n.ext.search.length&&(c=!0);j=zb(a);if(0>=b.length)a.aiDisplay=g.slice();else{if(j||c||f.length>b.length||0!==b.indexOf(f)||a.bSorted)a.aiDisplay=g.slice();b=a.aiDisplay;for(c=0;c<b.length;c++)d.test(a.aoData[b[c]]._sFilterRow)&&e.push(b[c]);a.aiDisplay=e}}function Pa(a,b,c,d){a=b?a:Qa(a);c&&(a="^(?=.*?"+h.map(a.match(/"[^"]+"|[^ ]+/g)||[""],function(a){if('"'===a.charAt(0))var b=a.match(/^"(.*)"$/),a=b?b[1]:a;return a.replace('"',
"")}).join(")(?=.*?")+").*$");return RegExp(a,d?"i":"")}function zb(a){var b=a.aoColumns,c,d,e,f,g,j,i,h,l=n.ext.type.search;c=!1;d=0;for(f=a.aoData.length;d<f;d++)if(h=a.aoData[d],!h._aFilterData){j=[];e=0;for(g=b.length;e<g;e++)c=b[e],c.bSearchable?(i=B(a,d,e,"filter"),l[c.sType]&&(i=l[c.sType](i)),null===i&&(i=""),"string"!==typeof i&&i.toString&&(i=i.toString())):i="",i.indexOf&&-1!==i.indexOf("&")&&(va.innerHTML=i,i=Wb?va.textContent:va.innerText),i.replace&&(i=i.replace(/[\r\n]/g,"")),j.push(i);
h._aFilterData=j;h._sFilterRow=j.join("  ");c=!0}return c}function Ab(a){return{search:a.sSearch,smart:a.bSmart,regex:a.bRegex,caseInsensitive:a.bCaseInsensitive}}function Bb(a){return{sSearch:a.search,bSmart:a.smart,bRegex:a.regex,bCaseInsensitive:a.caseInsensitive}}function sb(a){var b=a.sTableId,c=a.aanFeatures.i,d=h("<div/>",{"class":a.oClasses.sInfo,id:!c?b+"_info":null});c||(a.aoDrawCallback.push({fn:Cb,sName:"information"}),d.attr("role","status").attr("aria-live","polite"),h(a.nTable).attr("aria-describedby",
b+"_info"));return d[0]}function Cb(a){var b=a.aanFeatures.i;if(0!==b.length){var c=a.oLanguage,d=a._iDisplayStart+1,e=a.fnDisplayEnd(),f=a.fnRecordsTotal(),g=a.fnRecordsDisplay(),j=g?c.sInfo:c.sInfoEmpty;g!==f&&(j+=" "+c.sInfoFiltered);j+=c.sInfoPostFix;j=Db(a,j);c=c.fnInfoCallback;null!==c&&(j=c.call(a.oInstance,a,d,e,f,g,j));h(b).html(j)}}function Db(a,b){var c=a.fnFormatNumber,d=a._iDisplayStart+1,e=a._iDisplayLength,f=a.fnRecordsDisplay(),g=-1===e;return b.replace(/_START_/g,c.call(a,d)).replace(/_END_/g,
c.call(a,a.fnDisplayEnd())).replace(/_MAX_/g,c.call(a,a.fnRecordsTotal())).replace(/_TOTAL_/g,c.call(a,f)).replace(/_PAGE_/g,c.call(a,g?1:Math.ceil(d/e))).replace(/_PAGES_/g,c.call(a,g?1:Math.ceil(f/e)))}function ha(a){var b,c,d=a.iInitDisplayStart,e=a.aoColumns,f;c=a.oFeatures;var g=a.bDeferLoading;if(a.bInitialised){nb(a);kb(a);fa(a,a.aoHeader);fa(a,a.aoFooter);C(a,!0);c.bAutoWidth&&Fa(a);b=0;for(c=e.length;b<c;b++)f=e[b],f.sWidth&&(f.nTh.style.width=v(f.sWidth));r(a,null,"preInit",[a]);T(a);e=
y(a);if("ssp"!=e||g)"ajax"==e?sa(a,[],function(c){var f=ta(a,c);for(b=0;b<f.length;b++)O(a,f[b]);a.iInitDisplayStart=d;T(a);C(a,!1);ua(a,c)},a):(C(a,!1),ua(a))}else setTimeout(function(){ha(a)},200)}function ua(a,b){a._bInitComplete=!0;(b||a.oInit.aaData)&&$(a);r(a,null,"plugin-init",[a,b]);r(a,"aoInitComplete","init",[a,b])}function Ra(a,b){var c=parseInt(b,10);a._iDisplayLength=c;Sa(a);r(a,null,"length",[a,c])}function ob(a){for(var b=a.oClasses,c=a.sTableId,d=a.aLengthMenu,e=h.isArray(d[0]),f=
e?d[0]:d,d=e?d[1]:d,e=h("<select/>",{name:c+"_length","aria-controls":c,"class":b.sLengthSelect}),g=0,j=f.length;g<j;g++)e[0][g]=new Option("number"===typeof d[g]?a.fnFormatNumber(d[g]):d[g],f[g]);var i=h("<div><label/></div>").addClass(b.sLength);a.aanFeatures.l||(i[0].id=c+"_length");i.children().append(a.oLanguage.sLengthMenu.replace("_MENU_",e[0].outerHTML));h("select",i).val(a._iDisplayLength).on("change.DT",function(){Ra(a,h(this).val());P(a)});h(a.nTable).on("length.dt.DT",function(b,c,d){a===
c&&h("select",i).val(d)});return i[0]}function tb(a){var b=a.sPaginationType,c=n.ext.pager[b],d="function"===typeof c,e=function(a){P(a)},b=h("<div/>").addClass(a.oClasses.sPaging+b)[0],f=a.aanFeatures;d||c.fnInit(a,b,e);f.p||(b.id=a.sTableId+"_paginate",a.aoDrawCallback.push({fn:function(a){if(d){var b=a._iDisplayStart,i=a._iDisplayLength,h=a.fnRecordsDisplay(),l=-1===i,b=l?0:Math.ceil(b/i),i=l?1:Math.ceil(h/i),h=c(b,i),k,l=0;for(k=f.p.length;l<k;l++)Na(a,"pageButton")(a,f.p[l],l,h,b,i)}else c.fnUpdate(a,
e)},sName:"pagination"}));return b}function Ta(a,b,c){var d=a._iDisplayStart,e=a._iDisplayLength,f=a.fnRecordsDisplay();0===f||-1===e?d=0:"number"===typeof b?(d=b*e,d>f&&(d=0)):"first"==b?d=0:"previous"==b?(d=0<=e?d-e:0,0>d&&(d=0)):"next"==b?d+e<f&&(d+=e):"last"==b?d=Math.floor((f-1)/e)*e:K(a,0,"Unknown paging action: "+b,5);b=a._iDisplayStart!==d;a._iDisplayStart=d;b&&(r(a,null,"page",[a]),c&&P(a));return b}function qb(a){return h("<div/>",{id:!a.aanFeatures.r?a.sTableId+"_processing":null,"class":a.oClasses.sProcessing}).html(a.oLanguage.sProcessing).insertBefore(a.nTable)[0]}
function C(a,b){a.oFeatures.bProcessing&&h(a.aanFeatures.r).css("display",b?"block":"none");r(a,null,"processing",[a,b])}function rb(a){var b=h(a.nTable);b.attr("role","grid");var c=a.oScroll;if(""===c.sX&&""===c.sY)return a.nTable;var d=c.sX,e=c.sY,f=a.oClasses,g=b.children("caption"),j=g.length?g[0]._captionSide:null,i=h(b[0].cloneNode(!1)),m=h(b[0].cloneNode(!1)),l=b.children("tfoot");l.length||(l=null);i=h("<div/>",{"class":f.sScrollWrapper}).append(h("<div/>",{"class":f.sScrollHead}).css({overflow:"hidden",
position:"relative",border:0,width:d?!d?null:v(d):"100%"}).append(h("<div/>",{"class":f.sScrollHeadInner}).css({"box-sizing":"content-box",width:c.sXInner||"100%"}).append(i.removeAttr("id").css("margin-left",0).append("top"===j?g:null).append(b.children("thead"))))).append(h("<div/>",{"class":f.sScrollBody}).css({position:"relative",overflow:"auto",width:!d?null:v(d)}).append(b));l&&i.append(h("<div/>",{"class":f.sScrollFoot}).css({overflow:"hidden",border:0,width:d?!d?null:v(d):"100%"}).append(h("<div/>",
{"class":f.sScrollFootInner}).append(m.removeAttr("id").css("margin-left",0).append("bottom"===j?g:null).append(b.children("tfoot")))));var b=i.children(),k=b[0],f=b[1],t=l?b[2]:null;if(d)h(f).on("scroll.DT",function(){var a=this.scrollLeft;k.scrollLeft=a;l&&(t.scrollLeft=a)});h(f).css(e&&c.bCollapse?"max-height":"height",e);a.nScrollHead=k;a.nScrollBody=f;a.nScrollFoot=t;a.aoDrawCallback.push({fn:la,sName:"scrolling"});return i[0]}function la(a){var b=a.oScroll,c=b.sX,d=b.sXInner,e=b.sY,b=b.iBarWidth,
f=h(a.nScrollHead),g=f[0].style,j=f.children("div"),i=j[0].style,m=j.children("table"),j=a.nScrollBody,l=h(j),q=j.style,t=h(a.nScrollFoot).children("div"),n=t.children("table"),o=h(a.nTHead),p=h(a.nTable),s=p[0],r=s.style,u=a.nTFoot?h(a.nTFoot):null,x=a.oBrowser,U=x.bScrollOversize,Xb=D(a.aoColumns,"nTh"),Q,L,R,w,Ua=[],y=[],z=[],A=[],B,C=function(a){a=a.style;a.paddingTop="0";a.paddingBottom="0";a.borderTopWidth="0";a.borderBottomWidth="0";a.height=0};L=j.scrollHeight>j.clientHeight;if(a.scrollBarVis!==
L&&a.scrollBarVis!==k)a.scrollBarVis=L,$(a);else{a.scrollBarVis=L;p.children("thead, tfoot").remove();u&&(R=u.clone().prependTo(p),Q=u.find("tr"),R=R.find("tr"));w=o.clone().prependTo(p);o=o.find("tr");L=w.find("tr");w.find("th, td").removeAttr("tabindex");c||(q.width="100%",f[0].style.width="100%");h.each(ra(a,w),function(b,c){B=aa(a,b);c.style.width=a.aoColumns[B].sWidth});u&&I(function(a){a.style.width=""},R);f=p.outerWidth();if(""===c){r.width="100%";if(U&&(p.find("tbody").height()>j.offsetHeight||
"scroll"==l.css("overflow-y")))r.width=v(p.outerWidth()-b);f=p.outerWidth()}else""!==d&&(r.width=v(d),f=p.outerWidth());I(C,L);I(function(a){z.push(a.innerHTML);Ua.push(v(h(a).css("width")))},L);I(function(a,b){if(h.inArray(a,Xb)!==-1)a.style.width=Ua[b]},o);h(L).height(0);u&&(I(C,R),I(function(a){A.push(a.innerHTML);y.push(v(h(a).css("width")))},R),I(function(a,b){a.style.width=y[b]},Q),h(R).height(0));I(function(a,b){a.innerHTML='<div class="dataTables_sizing">'+z[b]+"</div>";a.childNodes[0].style.height=
"0";a.childNodes[0].style.overflow="hidden";a.style.width=Ua[b]},L);u&&I(function(a,b){a.innerHTML='<div class="dataTables_sizing">'+A[b]+"</div>";a.childNodes[0].style.height="0";a.childNodes[0].style.overflow="hidden";a.style.width=y[b]},R);if(p.outerWidth()<f){Q=j.scrollHeight>j.offsetHeight||"scroll"==l.css("overflow-y")?f+b:f;if(U&&(j.scrollHeight>j.offsetHeight||"scroll"==l.css("overflow-y")))r.width=v(Q-b);(""===c||""!==d)&&K(a,1,"Possible column misalignment",6)}else Q="100%";q.width=v(Q);
g.width=v(Q);u&&(a.nScrollFoot.style.width=v(Q));!e&&U&&(q.height=v(s.offsetHeight+b));c=p.outerWidth();m[0].style.width=v(c);i.width=v(c);d=p.height()>j.clientHeight||"scroll"==l.css("overflow-y");e="padding"+(x.bScrollbarLeft?"Left":"Right");i[e]=d?b+"px":"0px";u&&(n[0].style.width=v(c),t[0].style.width=v(c),t[0].style[e]=d?b+"px":"0px");p.children("colgroup").insertBefore(p.children("thead"));l.scroll();if((a.bSorted||a.bFiltered)&&!a._drawHold)j.scrollTop=0}}function I(a,b,c){for(var d=0,e=0,
f=b.length,g,j;e<f;){g=b[e].firstChild;for(j=c?c[e].firstChild:null;g;)1===g.nodeType&&(c?a(g,j,d):a(g,d),d++),g=g.nextSibling,j=c?j.nextSibling:null;e++}}function Fa(a){var b=a.nTable,c=a.aoColumns,d=a.oScroll,e=d.sY,f=d.sX,g=d.sXInner,j=c.length,i=ma(a,"bVisible"),m=h("th",a.nTHead),l=b.getAttribute("width"),k=b.parentNode,t=!1,n,o,p=a.oBrowser,d=p.bScrollOversize;(n=b.style.width)&&-1!==n.indexOf("%")&&(l=n);for(n=0;n<i.length;n++)o=c[i[n]],null!==o.sWidth&&(o.sWidth=Eb(o.sWidthOrig,k),t=!0);if(d||
!t&&!f&&!e&&j==V(a)&&j==m.length)for(n=0;n<j;n++)i=aa(a,n),null!==i&&(c[i].sWidth=v(m.eq(n).width()));else{j=h(b).clone().css("visibility","hidden").removeAttr("id");j.find("tbody tr").remove();var s=h("<tr/>").appendTo(j.find("tbody"));j.find("thead, tfoot").remove();j.append(h(a.nTHead).clone()).append(h(a.nTFoot).clone());j.find("tfoot th, tfoot td").css("width","");m=ra(a,j.find("thead")[0]);for(n=0;n<i.length;n++)o=c[i[n]],m[n].style.width=null!==o.sWidthOrig&&""!==o.sWidthOrig?v(o.sWidthOrig):
"",o.sWidthOrig&&f&&h(m[n]).append(h("<div/>").css({width:o.sWidthOrig,margin:0,padding:0,border:0,height:1}));if(a.aoData.length)for(n=0;n<i.length;n++)t=i[n],o=c[t],h(Fb(a,t)).clone(!1).append(o.sContentPadding).appendTo(s);h("[name]",j).removeAttr("name");o=h("<div/>").css(f||e?{position:"absolute",top:0,left:0,height:1,right:0,overflow:"hidden"}:{}).append(j).appendTo(k);f&&g?j.width(g):f?(j.css("width","auto"),j.removeAttr("width"),j.width()<k.clientWidth&&l&&j.width(k.clientWidth)):e?j.width(k.clientWidth):
l&&j.width(l);for(n=e=0;n<i.length;n++)k=h(m[n]),g=k.outerWidth()-k.width(),k=p.bBounding?Math.ceil(m[n].getBoundingClientRect().width):k.outerWidth(),e+=k,c[i[n]].sWidth=v(k-g);b.style.width=v(e);o.remove()}l&&(b.style.width=v(l));if((l||f)&&!a._reszEvt)b=function(){h(E).on("resize.DT-"+a.sInstance,Oa(function(){$(a)}))},d?setTimeout(b,1E3):b(),a._reszEvt=!0}function Eb(a,b){if(!a)return 0;var c=h("<div/>").css("width",v(a)).appendTo(b||H.body),d=c[0].offsetWidth;c.remove();return d}function Fb(a,
b){var c=Gb(a,b);if(0>c)return null;var d=a.aoData[c];return!d.nTr?h("<td/>").html(B(a,c,b,"display"))[0]:d.anCells[b]}function Gb(a,b){for(var c,d=-1,e=-1,f=0,g=a.aoData.length;f<g;f++)c=B(a,f,b,"display")+"",c=c.replace(Yb,""),c=c.replace(/&nbsp;/g," "),c.length>d&&(d=c.length,e=f);return e}function v(a){return null===a?"0px":"number"==typeof a?0>a?"0px":a+"px":a.match(/\d$/)?a+"px":a}function X(a){var b,c,d=[],e=a.aoColumns,f,g,j,i;b=a.aaSortingFixed;c=h.isPlainObject(b);var m=[];f=function(a){a.length&&
!h.isArray(a[0])?m.push(a):h.merge(m,a)};h.isArray(b)&&f(b);c&&b.pre&&f(b.pre);f(a.aaSorting);c&&b.post&&f(b.post);for(a=0;a<m.length;a++){i=m[a][0];f=e[i].aDataSort;b=0;for(c=f.length;b<c;b++)g=f[b],j=e[g].sType||"string",m[a]._idx===k&&(m[a]._idx=h.inArray(m[a][1],e[g].asSorting)),d.push({src:i,col:g,dir:m[a][1],index:m[a]._idx,type:j,formatter:n.ext.type.order[j+"-pre"]})}return d}function mb(a){var b,c,d=[],e=n.ext.type.order,f=a.aoData,g=0,j,i=a.aiDisplayMaster,h;Ga(a);h=X(a);b=0;for(c=h.length;b<
c;b++)j=h[b],j.formatter&&g++,Hb(a,j.col);if("ssp"!=y(a)&&0!==h.length){b=0;for(c=i.length;b<c;b++)d[i[b]]=b;g===h.length?i.sort(function(a,b){var c,e,g,j,i=h.length,k=f[a]._aSortData,n=f[b]._aSortData;for(g=0;g<i;g++)if(j=h[g],c=k[j.col],e=n[j.col],c=c<e?-1:c>e?1:0,0!==c)return"asc"===j.dir?c:-c;c=d[a];e=d[b];return c<e?-1:c>e?1:0}):i.sort(function(a,b){var c,g,j,i,k=h.length,n=f[a]._aSortData,o=f[b]._aSortData;for(j=0;j<k;j++)if(i=h[j],c=n[i.col],g=o[i.col],i=e[i.type+"-"+i.dir]||e["string-"+i.dir],
c=i(c,g),0!==c)return c;c=d[a];g=d[b];return c<g?-1:c>g?1:0})}a.bSorted=!0}function Ib(a){for(var b,c,d=a.aoColumns,e=X(a),a=a.oLanguage.oAria,f=0,g=d.length;f<g;f++){c=d[f];var j=c.asSorting;b=c.sTitle.replace(/<.*?>/g,"");var i=c.nTh;i.removeAttribute("aria-sort");c.bSortable&&(0<e.length&&e[0].col==f?(i.setAttribute("aria-sort","asc"==e[0].dir?"ascending":"descending"),c=j[e[0].index+1]||j[0]):c=j[0],b+="asc"===c?a.sSortAscending:a.sSortDescending);i.setAttribute("aria-label",b)}}function Va(a,
b,c,d){var e=a.aaSorting,f=a.aoColumns[b].asSorting,g=function(a,b){var c=a._idx;c===k&&(c=h.inArray(a[1],f));return c+1<f.length?c+1:b?null:0};"number"===typeof e[0]&&(e=a.aaSorting=[e]);c&&a.oFeatures.bSortMulti?(c=h.inArray(b,D(e,"0")),-1!==c?(b=g(e[c],!0),null===b&&1===e.length&&(b=0),null===b?e.splice(c,1):(e[c][1]=f[b],e[c]._idx=b)):(e.push([b,f[0],0]),e[e.length-1]._idx=0)):e.length&&e[0][0]==b?(b=g(e[0]),e.length=1,e[0][1]=f[b],e[0]._idx=b):(e.length=0,e.push([b,f[0]]),e[0]._idx=0);T(a);"function"==
typeof d&&d(a)}function Ma(a,b,c,d){var e=a.aoColumns[c];Wa(b,{},function(b){!1!==e.bSortable&&(a.oFeatures.bProcessing?(C(a,!0),setTimeout(function(){Va(a,c,b.shiftKey,d);"ssp"!==y(a)&&C(a,!1)},0)):Va(a,c,b.shiftKey,d))})}function wa(a){var b=a.aLastSort,c=a.oClasses.sSortColumn,d=X(a),e=a.oFeatures,f,g;if(e.bSort&&e.bSortClasses){e=0;for(f=b.length;e<f;e++)g=b[e].src,h(D(a.aoData,"anCells",g)).removeClass(c+(2>e?e+1:3));e=0;for(f=d.length;e<f;e++)g=d[e].src,h(D(a.aoData,"anCells",g)).addClass(c+
(2>e?e+1:3))}a.aLastSort=d}function Hb(a,b){var c=a.aoColumns[b],d=n.ext.order[c.sSortDataType],e;d&&(e=d.call(a.oInstance,a,b,ba(a,b)));for(var f,g=n.ext.type.order[c.sType+"-pre"],j=0,i=a.aoData.length;j<i;j++)if(c=a.aoData[j],c._aSortData||(c._aSortData=[]),!c._aSortData[b]||d)f=d?e[j]:B(a,j,b,"sort"),c._aSortData[b]=g?g(f):f}function xa(a){if(a.oFeatures.bStateSave&&!a.bDestroying){var b={time:+new Date,start:a._iDisplayStart,length:a._iDisplayLength,order:h.extend(!0,[],a.aaSorting),search:Ab(a.oPreviousSearch),
columns:h.map(a.aoColumns,function(b,d){return{visible:b.bVisible,search:Ab(a.aoPreSearchCols[d])}})};r(a,"aoStateSaveParams","stateSaveParams",[a,b]);a.oSavedState=b;a.fnStateSaveCallback.call(a.oInstance,a,b)}}function Jb(a,b,c){var d,e,f=a.aoColumns,b=function(b){if(b&&b.time){var g=r(a,"aoStateLoadParams","stateLoadParams",[a,b]);if(-1===h.inArray(!1,g)&&(g=a.iStateDuration,!(0<g&&b.time<+new Date-1E3*g)&&!(b.columns&&f.length!==b.columns.length))){a.oLoadedState=h.extend(!0,{},b);b.start!==k&&
(a._iDisplayStart=b.start,a.iInitDisplayStart=b.start);b.length!==k&&(a._iDisplayLength=b.length);b.order!==k&&(a.aaSorting=[],h.each(b.order,function(b,c){a.aaSorting.push(c[0]>=f.length?[0,c[1]]:c)}));b.search!==k&&h.extend(a.oPreviousSearch,Bb(b.search));if(b.columns){d=0;for(e=b.columns.length;d<e;d++)g=b.columns[d],g.visible!==k&&(f[d].bVisible=g.visible),g.search!==k&&h.extend(a.aoPreSearchCols[d],Bb(g.search))}r(a,"aoStateLoaded","stateLoaded",[a,b])}}c()};if(a.oFeatures.bStateSave){var g=
a.fnStateLoadCallback.call(a.oInstance,a,b);g!==k&&b(g)}else c()}function ya(a){var b=n.settings,a=h.inArray(a,D(b,"nTable"));return-1!==a?b[a]:null}function K(a,b,c,d){c="DataTables warning: "+(a?"table id="+a.sTableId+" - ":"")+c;d&&(c+=". For more information about this error, please see http://datatables.net/tn/"+d);if(b)E.console&&console.log&&console.log(c);else if(b=n.ext,b=b.sErrMode||b.errMode,a&&r(a,null,"error",[a,d,c]),"alert"==b)alert(c);else{if("throw"==b)throw Error(c);"function"==
typeof b&&b(a,d,c)}}function F(a,b,c,d){h.isArray(c)?h.each(c,function(c,d){h.isArray(d)?F(a,b,d[0],d[1]):F(a,b,d)}):(d===k&&(d=c),b[c]!==k&&(a[d]=b[c]))}function Xa(a,b,c){var d,e;for(e in b)b.hasOwnProperty(e)&&(d=b[e],h.isPlainObject(d)?(h.isPlainObject(a[e])||(a[e]={}),h.extend(!0,a[e],d)):a[e]=c&&"data"!==e&&"aaData"!==e&&h.isArray(d)?d.slice():d);return a}function Wa(a,b,c){h(a).on("click.DT",b,function(b){h(a).blur();c(b)}).on("keypress.DT",b,function(a){13===a.which&&(a.preventDefault(),c(a))}).on("selectstart.DT",
function(){return!1})}function z(a,b,c,d){c&&a[b].push({fn:c,sName:d})}function r(a,b,c,d){var e=[];b&&(e=h.map(a[b].slice().reverse(),function(b){return b.fn.apply(a.oInstance,d)}));null!==c&&(b=h.Event(c+".dt"),h(a.nTable).trigger(b,d),e.push(b.result));return e}function Sa(a){var b=a._iDisplayStart,c=a.fnDisplayEnd(),d=a._iDisplayLength;b>=c&&(b=c-d);b-=b%d;if(-1===d||0>b)b=0;a._iDisplayStart=b}function Na(a,b){var c=a.renderer,d=n.ext.renderer[b];return h.isPlainObject(c)&&c[b]?d[c[b]]||d._:"string"===
typeof c?d[c]||d._:d._}function y(a){return a.oFeatures.bServerSide?"ssp":a.ajax||a.sAjaxSource?"ajax":"dom"}function ia(a,b){var c=[],c=Kb.numbers_length,d=Math.floor(c/2);b<=c?c=Y(0,b):a<=d?(c=Y(0,c-2),c.push("ellipsis"),c.push(b-1)):(a>=b-1-d?c=Y(b-(c-2),b):(c=Y(a-d+2,a+d-1),c.push("ellipsis"),c.push(b-1)),c.splice(0,0,"ellipsis"),c.splice(0,0,0));c.DT_el="span";return c}function Da(a){h.each({num:function(b){return za(b,a)},"num-fmt":function(b){return za(b,a,Ya)},"html-num":function(b){return za(b,
a,Aa)},"html-num-fmt":function(b){return za(b,a,Aa,Ya)}},function(b,c){x.type.order[b+a+"-pre"]=c;b.match(/^html\-/)&&(x.type.search[b+a]=x.type.search.html)})}function Lb(a){return function(){var b=[ya(this[n.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return n.ext.internal[a].apply(this,b)}}var n=function(a){this.$=function(a,b){return this.api(!0).$(a,b)};this._=function(a,b){return this.api(!0).rows(a,b).data()};this.api=function(a){return a?new s(ya(this[x.iApiIndex])):new s(this)};
this.fnAddData=function(a,b){var c=this.api(!0),d=h.isArray(a)&&(h.isArray(a[0])||h.isPlainObject(a[0]))?c.rows.add(a):c.row.add(a);(b===k||b)&&c.draw();return d.flatten().toArray()};this.fnAdjustColumnSizing=function(a){var b=this.api(!0).columns.adjust(),c=b.settings()[0],d=c.oScroll;a===k||a?b.draw(!1):(""!==d.sX||""!==d.sY)&&la(c)};this.fnClearTable=function(a){var b=this.api(!0).clear();(a===k||a)&&b.draw()};this.fnClose=function(a){this.api(!0).row(a).child.hide()};this.fnDeleteRow=function(a,
b,c){var d=this.api(!0),a=d.rows(a),e=a.settings()[0],h=e.aoData[a[0][0]];a.remove();b&&b.call(this,e,h);(c===k||c)&&d.draw();return h};this.fnDestroy=function(a){this.api(!0).destroy(a)};this.fnDraw=function(a){this.api(!0).draw(a)};this.fnFilter=function(a,b,c,d,e,h){e=this.api(!0);null===b||b===k?e.search(a,c,d,h):e.column(b).search(a,c,d,h);e.draw()};this.fnGetData=function(a,b){var c=this.api(!0);if(a!==k){var d=a.nodeName?a.nodeName.toLowerCase():"";return b!==k||"td"==d||"th"==d?c.cell(a,b).data():
c.row(a).data()||null}return c.data().toArray()};this.fnGetNodes=function(a){var b=this.api(!0);return a!==k?b.row(a).node():b.rows().nodes().flatten().toArray()};this.fnGetPosition=function(a){var b=this.api(!0),c=a.nodeName.toUpperCase();return"TR"==c?b.row(a).index():"TD"==c||"TH"==c?(a=b.cell(a).index(),[a.row,a.columnVisible,a.column]):null};this.fnIsOpen=function(a){return this.api(!0).row(a).child.isShown()};this.fnOpen=function(a,b,c){return this.api(!0).row(a).child(b,c).show().child()[0]};
this.fnPageChange=function(a,b){var c=this.api(!0).page(a);(b===k||b)&&c.draw(!1)};this.fnSetColumnVis=function(a,b,c){a=this.api(!0).column(a).visible(b);(c===k||c)&&a.columns.adjust().draw()};this.fnSettings=function(){return ya(this[x.iApiIndex])};this.fnSort=function(a){this.api(!0).order(a).draw()};this.fnSortListener=function(a,b,c){this.api(!0).order.listener(a,b,c)};this.fnUpdate=function(a,b,c,d,e){var h=this.api(!0);c===k||null===c?h.row(b).data(a):h.cell(b,c).data(a);(e===k||e)&&h.columns.adjust();
(d===k||d)&&h.draw();return 0};this.fnVersionCheck=x.fnVersionCheck;var b=this,c=a===k,d=this.length;c&&(a={});this.oApi=this.internal=x.internal;for(var e in n.ext.internal)e&&(this[e]=Lb(e));this.each(function(){var e={},g=1<d?Xa(e,a,!0):a,j=0,i,e=this.getAttribute("id"),m=!1,l=n.defaults,q=h(this);if("table"!=this.nodeName.toLowerCase())K(null,0,"Non-table node initialisation ("+this.nodeName+")",2);else{eb(l);fb(l.column);J(l,l,!0);J(l.column,l.column,!0);J(l,h.extend(g,q.data()));var t=n.settings,
j=0;for(i=t.length;j<i;j++){var o=t[j];if(o.nTable==this||o.nTHead&&o.nTHead.parentNode==this||o.nTFoot&&o.nTFoot.parentNode==this){var s=g.bRetrieve!==k?g.bRetrieve:l.bRetrieve;if(c||s)return o.oInstance;if(g.bDestroy!==k?g.bDestroy:l.bDestroy){o.oInstance.fnDestroy();break}else{K(o,0,"Cannot reinitialise DataTable",3);return}}if(o.sTableId==this.id){t.splice(j,1);break}}if(null===e||""===e)this.id=e="DataTables_Table_"+n.ext._unique++;var p=h.extend(!0,{},n.models.oSettings,{sDestroyWidth:q[0].style.width,
sInstance:e,sTableId:e});p.nTable=this;p.oApi=b.internal;p.oInit=g;t.push(p);p.oInstance=1===b.length?b:q.dataTable();eb(g);Ca(g.oLanguage);g.aLengthMenu&&!g.iDisplayLength&&(g.iDisplayLength=h.isArray(g.aLengthMenu[0])?g.aLengthMenu[0][0]:g.aLengthMenu[0]);g=Xa(h.extend(!0,{},l),g);F(p.oFeatures,g,"bPaginate bLengthChange bFilter bSort bSortMulti bInfo bProcessing bAutoWidth bSortClasses bServerSide bDeferRender".split(" "));F(p,g,["asStripeClasses","ajax","fnServerData","fnFormatNumber","sServerMethod",
"aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer","searchDelay","rowId",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"]]);F(p.oScroll,g,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]);F(p.oLanguage,g,"fnInfoCallback");
z(p,"aoDrawCallback",g.fnDrawCallback,"user");z(p,"aoServerParams",g.fnServerParams,"user");z(p,"aoStateSaveParams",g.fnStateSaveParams,"user");z(p,"aoStateLoadParams",g.fnStateLoadParams,"user");z(p,"aoStateLoaded",g.fnStateLoaded,"user");z(p,"aoRowCallback",g.fnRowCallback,"user");z(p,"aoRowCreatedCallback",g.fnCreatedRow,"user");z(p,"aoHeaderCallback",g.fnHeaderCallback,"user");z(p,"aoFooterCallback",g.fnFooterCallback,"user");z(p,"aoInitComplete",g.fnInitComplete,"user");z(p,"aoPreDrawCallback",
g.fnPreDrawCallback,"user");p.rowIdFn=S(g.rowId);gb(p);var u=p.oClasses;h.extend(u,n.ext.classes,g.oClasses);q.addClass(u.sTable);p.iInitDisplayStart===k&&(p.iInitDisplayStart=g.iDisplayStart,p._iDisplayStart=g.iDisplayStart);null!==g.iDeferLoading&&(p.bDeferLoading=!0,e=h.isArray(g.iDeferLoading),p._iRecordsDisplay=e?g.iDeferLoading[0]:g.iDeferLoading,p._iRecordsTotal=e?g.iDeferLoading[1]:g.iDeferLoading);var v=p.oLanguage;h.extend(!0,v,g.oLanguage);v.sUrl&&(h.ajax({dataType:"json",url:v.sUrl,success:function(a){Ca(a);
J(l.oLanguage,a);h.extend(true,v,a);ha(p)},error:function(){ha(p)}}),m=!0);null===g.asStripeClasses&&(p.asStripeClasses=[u.sStripeOdd,u.sStripeEven]);var e=p.asStripeClasses,x=q.children("tbody").find("tr").eq(0);-1!==h.inArray(!0,h.map(e,function(a){return x.hasClass(a)}))&&(h("tbody tr",this).removeClass(e.join(" ")),p.asDestroyStripes=e.slice());e=[];t=this.getElementsByTagName("thead");0!==t.length&&(ea(p.aoHeader,t[0]),e=ra(p));if(null===g.aoColumns){t=[];j=0;for(i=e.length;j<i;j++)t.push(null)}else t=
g.aoColumns;j=0;for(i=t.length;j<i;j++)Ea(p,e?e[j]:null);ib(p,g.aoColumnDefs,t,function(a,b){ka(p,a,b)});if(x.length){var w=function(a,b){return a.getAttribute("data-"+b)!==null?b:null};h(x[0]).children("th, td").each(function(a,b){var c=p.aoColumns[a];if(c.mData===a){var d=w(b,"sort")||w(b,"order"),e=w(b,"filter")||w(b,"search");if(d!==null||e!==null){c.mData={_:a+".display",sort:d!==null?a+".@data-"+d:k,type:d!==null?a+".@data-"+d:k,filter:e!==null?a+".@data-"+e:k};ka(p,a)}}})}var U=p.oFeatures,
e=function(){if(g.aaSorting===k){var a=p.aaSorting;j=0;for(i=a.length;j<i;j++)a[j][1]=p.aoColumns[j].asSorting[0]}wa(p);U.bSort&&z(p,"aoDrawCallback",function(){if(p.bSorted){var a=X(p),b={};h.each(a,function(a,c){b[c.src]=c.dir});r(p,null,"order",[p,a,b]);Ib(p)}});z(p,"aoDrawCallback",function(){(p.bSorted||y(p)==="ssp"||U.bDeferRender)&&wa(p)},"sc");var a=q.children("caption").each(function(){this._captionSide=h(this).css("caption-side")}),b=q.children("thead");b.length===0&&(b=h("<thead/>").appendTo(q));
p.nTHead=b[0];b=q.children("tbody");b.length===0&&(b=h("<tbody/>").appendTo(q));p.nTBody=b[0];b=q.children("tfoot");if(b.length===0&&a.length>0&&(p.oScroll.sX!==""||p.oScroll.sY!==""))b=h("<tfoot/>").appendTo(q);if(b.length===0||b.children().length===0)q.addClass(u.sNoFooter);else if(b.length>0){p.nTFoot=b[0];ea(p.aoFooter,p.nTFoot)}if(g.aaData)for(j=0;j<g.aaData.length;j++)O(p,g.aaData[j]);else(p.bDeferLoading||y(p)=="dom")&&na(p,h(p.nTBody).children("tr"));p.aiDisplay=p.aiDisplayMaster.slice();
p.bInitialised=true;m===false&&ha(p)};g.bStateSave?(U.bStateSave=!0,z(p,"aoDrawCallback",xa,"state_save"),Jb(p,g,e)):e()}});b=null;return this},x,s,o,u,Za={},Mb=/[\r\n]/g,Aa=/<.*?>/g,Zb=/^\d{2,4}[\.\/\-]\d{1,2}[\.\/\-]\d{1,2}([T ]{1}\d{1,2}[:\.]\d{2}([\.:]\d{2})?)?$/,$b=RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\|\\$|\\^|\\-)","g"),Ya=/[',$£€¥%\u2009\u202F\u20BD\u20a9\u20BArfkɃΞ]/gi,M=function(a){return!a||!0===a||"-"===a?!0:!1},Nb=function(a){var b=parseInt(a,10);return!isNaN(b)&&
isFinite(a)?b:null},Ob=function(a,b){Za[b]||(Za[b]=RegExp(Qa(b),"g"));return"string"===typeof a&&"."!==b?a.replace(/\./g,"").replace(Za[b],"."):a},$a=function(a,b,c){var d="string"===typeof a;if(M(a))return!0;b&&d&&(a=Ob(a,b));c&&d&&(a=a.replace(Ya,""));return!isNaN(parseFloat(a))&&isFinite(a)},Pb=function(a,b,c){return M(a)?!0:!(M(a)||"string"===typeof a)?null:$a(a.replace(Aa,""),b,c)?!0:null},D=function(a,b,c){var d=[],e=0,f=a.length;if(c!==k)for(;e<f;e++)a[e]&&a[e][b]&&d.push(a[e][b][c]);else for(;e<
f;e++)a[e]&&d.push(a[e][b]);return d},ja=function(a,b,c,d){var e=[],f=0,g=b.length;if(d!==k)for(;f<g;f++)a[b[f]][c]&&e.push(a[b[f]][c][d]);else for(;f<g;f++)e.push(a[b[f]][c]);return e},Y=function(a,b){var c=[],d;b===k?(b=0,d=a):(d=b,b=a);for(var e=b;e<d;e++)c.push(e);return c},Qb=function(a){for(var b=[],c=0,d=a.length;c<d;c++)a[c]&&b.push(a[c]);return b},qa=function(a){var b;a:{if(!(2>a.length)){b=a.slice().sort();for(var c=b[0],d=1,e=b.length;d<e;d++){if(b[d]===c){b=!1;break a}c=b[d]}}b=!0}if(b)return a.slice();
b=[];var e=a.length,f,g=0,d=0;a:for(;d<e;d++){c=a[d];for(f=0;f<g;f++)if(b[f]===c)continue a;b.push(c);g++}return b};n.util={throttle:function(a,b){var c=b!==k?b:200,d,e;return function(){var b=this,g=+new Date,j=arguments;d&&g<d+c?(clearTimeout(e),e=setTimeout(function(){d=k;a.apply(b,j)},c)):(d=g,a.apply(b,j))}},escapeRegex:function(a){return a.replace($b,"\\$1")}};var A=function(a,b,c){a[b]!==k&&(a[c]=a[b])},ca=/\[.*?\]$/,W=/\(\)$/,Qa=n.util.escapeRegex,va=h("<div>")[0],Wb=va.textContent!==k,Yb=
/<.*?>/g,Oa=n.util.throttle,Rb=[],w=Array.prototype,ac=function(a){var b,c,d=n.settings,e=h.map(d,function(a){return a.nTable});if(a){if(a.nTable&&a.oApi)return[a];if(a.nodeName&&"table"===a.nodeName.toLowerCase())return b=h.inArray(a,e),-1!==b?[d[b]]:null;if(a&&"function"===typeof a.settings)return a.settings().toArray();"string"===typeof a?c=h(a):a instanceof h&&(c=a)}else return[];if(c)return c.map(function(){b=h.inArray(this,e);return-1!==b?d[b]:null}).toArray()};s=function(a,b){if(!(this instanceof
s))return new s(a,b);var c=[],d=function(a){(a=ac(a))&&(c=c.concat(a))};if(h.isArray(a))for(var e=0,f=a.length;e<f;e++)d(a[e]);else d(a);this.context=qa(c);b&&h.merge(this,b);this.selector={rows:null,cols:null,opts:null};s.extend(this,this,Rb)};n.Api=s;h.extend(s.prototype,{any:function(){return 0!==this.count()},concat:w.concat,context:[],count:function(){return this.flatten().length},each:function(a){for(var b=0,c=this.length;b<c;b++)a.call(this,this[b],b,this);return this},eq:function(a){var b=
this.context;return b.length>a?new s(b[a],this[a]):null},filter:function(a){var b=[];if(w.filter)b=w.filter.call(this,a,this);else for(var c=0,d=this.length;c<d;c++)a.call(this,this[c],c,this)&&b.push(this[c]);return new s(this.context,b)},flatten:function(){var a=[];return new s(this.context,a.concat.apply(a,this.toArray()))},join:w.join,indexOf:w.indexOf||function(a,b){for(var c=b||0,d=this.length;c<d;c++)if(this[c]===a)return c;return-1},iterator:function(a,b,c,d){var e=[],f,g,j,h,m,l=this.context,
n,o,u=this.selector;"string"===typeof a&&(d=c,c=b,b=a,a=!1);g=0;for(j=l.length;g<j;g++){var r=new s(l[g]);if("table"===b)f=c.call(r,l[g],g),f!==k&&e.push(f);else if("columns"===b||"rows"===b)f=c.call(r,l[g],this[g],g),f!==k&&e.push(f);else if("column"===b||"column-rows"===b||"row"===b||"cell"===b){o=this[g];"column-rows"===b&&(n=Ba(l[g],u.opts));h=0;for(m=o.length;h<m;h++)f=o[h],f="cell"===b?c.call(r,l[g],f.row,f.column,g,h):c.call(r,l[g],f,g,h,n),f!==k&&e.push(f)}}return e.length||d?(a=new s(l,a?
e.concat.apply([],e):e),b=a.selector,b.rows=u.rows,b.cols=u.cols,b.opts=u.opts,a):this},lastIndexOf:w.lastIndexOf||function(a,b){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(a){var b=[];if(w.map)b=w.map.call(this,a,this);else for(var c=0,d=this.length;c<d;c++)b.push(a.call(this,this[c],c));return new s(this.context,b)},pluck:function(a){return this.map(function(b){return b[a]})},pop:w.pop,push:w.push,reduce:w.reduce||function(a,b){return hb(this,a,b,0,this.length,
1)},reduceRight:w.reduceRight||function(a,b){return hb(this,a,b,this.length-1,-1,-1)},reverse:w.reverse,selector:null,shift:w.shift,slice:function(){return new s(this.context,this)},sort:w.sort,splice:w.splice,toArray:function(){return w.slice.call(this)},to$:function(){return h(this)},toJQuery:function(){return h(this)},unique:function(){return new s(this.context,qa(this))},unshift:w.unshift});s.extend=function(a,b,c){if(c.length&&b&&(b instanceof s||b.__dt_wrapper)){var d,e,f,g=function(a,b,c){return function(){var d=
b.apply(a,arguments);s.extend(d,d,c.methodExt);return d}};d=0;for(e=c.length;d<e;d++)f=c[d],b[f.name]="function"===typeof f.val?g(a,f.val,f):h.isPlainObject(f.val)?{}:f.val,b[f.name].__dt_wrapper=!0,s.extend(a,b[f.name],f.propExt)}};s.register=o=function(a,b){if(h.isArray(a))for(var c=0,d=a.length;c<d;c++)s.register(a[c],b);else for(var e=a.split("."),f=Rb,g,j,c=0,d=e.length;c<d;c++){g=(j=-1!==e[c].indexOf("()"))?e[c].replace("()",""):e[c];var i;a:{i=0;for(var m=f.length;i<m;i++)if(f[i].name===g){i=
f[i];break a}i=null}i||(i={name:g,val:{},methodExt:[],propExt:[]},f.push(i));c===d-1?i.val=b:f=j?i.methodExt:i.propExt}};s.registerPlural=u=function(a,b,c){s.register(a,c);s.register(b,function(){var a=c.apply(this,arguments);return a===this?this:a instanceof s?a.length?h.isArray(a[0])?new s(a.context,a[0]):a[0]:k:a})};o("tables()",function(a){var b;if(a){b=s;var c=this.context;if("number"===typeof a)a=[c[a]];else var d=h.map(c,function(a){return a.nTable}),a=h(d).filter(a).map(function(){var a=h.inArray(this,
d);return c[a]}).toArray();b=new b(a)}else b=this;return b});o("table()",function(a){var a=this.tables(a),b=a.context;return b.length?new s(b[0]):a});u("tables().nodes()","table().node()",function(){return this.iterator("table",function(a){return a.nTable},1)});u("tables().body()","table().body()",function(){return this.iterator("table",function(a){return a.nTBody},1)});u("tables().header()","table().header()",function(){return this.iterator("table",function(a){return a.nTHead},1)});u("tables().footer()",
"table().footer()",function(){return this.iterator("table",function(a){return a.nTFoot},1)});u("tables().containers()","table().container()",function(){return this.iterator("table",function(a){return a.nTableWrapper},1)});o("draw()",function(a){return this.iterator("table",function(b){"page"===a?P(b):("string"===typeof a&&(a="full-hold"===a?!1:!0),T(b,!1===a))})});o("page()",function(a){return a===k?this.page.info().page:this.iterator("table",function(b){Ta(b,a)})});o("page.info()",function(){if(0===
this.context.length)return k;var a=this.context[0],b=a._iDisplayStart,c=a.oFeatures.bPaginate?a._iDisplayLength:-1,d=a.fnRecordsDisplay(),e=-1===c;return{page:e?0:Math.floor(b/c),pages:e?1:Math.ceil(d/c),start:b,end:a.fnDisplayEnd(),length:c,recordsTotal:a.fnRecordsTotal(),recordsDisplay:d,serverSide:"ssp"===y(a)}});o("page.len()",function(a){return a===k?0!==this.context.length?this.context[0]._iDisplayLength:k:this.iterator("table",function(b){Ra(b,a)})});var Sb=function(a,b,c){if(c){var d=new s(a);
d.one("draw",function(){c(d.ajax.json())})}if("ssp"==y(a))T(a,b);else{C(a,!0);var e=a.jqXHR;e&&4!==e.readyState&&e.abort();sa(a,[],function(c){oa(a);for(var c=ta(a,c),d=0,e=c.length;d<e;d++)O(a,c[d]);T(a,b);C(a,!1)})}};o("ajax.json()",function(){var a=this.context;if(0<a.length)return a[0].json});o("ajax.params()",function(){var a=this.context;if(0<a.length)return a[0].oAjaxData});o("ajax.reload()",function(a,b){return this.iterator("table",function(c){Sb(c,!1===b,a)})});o("ajax.url()",function(a){var b=
this.context;if(a===k){if(0===b.length)return k;b=b[0];return b.ajax?h.isPlainObject(b.ajax)?b.ajax.url:b.ajax:b.sAjaxSource}return this.iterator("table",function(b){h.isPlainObject(b.ajax)?b.ajax.url=a:b.ajax=a})});o("ajax.url().load()",function(a,b){return this.iterator("table",function(c){Sb(c,!1===b,a)})});var ab=function(a,b,c,d,e){var f=[],g,j,i,m,l,n;i=typeof b;if(!b||"string"===i||"function"===i||b.length===k)b=[b];i=0;for(m=b.length;i<m;i++){j=b[i]&&b[i].split&&!b[i].match(/[\[\(:]/)?b[i].split(","):
[b[i]];l=0;for(n=j.length;l<n;l++)(g=c("string"===typeof j[l]?h.trim(j[l]):j[l]))&&g.length&&(f=f.concat(g))}a=x.selector[a];if(a.length){i=0;for(m=a.length;i<m;i++)f=a[i](d,e,f)}return qa(f)},bb=function(a){a||(a={});a.filter&&a.search===k&&(a.search=a.filter);return h.extend({search:"none",order:"current",page:"all"},a)},cb=function(a){for(var b=0,c=a.length;b<c;b++)if(0<a[b].length)return a[0]=a[b],a[0].length=1,a.length=1,a.context=[a.context[b]],a;a.length=0;return a},Ba=function(a,b){var c,
d,e,f=[],g=a.aiDisplay;e=a.aiDisplayMaster;var j=b.search;c=b.order;d=b.page;if("ssp"==y(a))return"removed"===j?[]:Y(0,e.length);if("current"==d){c=a._iDisplayStart;for(d=a.fnDisplayEnd();c<d;c++)f.push(g[c])}else if("current"==c||"applied"==c)if("none"==j)f=e.slice();else if("applied"==j)f=g.slice();else{if("removed"==j){var i={};c=0;for(d=g.length;c<d;c++)i[g[c]]=null;f=h.map(e,function(a){return!i.hasOwnProperty(a)?a:null})}}else if("index"==c||"original"==c){c=0;for(d=a.aoData.length;c<d;c++)"none"==
j?f.push(c):(e=h.inArray(c,g),(-1===e&&"removed"==j||0<=e&&"applied"==j)&&f.push(c))}return f};o("rows()",function(a,b){a===k?a="":h.isPlainObject(a)&&(b=a,a="");var b=bb(b),c=this.iterator("table",function(c){var e=b,f;return ab("row",a,function(a){var b=Nb(a),i=c.aoData;if(b!==null&&!e)return[b];f||(f=Ba(c,e));if(b!==null&&h.inArray(b,f)!==-1)return[b];if(a===null||a===k||a==="")return f;if(typeof a==="function")return h.map(f,function(b){var c=i[b];return a(b,c._aData,c.nTr)?b:null});if(a.nodeName){var b=
a._DT_RowIndex,m=a._DT_CellIndex;if(b!==k)return i[b]&&i[b].nTr===a?[b]:[];if(m)return i[m.row]&&i[m.row].nTr===a?[m.row]:[];b=h(a).closest("*[data-dt-row]");return b.length?[b.data("dt-row")]:[]}if(typeof a==="string"&&a.charAt(0)==="#"){b=c.aIds[a.replace(/^#/,"")];if(b!==k)return[b.idx]}b=Qb(ja(c.aoData,f,"nTr"));return h(b).filter(a).map(function(){return this._DT_RowIndex}).toArray()},c,e)},1);c.selector.rows=a;c.selector.opts=b;return c});o("rows().nodes()",function(){return this.iterator("row",
function(a,b){return a.aoData[b].nTr||k},1)});o("rows().data()",function(){return this.iterator(!0,"rows",function(a,b){return ja(a.aoData,b,"_aData")},1)});u("rows().cache()","row().cache()",function(a){return this.iterator("row",function(b,c){var d=b.aoData[c];return"search"===a?d._aFilterData:d._aSortData},1)});u("rows().invalidate()","row().invalidate()",function(a){return this.iterator("row",function(b,c){da(b,c,a)})});u("rows().indexes()","row().index()",function(){return this.iterator("row",
function(a,b){return b},1)});u("rows().ids()","row().id()",function(a){for(var b=[],c=this.context,d=0,e=c.length;d<e;d++)for(var f=0,g=this[d].length;f<g;f++){var h=c[d].rowIdFn(c[d].aoData[this[d][f]]._aData);b.push((!0===a?"#":"")+h)}return new s(c,b)});u("rows().remove()","row().remove()",function(){var a=this;this.iterator("row",function(b,c,d){var e=b.aoData,f=e[c],g,h,i,m,l;e.splice(c,1);g=0;for(h=e.length;g<h;g++)if(i=e[g],l=i.anCells,null!==i.nTr&&(i.nTr._DT_RowIndex=g),null!==l){i=0;for(m=
l.length;i<m;i++)l[i]._DT_CellIndex.row=g}pa(b.aiDisplayMaster,c);pa(b.aiDisplay,c);pa(a[d],c,!1);0<b._iRecordsDisplay&&b._iRecordsDisplay--;Sa(b);c=b.rowIdFn(f._aData);c!==k&&delete b.aIds[c]});this.iterator("table",function(a){for(var c=0,d=a.aoData.length;c<d;c++)a.aoData[c].idx=c});return this});o("rows.add()",function(a){var b=this.iterator("table",function(b){var c,f,g,h=[];f=0;for(g=a.length;f<g;f++)c=a[f],c.nodeName&&"TR"===c.nodeName.toUpperCase()?h.push(na(b,c)[0]):h.push(O(b,c));return h},
1),c=this.rows(-1);c.pop();h.merge(c,b);return c});o("row()",function(a,b){return cb(this.rows(a,b))});o("row().data()",function(a){var b=this.context;if(a===k)return b.length&&this.length?b[0].aoData[this[0]]._aData:k;var c=b[0].aoData[this[0]];c._aData=a;h.isArray(a)&&c.nTr.id&&N(b[0].rowId)(a,c.nTr.id);da(b[0],this[0],"data");return this});o("row().node()",function(){var a=this.context;return a.length&&this.length?a[0].aoData[this[0]].nTr||null:null});o("row.add()",function(a){a instanceof h&&
a.length&&(a=a[0]);var b=this.iterator("table",function(b){return a.nodeName&&"TR"===a.nodeName.toUpperCase()?na(b,a)[0]:O(b,a)});return this.row(b[0])});var db=function(a,b){var c=a.context;if(c.length&&(c=c[0].aoData[b!==k?b:a[0]])&&c._details)c._details.remove(),c._detailsShow=k,c._details=k},Tb=function(a,b){var c=a.context;if(c.length&&a.length){var d=c[0].aoData[a[0]];if(d._details){(d._detailsShow=b)?d._details.insertAfter(d.nTr):d._details.detach();var e=c[0],f=new s(e),g=e.aoData;f.off("draw.dt.DT_details column-visibility.dt.DT_details destroy.dt.DT_details");
0<D(g,"_details").length&&(f.on("draw.dt.DT_details",function(a,b){e===b&&f.rows({page:"current"}).eq(0).each(function(a){a=g[a];a._detailsShow&&a._details.insertAfter(a.nTr)})}),f.on("column-visibility.dt.DT_details",function(a,b){if(e===b)for(var c,d=V(b),f=0,h=g.length;f<h;f++)c=g[f],c._details&&c._details.children("td[colspan]").attr("colspan",d)}),f.on("destroy.dt.DT_details",function(a,b){if(e===b)for(var c=0,d=g.length;c<d;c++)g[c]._details&&db(f,c)}))}}};o("row().child()",function(a,b){var c=
this.context;if(a===k)return c.length&&this.length?c[0].aoData[this[0]]._details:k;if(!0===a)this.child.show();else if(!1===a)db(this);else if(c.length&&this.length){var d=c[0],c=c[0].aoData[this[0]],e=[],f=function(a,b){if(h.isArray(a)||a instanceof h)for(var c=0,k=a.length;c<k;c++)f(a[c],b);else a.nodeName&&"tr"===a.nodeName.toLowerCase()?e.push(a):(c=h("<tr><td/></tr>").addClass(b),h("td",c).addClass(b).html(a)[0].colSpan=V(d),e.push(c[0]))};f(a,b);c._details&&c._details.detach();c._details=h(e);
c._detailsShow&&c._details.insertAfter(c.nTr)}return this});o(["row().child.show()","row().child().show()"],function(){Tb(this,!0);return this});o(["row().child.hide()","row().child().hide()"],function(){Tb(this,!1);return this});o(["row().child.remove()","row().child().remove()"],function(){db(this);return this});o("row().child.isShown()",function(){var a=this.context;return a.length&&this.length?a[0].aoData[this[0]]._detailsShow||!1:!1});var bc=/^([^:]+):(name|visIdx|visible)$/,Ub=function(a,b,
c,d,e){for(var c=[],d=0,f=e.length;d<f;d++)c.push(B(a,e[d],b));return c};o("columns()",function(a,b){a===k?a="":h.isPlainObject(a)&&(b=a,a="");var b=bb(b),c=this.iterator("table",function(c){var e=a,f=b,g=c.aoColumns,j=D(g,"sName"),i=D(g,"nTh");return ab("column",e,function(a){var b=Nb(a);if(a==="")return Y(g.length);if(b!==null)return[b>=0?b:g.length+b];if(typeof a==="function"){var e=Ba(c,f);return h.map(g,function(b,f){return a(f,Ub(c,f,0,0,e),i[f])?f:null})}var k=typeof a==="string"?a.match(bc):
"";if(k)switch(k[2]){case "visIdx":case "visible":b=parseInt(k[1],10);if(b<0){var n=h.map(g,function(a,b){return a.bVisible?b:null});return[n[n.length+b]]}return[aa(c,b)];case "name":return h.map(j,function(a,b){return a===k[1]?b:null});default:return[]}if(a.nodeName&&a._DT_CellIndex)return[a._DT_CellIndex.column];b=h(i).filter(a).map(function(){return h.inArray(this,i)}).toArray();if(b.length||!a.nodeName)return b;b=h(a).closest("*[data-dt-column]");return b.length?[b.data("dt-column")]:[]},c,f)},
1);c.selector.cols=a;c.selector.opts=b;return c});u("columns().header()","column().header()",function(){return this.iterator("column",function(a,b){return a.aoColumns[b].nTh},1)});u("columns().footer()","column().footer()",function(){return this.iterator("column",function(a,b){return a.aoColumns[b].nTf},1)});u("columns().data()","column().data()",function(){return this.iterator("column-rows",Ub,1)});u("columns().dataSrc()","column().dataSrc()",function(){return this.iterator("column",function(a,b){return a.aoColumns[b].mData},
1)});u("columns().cache()","column().cache()",function(a){return this.iterator("column-rows",function(b,c,d,e,f){return ja(b.aoData,f,"search"===a?"_aFilterData":"_aSortData",c)},1)});u("columns().nodes()","column().nodes()",function(){return this.iterator("column-rows",function(a,b,c,d,e){return ja(a.aoData,e,"anCells",b)},1)});u("columns().visible()","column().visible()",function(a,b){var c=this.iterator("column",function(b,c){if(a===k)return b.aoColumns[c].bVisible;var f=b.aoColumns,g=f[c],j=b.aoData,
i,m,l;if(a!==k&&g.bVisible!==a){if(a){var n=h.inArray(!0,D(f,"bVisible"),c+1);i=0;for(m=j.length;i<m;i++)l=j[i].nTr,f=j[i].anCells,l&&l.insertBefore(f[c],f[n]||null)}else h(D(b.aoData,"anCells",c)).detach();g.bVisible=a;fa(b,b.aoHeader);fa(b,b.aoFooter);b.aiDisplay.length||h(b.nTBody).find("td[colspan]").attr("colspan",V(b));xa(b)}});a!==k&&(this.iterator("column",function(c,e){r(c,null,"column-visibility",[c,e,a,b])}),(b===k||b)&&this.columns.adjust());return c});u("columns().indexes()","column().index()",
function(a){return this.iterator("column",function(b,c){return"visible"===a?ba(b,c):c},1)});o("columns.adjust()",function(){return this.iterator("table",function(a){$(a)},1)});o("column.index()",function(a,b){if(0!==this.context.length){var c=this.context[0];if("fromVisible"===a||"toData"===a)return aa(c,b);if("fromData"===a||"toVisible"===a)return ba(c,b)}});o("column()",function(a,b){return cb(this.columns(a,b))});o("cells()",function(a,b,c){h.isPlainObject(a)&&(a.row===k?(c=a,a=null):(c=b,b=null));
h.isPlainObject(b)&&(c=b,b=null);if(null===b||b===k)return this.iterator("table",function(b){var d=a,e=bb(c),f=b.aoData,g=Ba(b,e),j=Qb(ja(f,g,"anCells")),i=h([].concat.apply([],j)),l,m=b.aoColumns.length,n,o,u,s,r,v;return ab("cell",d,function(a){var c=typeof a==="function";if(a===null||a===k||c){n=[];o=0;for(u=g.length;o<u;o++){l=g[o];for(s=0;s<m;s++){r={row:l,column:s};if(c){v=f[l];a(r,B(b,l,s),v.anCells?v.anCells[s]:null)&&n.push(r)}else n.push(r)}}return n}if(h.isPlainObject(a))return a.column!==
k&&a.row!==k&&h.inArray(a.row,g)!==-1?[a]:[];c=i.filter(a).map(function(a,b){return{row:b._DT_CellIndex.row,column:b._DT_CellIndex.column}}).toArray();if(c.length||!a.nodeName)return c;v=h(a).closest("*[data-dt-row]");return v.length?[{row:v.data("dt-row"),column:v.data("dt-column")}]:[]},b,e)});var d=this.columns(b),e=this.rows(a),f,g,j,i,m;this.iterator("table",function(a,b){f=[];g=0;for(j=e[b].length;g<j;g++){i=0;for(m=d[b].length;i<m;i++)f.push({row:e[b][g],column:d[b][i]})}},1);var l=this.cells(f,
c);h.extend(l.selector,{cols:b,rows:a,opts:c});return l});u("cells().nodes()","cell().node()",function(){return this.iterator("cell",function(a,b,c){return(a=a.aoData[b])&&a.anCells?a.anCells[c]:k},1)});o("cells().data()",function(){return this.iterator("cell",function(a,b,c){return B(a,b,c)},1)});u("cells().cache()","cell().cache()",function(a){a="search"===a?"_aFilterData":"_aSortData";return this.iterator("cell",function(b,c,d){return b.aoData[c][a][d]},1)});u("cells().render()","cell().render()",
function(a){return this.iterator("cell",function(b,c,d){return B(b,c,d,a)},1)});u("cells().indexes()","cell().index()",function(){return this.iterator("cell",function(a,b,c){return{row:b,column:c,columnVisible:ba(a,c)}},1)});u("cells().invalidate()","cell().invalidate()",function(a){return this.iterator("cell",function(b,c,d){da(b,c,a,d)})});o("cell()",function(a,b,c){return cb(this.cells(a,b,c))});o("cell().data()",function(a){var b=this.context,c=this[0];if(a===k)return b.length&&c.length?B(b[0],
c[0].row,c[0].column):k;jb(b[0],c[0].row,c[0].column,a);da(b[0],c[0].row,"data",c[0].column);return this});o("order()",function(a,b){var c=this.context;if(a===k)return 0!==c.length?c[0].aaSorting:k;"number"===typeof a?a=[[a,b]]:a.length&&!h.isArray(a[0])&&(a=Array.prototype.slice.call(arguments));return this.iterator("table",function(b){b.aaSorting=a.slice()})});o("order.listener()",function(a,b,c){return this.iterator("table",function(d){Ma(d,a,b,c)})});o("order.fixed()",function(a){if(!a){var b=
this.context,b=b.length?b[0].aaSortingFixed:k;return h.isArray(b)?{pre:b}:b}return this.iterator("table",function(b){b.aaSortingFixed=h.extend(!0,{},a)})});o(["columns().order()","column().order()"],function(a){var b=this;return this.iterator("table",function(c,d){var e=[];h.each(b[d],function(b,c){e.push([c,a])});c.aaSorting=e})});o("search()",function(a,b,c,d){var e=this.context;return a===k?0!==e.length?e[0].oPreviousSearch.sSearch:k:this.iterator("table",function(e){e.oFeatures.bFilter&&ga(e,
h.extend({},e.oPreviousSearch,{sSearch:a+"",bRegex:null===b?!1:b,bSmart:null===c?!0:c,bCaseInsensitive:null===d?!0:d}),1)})});u("columns().search()","column().search()",function(a,b,c,d){return this.iterator("column",function(e,f){var g=e.aoPreSearchCols;if(a===k)return g[f].sSearch;e.oFeatures.bFilter&&(h.extend(g[f],{sSearch:a+"",bRegex:null===b?!1:b,bSmart:null===c?!0:c,bCaseInsensitive:null===d?!0:d}),ga(e,e.oPreviousSearch,1))})});o("state()",function(){return this.context.length?this.context[0].oSavedState:
null});o("state.clear()",function(){return this.iterator("table",function(a){a.fnStateSaveCallback.call(a.oInstance,a,{})})});o("state.loaded()",function(){return this.context.length?this.context[0].oLoadedState:null});o("state.save()",function(){return this.iterator("table",function(a){xa(a)})});n.versionCheck=n.fnVersionCheck=function(a){for(var b=n.version.split("."),a=a.split("."),c,d,e=0,f=a.length;e<f;e++)if(c=parseInt(b[e],10)||0,d=parseInt(a[e],10)||0,c!==d)return c>d;return!0};n.isDataTable=
n.fnIsDataTable=function(a){var b=h(a).get(0),c=!1;if(a instanceof n.Api)return!0;h.each(n.settings,function(a,e){var f=e.nScrollHead?h("table",e.nScrollHead)[0]:null,g=e.nScrollFoot?h("table",e.nScrollFoot)[0]:null;if(e.nTable===b||f===b||g===b)c=!0});return c};n.tables=n.fnTables=function(a){var b=!1;h.isPlainObject(a)&&(b=a.api,a=a.visible);var c=h.map(n.settings,function(b){if(!a||a&&h(b.nTable).is(":visible"))return b.nTable});return b?new s(c):c};n.camelToHungarian=J;o("$()",function(a,b){var c=
this.rows(b).nodes(),c=h(c);return h([].concat(c.filter(a).toArray(),c.find(a).toArray()))});h.each(["on","one","off"],function(a,b){o(b+"()",function(){var a=Array.prototype.slice.call(arguments);a[0]=h.map(a[0].split(/\s/),function(a){return!a.match(/\.dt\b/)?a+".dt":a}).join(" ");var d=h(this.tables().nodes());d[b].apply(d,a);return this})});o("clear()",function(){return this.iterator("table",function(a){oa(a)})});o("settings()",function(){return new s(this.context,this.context)});o("init()",function(){var a=
this.context;return a.length?a[0].oInit:null});o("data()",function(){return this.iterator("table",function(a){return D(a.aoData,"_aData")}).flatten()});o("destroy()",function(a){a=a||!1;return this.iterator("table",function(b){var c=b.nTableWrapper.parentNode,d=b.oClasses,e=b.nTable,f=b.nTBody,g=b.nTHead,j=b.nTFoot,i=h(e),f=h(f),k=h(b.nTableWrapper),l=h.map(b.aoData,function(a){return a.nTr}),o;b.bDestroying=!0;r(b,"aoDestroyCallback","destroy",[b]);a||(new s(b)).columns().visible(!0);k.off(".DT").find(":not(tbody *)").off(".DT");
h(E).off(".DT-"+b.sInstance);e!=g.parentNode&&(i.children("thead").detach(),i.append(g));j&&e!=j.parentNode&&(i.children("tfoot").detach(),i.append(j));b.aaSorting=[];b.aaSortingFixed=[];wa(b);h(l).removeClass(b.asStripeClasses.join(" "));h("th, td",g).removeClass(d.sSortable+" "+d.sSortableAsc+" "+d.sSortableDesc+" "+d.sSortableNone);f.children().detach();f.append(l);g=a?"remove":"detach";i[g]();k[g]();!a&&c&&(c.insertBefore(e,b.nTableReinsertBefore),i.css("width",b.sDestroyWidth).removeClass(d.sTable),
(o=b.asDestroyStripes.length)&&f.children().each(function(a){h(this).addClass(b.asDestroyStripes[a%o])}));c=h.inArray(b,n.settings);-1!==c&&n.settings.splice(c,1)})});h.each(["column","row","cell"],function(a,b){o(b+"s().every()",function(a){var d=this.selector.opts,e=this;return this.iterator(b,function(f,g,h,i,m){a.call(e[b](g,"cell"===b?h:d,"cell"===b?d:k),g,h,i,m)})})});o("i18n()",function(a,b,c){var d=this.context[0],a=S(a)(d.oLanguage);a===k&&(a=b);c!==k&&h.isPlainObject(a)&&(a=a[c]!==k?a[c]:
a._);return a.replace("%d",c)});n.version="1.10.18";n.settings=[];n.models={};n.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0};n.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:"",src:null,idx:-1};n.models.oColumn={idx:null,aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,
sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null};n.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,
bSort:!0,bSortMulti:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(a){try{return JSON.parse((-1===a.iStateDuration?sessionStorage:localStorage).getItem("DataTables_"+
a.sInstance+"_"+location.pathname))}catch(b){}},fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(a,b){try{(-1===a.iStateDuration?sessionStorage:localStorage).setItem("DataTables_"+a.sInstance+"_"+location.pathname,JSON.stringify(b))}catch(c){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},
oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:h.extend({},
n.models.oSearch),sAjaxDataProp:"data",sAjaxSource:null,sDom:"lfrtip",searchDelay:null,sPaginationType:"simple_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",renderer:null,rowId:"DT_RowId"};Z(n.defaults);n.defaults.column={aDataSort:null,iDataSort:-1,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null};
Z(n.defaults.column);n.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,bScrollbarLeft:!1,bBounding:!1,barWidth:0},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aIds:{},aoColumns:[],aoHeader:[],
aoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,searchDelay:null,sPaginationType:"two_button",
iStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,json:k,oAjaxData:k,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return"ssp"==y(this)?1*this._iRecordsTotal:
this.aiDisplayMaster.length},fnRecordsDisplay:function(){return"ssp"==y(this)?1*this._iRecordsDisplay:this.aiDisplay.length},fnDisplayEnd:function(){var a=this._iDisplayLength,b=this._iDisplayStart,c=b+a,d=this.aiDisplay.length,e=this.oFeatures,f=e.bPaginate;return e.bServerSide?!1===f||-1===a?b+d:Math.min(b+a,this._iRecordsDisplay):!f||c>d||-1===a?d:c},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{},rowIdFn:null,rowId:null};n.ext=x={buttons:{},
classes:{},build:"bs4/dt-1.10.18",errMode:"alert",feature:[],search:[],selector:{cell:[],column:[],row:[]},internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:n.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:n.version};h.extend(x,{afnFiltering:x.search,aTypes:x.type.detect,ofnSearch:x.type.search,oSort:x.type.order,afnSortData:x.order,aoFeatures:x.feature,oApi:x.internal,oStdClasses:x.classes,oPagination:x.pager});
h.extend(n.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",
sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sHeaderTH:"",sFooterTH:"",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",
sJUIHeader:"",sJUIFooter:""});var Kb=n.ext.pager;h.extend(Kb,{simple:function(){return["previous","next"]},full:function(){return["first","previous","next","last"]},numbers:function(a,b){return[ia(a,b)]},simple_numbers:function(a,b){return["previous",ia(a,b),"next"]},full_numbers:function(a,b){return["first","previous",ia(a,b),"next","last"]},first_last_numbers:function(a,b){return["first",ia(a,b),"last"]},_numbers:ia,numbers_length:7});h.extend(!0,n.ext.renderer,{pageButton:{_:function(a,b,c,d,e,
f){var g=a.oClasses,j=a.oLanguage.oPaginate,i=a.oLanguage.oAria.paginate||{},m,l,n=0,o=function(b,d){var k,s,u,r,v=function(b){Ta(a,b.data.action,true)};k=0;for(s=d.length;k<s;k++){r=d[k];if(h.isArray(r)){u=h("<"+(r.DT_el||"div")+"/>").appendTo(b);o(u,r)}else{m=null;l="";switch(r){case "ellipsis":b.append('<span class="ellipsis">&#x2026;</span>');break;case "first":m=j.sFirst;l=r+(e>0?"":" "+g.sPageButtonDisabled);break;case "previous":m=j.sPrevious;l=r+(e>0?"":" "+g.sPageButtonDisabled);break;case "next":m=
j.sNext;l=r+(e<f-1?"":" "+g.sPageButtonDisabled);break;case "last":m=j.sLast;l=r+(e<f-1?"":" "+g.sPageButtonDisabled);break;default:m=r+1;l=e===r?g.sPageButtonActive:""}if(m!==null){u=h("<a>",{"class":g.sPageButton+" "+l,"aria-controls":a.sTableId,"aria-label":i[r],"data-dt-idx":n,tabindex:a.iTabIndex,id:c===0&&typeof r==="string"?a.sTableId+"_"+r:null}).html(m).appendTo(b);Wa(u,{action:r},v);n++}}}},s;try{s=h(b).find(H.activeElement).data("dt-idx")}catch(u){}o(h(b).empty(),d);s!==k&&h(b).find("[data-dt-idx="+
s+"]").focus()}}});h.extend(n.ext.type.detect,[function(a,b){var c=b.oLanguage.sDecimal;return $a(a,c)?"num"+c:null},function(a){if(a&&!(a instanceof Date)&&!Zb.test(a))return null;var b=Date.parse(a);return null!==b&&!isNaN(b)||M(a)?"date":null},function(a,b){var c=b.oLanguage.sDecimal;return $a(a,c,!0)?"num-fmt"+c:null},function(a,b){var c=b.oLanguage.sDecimal;return Pb(a,c)?"html-num"+c:null},function(a,b){var c=b.oLanguage.sDecimal;return Pb(a,c,!0)?"html-num-fmt"+c:null},function(a){return M(a)||
"string"===typeof a&&-1!==a.indexOf("<")?"html":null}]);h.extend(n.ext.type.search,{html:function(a){return M(a)?a:"string"===typeof a?a.replace(Mb," ").replace(Aa,""):""},string:function(a){return M(a)?a:"string"===typeof a?a.replace(Mb," "):a}});var za=function(a,b,c,d){if(0!==a&&(!a||"-"===a))return-Infinity;b&&(a=Ob(a,b));a.replace&&(c&&(a=a.replace(c,"")),d&&(a=a.replace(d,"")));return 1*a};h.extend(x.type.order,{"date-pre":function(a){a=Date.parse(a);return isNaN(a)?-Infinity:a},"html-pre":function(a){return M(a)?
"":a.replace?a.replace(/<.*?>/g,"").toLowerCase():a+""},"string-pre":function(a){return M(a)?"":"string"===typeof a?a.toLowerCase():!a.toString?"":a.toString()},"string-asc":function(a,b){return a<b?-1:a>b?1:0},"string-desc":function(a,b){return a<b?1:a>b?-1:0}});Da("");h.extend(!0,n.ext.renderer,{header:{_:function(a,b,c,d){h(a.nTable).on("order.dt.DT",function(e,f,g,h){if(a===f){e=c.idx;b.removeClass(c.sSortingClass+" "+d.sSortAsc+" "+d.sSortDesc).addClass(h[e]=="asc"?d.sSortAsc:h[e]=="desc"?d.sSortDesc:
c.sSortingClass)}})},jqueryui:function(a,b,c,d){h("<div/>").addClass(d.sSortJUIWrapper).append(b.contents()).append(h("<span/>").addClass(d.sSortIcon+" "+c.sSortingClassJUI)).appendTo(b);h(a.nTable).on("order.dt.DT",function(e,f,g,h){if(a===f){e=c.idx;b.removeClass(d.sSortAsc+" "+d.sSortDesc).addClass(h[e]=="asc"?d.sSortAsc:h[e]=="desc"?d.sSortDesc:c.sSortingClass);b.find("span."+d.sSortIcon).removeClass(d.sSortJUIAsc+" "+d.sSortJUIDesc+" "+d.sSortJUI+" "+d.sSortJUIAscAllowed+" "+d.sSortJUIDescAllowed).addClass(h[e]==
"asc"?d.sSortJUIAsc:h[e]=="desc"?d.sSortJUIDesc:c.sSortingClassJUI)}})}}});var Vb=function(a){return"string"===typeof a?a.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):a};n.render={number:function(a,b,c,d,e){return{display:function(f){if("number"!==typeof f&&"string"!==typeof f)return f;var g=0>f?"-":"",h=parseFloat(f);if(isNaN(h))return Vb(f);h=h.toFixed(c);f=Math.abs(h);h=parseInt(f,10);f=c?b+(f-h).toFixed(c).substring(2):"";return g+(d||"")+h.toString().replace(/\B(?=(\d{3})+(?!\d))/g,
a)+f+(e||"")}}},text:function(){return{display:Vb}}};h.extend(n.ext.internal,{_fnExternApiFunc:Lb,_fnBuildAjax:sa,_fnAjaxUpdate:lb,_fnAjaxParameters:ub,_fnAjaxUpdateDraw:vb,_fnAjaxDataSrc:ta,_fnAddColumn:Ea,_fnColumnOptions:ka,_fnAdjustColumnSizing:$,_fnVisibleToColumnIndex:aa,_fnColumnIndexToVisible:ba,_fnVisbleColumns:V,_fnGetColumns:ma,_fnColumnTypes:Ga,_fnApplyColumnDefs:ib,_fnHungarianMap:Z,_fnCamelToHungarian:J,_fnLanguageCompat:Ca,_fnBrowserDetect:gb,_fnAddData:O,_fnAddTr:na,_fnNodeToDataIndex:function(a,
b){return b._DT_RowIndex!==k?b._DT_RowIndex:null},_fnNodeToColumnIndex:function(a,b,c){return h.inArray(c,a.aoData[b].anCells)},_fnGetCellData:B,_fnSetCellData:jb,_fnSplitObjNotation:Ja,_fnGetObjectDataFn:S,_fnSetObjectDataFn:N,_fnGetDataMaster:Ka,_fnClearTable:oa,_fnDeleteIndex:pa,_fnInvalidate:da,_fnGetRowElements:Ia,_fnCreateTr:Ha,_fnBuildHead:kb,_fnDrawHead:fa,_fnDraw:P,_fnReDraw:T,_fnAddOptionsHtml:nb,_fnDetectHeader:ea,_fnGetUniqueThs:ra,_fnFeatureHtmlFilter:pb,_fnFilterComplete:ga,_fnFilterCustom:yb,
_fnFilterColumn:xb,_fnFilter:wb,_fnFilterCreateSearch:Pa,_fnEscapeRegex:Qa,_fnFilterData:zb,_fnFeatureHtmlInfo:sb,_fnUpdateInfo:Cb,_fnInfoMacros:Db,_fnInitialise:ha,_fnInitComplete:ua,_fnLengthChange:Ra,_fnFeatureHtmlLength:ob,_fnFeatureHtmlPaginate:tb,_fnPageChange:Ta,_fnFeatureHtmlProcessing:qb,_fnProcessingDisplay:C,_fnFeatureHtmlTable:rb,_fnScrollDraw:la,_fnApplyToChildren:I,_fnCalculateColumnWidths:Fa,_fnThrottle:Oa,_fnConvertToWidth:Eb,_fnGetWidestNode:Fb,_fnGetMaxLenString:Gb,_fnStringToCss:v,
_fnSortFlatten:X,_fnSort:mb,_fnSortAria:Ib,_fnSortListener:Va,_fnSortAttachListener:Ma,_fnSortingClasses:wa,_fnSortData:Hb,_fnSaveState:xa,_fnLoadState:Jb,_fnSettingsFromNode:ya,_fnLog:K,_fnMap:F,_fnBindAction:Wa,_fnCallbackReg:z,_fnCallbackFire:r,_fnLengthOverflow:Sa,_fnRenderer:Na,_fnDataSource:y,_fnRowAttributes:La,_fnExtend:Xa,_fnCalculateEnd:function(){}});h.fn.dataTable=n;n.$=h;h.fn.dataTableSettings=n.settings;h.fn.dataTableExt=n.ext;h.fn.DataTable=function(a){return h(this).dataTable(a).api()};
h.each(n,function(a,b){h.fn.DataTable[a]=b});return h.fn.dataTable});


/*!
 DataTables Bootstrap 4 integration
 ©2011-2017 SpryMedia Ltd - datatables.net/license
*/
(function(b){"function"===typeof define&&define.amd?define(["jquery","datatables.net"],function(a){return b(a,window,document)}):"object"===typeof exports?module.exports=function(a,d){a||(a=window);if(!d||!d.fn.dataTable)d=require("datatables.net")(a,d).$;return b(d,a,a.document)}:b(jQuery,window,document)})(function(b,a,d,m){var f=b.fn.dataTable;b.extend(!0,f.defaults,{dom:"<'row'<'col-sm-12 col-md-6'l><'col-sm-12 col-md-6'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'p>>",
renderer:"bootstrap"});b.extend(f.ext.classes,{sWrapper:"dataTables_wrapper dt-bootstrap4",sFilterInput:"form-control form-control-sm",sLengthSelect:"custom-select custom-select-sm form-control form-control-sm",sProcessing:"dataTables_processing card",sPageButton:"paginate_button page-item"});f.ext.renderer.pageButton.bootstrap=function(a,h,r,s,j,n){var o=new f.Api(a),t=a.oClasses,k=a.oLanguage.oPaginate,u=a.oLanguage.oAria.paginate||{},e,g,p=0,q=function(d,f){var l,h,i,c,m=function(a){a.preventDefault();
!b(a.currentTarget).hasClass("disabled")&&o.page()!=a.data.action&&o.page(a.data.action).draw("page")};l=0;for(h=f.length;l<h;l++)if(c=f[l],b.isArray(c))q(d,c);else{g=e="";switch(c){case "ellipsis":e="&#x2026;";g="disabled";break;case "first":e=k.sFirst;g=c+(0<j?"":" disabled");break;case "previous":e=k.sPrevious;g=c+(0<j?"":" disabled");break;case "next":e=k.sNext;g=c+(j<n-1?"":" disabled");break;case "last":e=k.sLast;g=c+(j<n-1?"":" disabled");break;default:e=c+1,g=j===c?"active":""}e&&(i=b("<li>",
{"class":t.sPageButton+" "+g,id:0===r&&"string"===typeof c?a.sTableId+"_"+c:null}).append(b("<a>",{href:"#","aria-controls":a.sTableId,"aria-label":u[c],"data-dt-idx":p,tabindex:a.iTabIndex,"class":"page-link"}).html(e)).appendTo(d),a.oApi._fnBindAction(i,{action:c},m),p++)}},i;try{i=b(h).find(d.activeElement).data("dt-idx")}catch(v){}q(b(h).empty().html('<ul class="pagination"/>').children("ul"),s);i!==m&&b(h).find("[data-dt-idx="+i+"]").focus()};return f});


!function(t){"use strict";var n=!1,e=t.fn.val;function o(t,e){t.addEventListener("mousedown",function(t){t.preventDefault(),e(t)}),t.addEventListener("touchstart",function(t){t.cancelable&&t.preventDefault(),e(t)}),t.addEventListener("keydown",function(t){32!==t.keyCode||n||(n=!0,e(t))})}t.fn.val=function(t){return arguments.length>=1&&this[0]&&this[0]["bootstrap-input-spinner"]&&this[0].setValue&&this[0].setValue(t),e.apply(this,arguments)},t.fn.InputSpinner=t.fn.inputSpinner=function(e){var a={decrementButton:"<strong>-</strong>",incrementButton:"<strong>+</strong>",groupClass:"",buttonsClass:"btn-outline-secondary",buttonsWidth:"2.5rem",textAlign:"center",autoDelay:500,autoInterval:100,boostThreshold:10,boostMultiplier:"auto",locale:null};for(var r in e)a[r]=e[r];var i='<div class="input-group '+a.groupClass+'"><div class="input-group-prepend"><button style="min-width: '+a.buttonsWidth+'" class="btn btn-decrement '+a.buttonsClass+'" type="button">'+a.decrementButton+'</button></div><input type="text" style="text-align: '+a.textAlign+'" class="form-control"/><div class="input-group-append"><button style="min-width: '+a.buttonsWidth+'" class="btn btn-increment '+a.buttonsClass+'" type="button">'+a.incrementButton+"</button></div></div>",u=a.locale||navigator.language||"en-US";this.each(function(){var e=t(this);e[0]["bootstrap-input-spinner"]=!0,e.hide();var r=null,s=null,p="auto"===a.boostMultiplier,l=p?1:a.boostMultiplier,c=t(i),d=c.find(".btn-decrement"),f=c.find(".btn-increment"),v=c.find("input"),m=null,b=null,g=null,h=null,y=null;V();var x,E,M=new Intl.NumberFormat(u,{minimumFractionDigits:y,maximumFractionDigits:y}),w=parseFloat(e[0].value),C=0,F=e.attr("data-prefix")||"",I=e.attr("data-suffix")||"";if(F){var N=t('<span class="input-group-text">'+F+"</span>");c.find(".input-group-prepend").append(N)}if(I){var T=t('<span class="input-group-text">'+I+"</span>");c.find(".input-group-append").prepend(T)}function D(t,n){void 0===n&&(n=!0),isNaN(t)||""===t?(e[0].value="",n&&(v[0].value=""),w=0):(t=parseFloat(t),t=Math.min(Math.max(t,m),b),t=Math.round(t*Math.pow(10,y))/Math.pow(10,y),e[0].value=t,n&&(v[0].value=M.format(t)),w=t)}function L(t,n){n&&setTimeout(function(){var e;"function"==typeof Event?e=new Event(n,{bubbles:!0}):(e=document.createEvent("Event")).initEvent(n,!0,!0),t[0].dispatchEvent(e)})}function B(t){v[0].disabled||(k(t),S(),r=setTimeout(function(){s=setInterval(function(){C>a.boostThreshold?p?(k(t*parseInt(l,10)),l<1e8&&(l*=1.1),h&&(l=Math.min(h,l))):k(t*l):k(t),C++},a.autoInterval)},a.autoDelay))}function k(t){isNaN(w)&&(w=0),D(Math.round(w/t)*t+t),L(e,"input"),L(e,"change")}function S(){C=0,l=l=p?1:a.boostMultiplier,clearTimeout(r),clearTimeout(s)}function V(){v.prop("required",e.prop("required")),v.prop("placeholder",e.prop("placeholder"));var t=e.prop("disabled");v.prop("disabled",t),f.prop("disabled",t),d.prop("disabled",t);var n=e.prop("class"),o="";/form-control-sm/g.test(n)?o="input-group-sm":/form-control-lg/g.test(n)&&(o="input-group-lg");var r=n.replace(/form-control(-(sm|lg))?/g,"");c.prop("class","input-group "+o+" "+a.groupClass),v.prop("class","form-control "+r),m=parseFloat(e.prop("min"))||0,b=isNaN(e.prop("max"))||""===e.prop("max")?1/0:parseFloat(e.prop("max")),g=parseFloat(e.prop("step"))||1,h=parseInt(e.attr("data-step-max"))||0,y=parseInt(e.attr("data-decimals"))||0}e[0].setValue=function(t){D(t)},new MutationObserver(function(){V(),D(w,!0)}).observe(e[0],{attributes:!0}),e.after(c),D(w),v.on("paste input change focusout",function(t){var n=v[0].value,o="focusout"===t.type;"en-US"!==u&&"en-GB"!==u&&"th-TH"!==u&&(n=n.replace(/[. ]/g,"").replace(/,/g,".")),D(n,o),L(e,t.type)}),o(d[0],function(){B(-g)}),o(f[0],function(){B(g)}),x=document.body,E=function(){S()},x.addEventListener("mouseup",function(t){E(t)}),x.addEventListener("touchend",function(t){E(t)}),x.addEventListener("keyup",function(t){32===t.keyCode&&(n=!1,E(t))})})}}(jQuery);


/**
 * Featherlight - ultra slim jQuery lightbox
 * Version 1.7.13 - http://noelboss.github.io/featherlight/
 *
 * Copyright 2018, Noël Raoul Bossart (http://www.noelboss.com)
 * MIT Licensed.
**/
!function(a){"use strict";function b(a,c){if(!(this instanceof b)){var d=new b(a,c);return d.open(),d}this.id=b.id++,this.setup(a,c),this.chainCallbacks(b._callbackChain)}function c(a,b){var c={};for(var d in a)d in b&&(c[d]=a[d],delete a[d]);return c}function d(a,b){var c={},d=new RegExp("^"+b+"([A-Z])(.*)");for(var e in a){var f=e.match(d);if(f){var g=(f[1]+f[2].replace(/([A-Z])/g,"-$1")).toLowerCase();c[g]=a[e]}}return c}if("undefined"==typeof a)return void("console"in window&&window.console.info("Too much lightness, Featherlight needs jQuery."));if(a.fn.jquery.match(/-ajax/))return void("console"in window&&window.console.info("Featherlight needs regular jQuery, not the slim version."));var e=[],f=function(b){return e=a.grep(e,function(a){return a!==b&&a.$instance.closest("body").length>0})},g={allow:1,allowfullscreen:1,frameborder:1,height:1,longdesc:1,marginheight:1,marginwidth:1,mozallowfullscreen:1,name:1,referrerpolicy:1,sandbox:1,scrolling:1,src:1,srcdoc:1,style:1,webkitallowfullscreen:1,width:1},h={keyup:"onKeyUp",resize:"onResize"},i=function(c){a.each(b.opened().reverse(),function(){return c.isDefaultPrevented()||!1!==this[h[c.type]](c)?void 0:(c.preventDefault(),c.stopPropagation(),!1)})},j=function(c){if(c!==b._globalHandlerInstalled){b._globalHandlerInstalled=c;var d=a.map(h,function(a,c){return c+"."+b.prototype.namespace}).join(" ");a(window)[c?"on":"off"](d,i)}};b.prototype={constructor:b,namespace:"featherlight",targetAttr:"data-featherlight",variant:null,resetCss:!1,background:null,openTrigger:"click",closeTrigger:"click",filter:null,root:"body",openSpeed:250,closeSpeed:250,closeOnClick:"background",closeOnEsc:!0,closeIcon:"&#10005;",loading:"",persist:!1,otherClose:null,beforeOpen:a.noop,beforeContent:a.noop,beforeClose:a.noop,afterOpen:a.noop,afterContent:a.noop,afterClose:a.noop,onKeyUp:a.noop,onResize:a.noop,type:null,contentFilters:["jquery","image","html","ajax","iframe","text"],setup:function(b,c){"object"!=typeof b||b instanceof a!=!1||c||(c=b,b=void 0);var d=a.extend(this,c,{target:b}),e=d.resetCss?d.namespace+"-reset":d.namespace,f=a(d.background||['<div class="'+e+"-loading "+e+'">','<div class="'+e+'-content">','<button class="'+e+"-close-icon "+d.namespace+'-close" aria-label="Close">',d.closeIcon,"</button>",'<div class="'+d.namespace+'-inner">'+d.loading+"</div>","</div>","</div>"].join("")),g="."+d.namespace+"-close"+(d.otherClose?","+d.otherClose:"");return d.$instance=f.clone().addClass(d.variant),d.$instance.on(d.closeTrigger+"."+d.namespace,function(b){if(!b.isDefaultPrevented()){var c=a(b.target);("background"===d.closeOnClick&&c.is("."+d.namespace)||"anywhere"===d.closeOnClick||c.closest(g).length)&&(d.close(b),b.preventDefault())}}),this},getContent:function(){if(this.persist!==!1&&this.$content)return this.$content;var b=this,c=this.constructor.contentFilters,d=function(a){return b.$currentTarget&&b.$currentTarget.attr(a)},e=d(b.targetAttr),f=b.target||e||"",g=c[b.type];if(!g&&f in c&&(g=c[f],f=b.target&&e),f=f||d("href")||"",!g)for(var h in c)b[h]&&(g=c[h],f=b[h]);if(!g){var i=f;if(f=null,a.each(b.contentFilters,function(){return g=c[this],g.test&&(f=g.test(i)),!f&&g.regex&&i.match&&i.match(g.regex)&&(f=i),!f}),!f)return"console"in window&&window.console.error("Featherlight: no content filter found "+(i?' for "'+i+'"':" (no target specified)")),!1}return g.process.call(b,f)},setContent:function(b){return this.$instance.removeClass(this.namespace+"-loading"),this.$instance.toggleClass(this.namespace+"-iframe",b.is("iframe")),this.$instance.find("."+this.namespace+"-inner").not(b).slice(1).remove().end().replaceWith(a.contains(this.$instance[0],b[0])?"":b),this.$content=b.addClass(this.namespace+"-inner"),this},open:function(b){var c=this;if(c.$instance.hide().appendTo(c.root),!(b&&b.isDefaultPrevented()||c.beforeOpen(b)===!1)){b&&b.preventDefault();var d=c.getContent();if(d)return e.push(c),j(!0),c.$instance.fadeIn(c.openSpeed),c.beforeContent(b),a.when(d).always(function(a){c.setContent(a),c.afterContent(b)}).then(c.$instance.promise()).done(function(){c.afterOpen(b)})}return c.$instance.detach(),a.Deferred().reject().promise()},close:function(b){var c=this,d=a.Deferred();return c.beforeClose(b)===!1?d.reject():(0===f(c).length&&j(!1),c.$instance.fadeOut(c.closeSpeed,function(){c.$instance.detach(),c.afterClose(b),d.resolve()})),d.promise()},resize:function(a,b){if(a&&b){this.$content.css("width","").css("height","");var c=Math.max(a/(this.$content.parent().width()-1),b/(this.$content.parent().height()-1));c>1&&(c=b/Math.floor(b/c),this.$content.css("width",""+a/c+"px").css("height",""+b/c+"px"))}},chainCallbacks:function(b){for(var c in b)this[c]=a.proxy(b[c],this,a.proxy(this[c],this))}},a.extend(b,{id:0,autoBind:"[data-featherlight]",defaults:b.prototype,contentFilters:{jquery:{regex:/^[#.]\w/,test:function(b){return b instanceof a&&b},process:function(b){return this.persist!==!1?a(b):a(b).clone(!0)}},image:{regex:/\.(png|jpg|jpeg|gif|tiff?|bmp|svg)(\?\S*)?$/i,process:function(b){var c=this,d=a.Deferred(),e=new Image,f=a('<img src="'+b+'" alt="" class="'+c.namespace+'-image" />');return e.onload=function(){f.naturalWidth=e.width,f.naturalHeight=e.height,d.resolve(f)},e.onerror=function(){d.reject(f)},e.src=b,d.promise()}},html:{regex:/^\s*<[\w!][^<]*>/,process:function(b){return a(b)}},ajax:{regex:/./,process:function(b){var c=a.Deferred(),d=a("<div></div>").load(b,function(a,b){"error"!==b&&c.resolve(d.contents()),c.fail()});return c.promise()}},iframe:{process:function(b){var e=new a.Deferred,f=a("<iframe/>"),h=d(this,"iframe"),i=c(h,g);return f.hide().attr("src",b).attr(i).css(h).on("load",function(){e.resolve(f.show())}).appendTo(this.$instance.find("."+this.namespace+"-content")),e.promise()}},text:{process:function(b){return a("<div>",{text:b})}}},functionAttributes:["beforeOpen","afterOpen","beforeContent","afterContent","beforeClose","afterClose"],readElementConfig:function(b,c){var d=this,e=new RegExp("^data-"+c+"-(.*)"),f={};return b&&b.attributes&&a.each(b.attributes,function(){var b=this.name.match(e);if(b){var c=this.value,g=a.camelCase(b[1]);if(a.inArray(g,d.functionAttributes)>=0)c=new Function(c);else try{c=JSON.parse(c)}catch(h){}f[g]=c}}),f},extend:function(b,c){var d=function(){this.constructor=b};return d.prototype=this.prototype,b.prototype=new d,b.__super__=this.prototype,a.extend(b,this,c),b.defaults=b.prototype,b},attach:function(b,c,d){var e=this;"object"!=typeof c||c instanceof a!=!1||d||(d=c,c=void 0),d=a.extend({},d);var f,g=d.namespace||e.defaults.namespace,h=a.extend({},e.defaults,e.readElementConfig(b[0],g),d),i=function(g){var i=a(g.currentTarget),j=a.extend({$source:b,$currentTarget:i},e.readElementConfig(b[0],h.namespace),e.readElementConfig(g.currentTarget,h.namespace),d),k=f||i.data("featherlight-persisted")||new e(c,j);"shared"===k.persist?f=k:k.persist!==!1&&i.data("featherlight-persisted",k),j.$currentTarget.blur&&j.$currentTarget.blur(),k.open(g)};return b.on(h.openTrigger+"."+h.namespace,h.filter,i),{filter:h.filter,handler:i}},current:function(){var a=this.opened();return a[a.length-1]||null},opened:function(){var b=this;return f(),a.grep(e,function(a){return a instanceof b})},close:function(a){var b=this.current();return b?b.close(a):void 0},_onReady:function(){var b=this;if(b.autoBind){var c=a(b.autoBind);c.each(function(){b.attach(a(this))}),a(document).on("click",b.autoBind,function(d){if(!d.isDefaultPrevented()){var e=a(d.currentTarget),f=c.length;if(c=c.add(e),f!==c.length){var g=b.attach(e);(!g.filter||a(d.target).parentsUntil(e,g.filter).length>0)&&g.handler(d)}}})}},_callbackChain:{onKeyUp:function(b,c){return 27===c.keyCode?(this.closeOnEsc&&a.featherlight.close(c),!1):b(c)},beforeOpen:function(b,c){return a(document.documentElement).addClass("with-featherlight"),this._previouslyActive=document.activeElement,this._$previouslyTabbable=a("a, input, select, textarea, iframe, button, iframe, [contentEditable=true]").not("[tabindex]").not(this.$instance.find("button")),this._$previouslyWithTabIndex=a("[tabindex]").not('[tabindex="-1"]'),this._previousWithTabIndices=this._$previouslyWithTabIndex.map(function(b,c){return a(c).attr("tabindex")}),this._$previouslyWithTabIndex.add(this._$previouslyTabbable).attr("tabindex",-1),document.activeElement.blur&&document.activeElement.blur(),b(c)},afterClose:function(c,d){var e=c(d),f=this;return this._$previouslyTabbable.removeAttr("tabindex"),this._$previouslyWithTabIndex.each(function(b,c){a(c).attr("tabindex",f._previousWithTabIndices[b])}),this._previouslyActive.focus(),0===b.opened().length&&a(document.documentElement).removeClass("with-featherlight"),e},onResize:function(a,b){return this.resize(this.$content.naturalWidth,this.$content.naturalHeight),a(b)},afterContent:function(a,b){var c=a(b);return this.$instance.find("[autofocus]:not([disabled])").focus(),this.onResize(b),c}}}),a.featherlight=b,a.fn.featherlight=function(a,c){return b.attach(this,a,c),this},a(document).ready(function(){b._onReady()})}(jQuery);
/**
*  Ajax Autocomplete for jQuery, version 1.4.10
*  (c) 2017 Tomas Kirda
*
*  Ajax Autocomplete for jQuery is freely distributable under the terms of an MIT-style license.
*  For details, see the web site: https://github.com/devbridge/jQuery-Autocomplete
*/
!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports&&"function"==typeof require?require("jquery"):jQuery)}(function(a){"use strict";function b(c,d){var e=this;e.element=c,e.el=a(c),e.suggestions=[],e.badQueries=[],e.selectedIndex=-1,e.currentValue=e.element.value,e.timeoutId=null,e.cachedResponse={},e.onChangeTimeout=null,e.onChange=null,e.isLocal=!1,e.suggestionsContainer=null,e.noSuggestionsContainer=null,e.options=a.extend(!0,{},b.defaults,d),e.classes={selected:"autocomplete-selected",suggestion:"autocomplete-suggestion"},e.hint=null,e.hintValue="",e.selection=null,e.initialize(),e.setOptions(d)}function c(a,b,c){return a.value.toLowerCase().indexOf(c)!==-1}function d(b){return"string"==typeof b?a.parseJSON(b):b}function e(a,b){if(!b)return a.value;var c="("+g.escapeRegExChars(b)+")";return a.value.replace(new RegExp(c,"gi"),"<strong>$1</strong>").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/&lt;(\/?strong)&gt;/g,"<$1>")}function f(a,b){return'<div class="autocomplete-group">'+b+"</div>"}var g=function(){return{escapeRegExChars:function(a){return a.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},createNode:function(a){var b=document.createElement("div");return b.className=a,b.style.position="absolute",b.style.display="none",b}}}(),h={ESC:27,TAB:9,RETURN:13,LEFT:37,UP:38,RIGHT:39,DOWN:40},i=a.noop;b.utils=g,a.Autocomplete=b,b.defaults={ajaxSettings:{},autoSelectFirst:!1,appendTo:"body",serviceUrl:null,lookup:null,onSelect:null,width:"auto",minChars:1,maxHeight:300,deferRequestBy:0,params:{},formatResult:e,formatGroup:f,delimiter:null,zIndex:9999,type:"GET",noCache:!1,onSearchStart:i,onSearchComplete:i,onSearchError:i,preserveInput:!1,containerClass:"autocomplete-suggestions",tabDisabled:!1,dataType:"text",currentRequest:null,triggerSelectOnValidInput:!0,preventBadQueries:!0,lookupFilter:c,paramName:"query",transformResult:d,showNoSuggestionNotice:!1,noSuggestionNotice:"No results",orientation:"bottom",forceFixPosition:!1},b.prototype={initialize:function(){var c,d=this,e="."+d.classes.suggestion,f=d.classes.selected,g=d.options;d.element.setAttribute("autocomplete","off"),d.noSuggestionsContainer=a('<div class="autocomplete-no-suggestion"></div>').html(this.options.noSuggestionNotice).get(0),d.suggestionsContainer=b.utils.createNode(g.containerClass),c=a(d.suggestionsContainer),c.appendTo(g.appendTo||"body"),"auto"!==g.width&&c.css("width",g.width),c.on("mouseover.autocomplete",e,function(){d.activate(a(this).data("index"))}),c.on("mouseout.autocomplete",function(){d.selectedIndex=-1,c.children("."+f).removeClass(f)}),c.on("click.autocomplete",e,function(){d.select(a(this).data("index"))}),c.on("click.autocomplete",function(){clearTimeout(d.blurTimeoutId)}),d.fixPositionCapture=function(){d.visible&&d.fixPosition()},a(window).on("resize.autocomplete",d.fixPositionCapture),d.el.on("keydown.autocomplete",function(a){d.onKeyPress(a)}),d.el.on("keyup.autocomplete",function(a){d.onKeyUp(a)}),d.el.on("blur.autocomplete",function(){d.onBlur()}),d.el.on("focus.autocomplete",function(){d.onFocus()}),d.el.on("change.autocomplete",function(a){d.onKeyUp(a)}),d.el.on("input.autocomplete",function(a){d.onKeyUp(a)})},onFocus:function(){var a=this;a.fixPosition(),a.el.val().length>=a.options.minChars&&a.onValueChange()},onBlur:function(){var b=this,c=b.options,d=b.el.val(),e=b.getQuery(d);b.blurTimeoutId=setTimeout(function(){b.hide(),b.selection&&b.currentValue!==e&&(c.onInvalidateSelection||a.noop).call(b.element)},200)},abortAjax:function(){var a=this;a.currentRequest&&(a.currentRequest.abort(),a.currentRequest=null)},setOptions:function(b){var c=this,d=a.extend({},c.options,b);c.isLocal=Array.isArray(d.lookup),c.isLocal&&(d.lookup=c.verifySuggestionsFormat(d.lookup)),d.orientation=c.validateOrientation(d.orientation,"bottom"),a(c.suggestionsContainer).css({"max-height":d.maxHeight+"px",width:d.width+"px","z-index":d.zIndex}),this.options=d},clearCache:function(){this.cachedResponse={},this.badQueries=[]},clear:function(){this.clearCache(),this.currentValue="",this.suggestions=[]},disable:function(){var a=this;a.disabled=!0,clearTimeout(a.onChangeTimeout),a.abortAjax()},enable:function(){this.disabled=!1},fixPosition:function(){var b=this,c=a(b.suggestionsContainer),d=c.parent().get(0);if(d===document.body||b.options.forceFixPosition){var e=b.options.orientation,f=c.outerHeight(),g=b.el.outerHeight(),h=b.el.offset(),i={top:h.top,left:h.left};if("auto"===e){var j=a(window).height(),k=a(window).scrollTop(),l=-k+h.top-f,m=k+j-(h.top+g+f);e=Math.max(l,m)===l?"top":"bottom"}if("top"===e?i.top+=-f:i.top+=g,d!==document.body){var n,o=c.css("opacity");b.visible||c.css("opacity",0).show(),n=c.offsetParent().offset(),i.top-=n.top,i.top+=d.scrollTop,i.left-=n.left,b.visible||c.css("opacity",o).hide()}"auto"===b.options.width&&(i.width=b.el.outerWidth()+"px"),c.css(i)}},isCursorAtEnd:function(){var a,b=this,c=b.el.val().length,d=b.element.selectionStart;return"number"==typeof d?d===c:!document.selection||(a=document.selection.createRange(),a.moveStart("character",-c),c===a.text.length)},onKeyPress:function(a){var b=this;if(!b.disabled&&!b.visible&&a.which===h.DOWN&&b.currentValue)return void b.suggest();if(!b.disabled&&b.visible){switch(a.which){case h.ESC:b.el.val(b.currentValue),b.hide();break;case h.RIGHT:if(b.hint&&b.options.onHint&&b.isCursorAtEnd()){b.selectHint();break}return;case h.TAB:if(b.hint&&b.options.onHint)return void b.selectHint();if(b.selectedIndex===-1)return void b.hide();if(b.select(b.selectedIndex),b.options.tabDisabled===!1)return;break;case h.RETURN:if(b.selectedIndex===-1)return void b.hide();b.select(b.selectedIndex);break;case h.UP:b.moveUp();break;case h.DOWN:b.moveDown();break;default:return}a.stopImmediatePropagation(),a.preventDefault()}},onKeyUp:function(a){var b=this;if(!b.disabled){switch(a.which){case h.UP:case h.DOWN:return}clearTimeout(b.onChangeTimeout),b.currentValue!==b.el.val()&&(b.findBestHint(),b.options.deferRequestBy>0?b.onChangeTimeout=setTimeout(function(){b.onValueChange()},b.options.deferRequestBy):b.onValueChange())}},onValueChange:function(){if(this.ignoreValueChange)return void(this.ignoreValueChange=!1);var b=this,c=b.options,d=b.el.val(),e=b.getQuery(d);return b.selection&&b.currentValue!==e&&(b.selection=null,(c.onInvalidateSelection||a.noop).call(b.element)),clearTimeout(b.onChangeTimeout),b.currentValue=d,b.selectedIndex=-1,c.triggerSelectOnValidInput&&b.isExactMatch(e)?void b.select(0):void(e.length<c.minChars?b.hide():b.getSuggestions(e))},isExactMatch:function(a){var b=this.suggestions;return 1===b.length&&b[0].value.toLowerCase()===a.toLowerCase()},getQuery:function(b){var c,d=this.options.delimiter;return d?(c=b.split(d),a.trim(c[c.length-1])):b},getSuggestionsLocal:function(b){var c,d=this,e=d.options,f=b.toLowerCase(),g=e.lookupFilter,h=parseInt(e.lookupLimit,10);return c={suggestions:a.grep(e.lookup,function(a){return g(a,b,f)})},h&&c.suggestions.length>h&&(c.suggestions=c.suggestions.slice(0,h)),c},getSuggestions:function(b){var c,d,e,f,g=this,h=g.options,i=h.serviceUrl;if(h.params[h.paramName]=b,h.onSearchStart.call(g.element,h.params)!==!1){if(d=h.ignoreParams?null:h.params,a.isFunction(h.lookup))return void h.lookup(b,function(a){g.suggestions=a.suggestions,g.suggest(),h.onSearchComplete.call(g.element,b,a.suggestions)});g.isLocal?c=g.getSuggestionsLocal(b):(a.isFunction(i)&&(i=i.call(g.element,b)),e=i+"?"+a.param(d||{}),c=g.cachedResponse[e]),c&&Array.isArray(c.suggestions)?(g.suggestions=c.suggestions,g.suggest(),h.onSearchComplete.call(g.element,b,c.suggestions)):g.isBadQuery(b)?h.onSearchComplete.call(g.element,b,[]):(g.abortAjax(),f={url:i,data:d,type:h.type,dataType:h.dataType},a.extend(f,h.ajaxSettings),g.currentRequest=a.ajax(f).done(function(a){var c;g.currentRequest=null,c=h.transformResult(a,b),g.processResponse(c,b,e),h.onSearchComplete.call(g.element,b,c.suggestions)}).fail(function(a,c,d){h.onSearchError.call(g.element,b,a,c,d)}))}},isBadQuery:function(a){if(!this.options.preventBadQueries)return!1;for(var b=this.badQueries,c=b.length;c--;)if(0===a.indexOf(b[c]))return!0;return!1},hide:function(){var b=this,c=a(b.suggestionsContainer);a.isFunction(b.options.onHide)&&b.visible&&b.options.onHide.call(b.element,c),b.visible=!1,b.selectedIndex=-1,clearTimeout(b.onChangeTimeout),a(b.suggestionsContainer).hide(),b.signalHint(null)},suggest:function(){if(!this.suggestions.length)return void(this.options.showNoSuggestionNotice?this.noSuggestions():this.hide());var b,c=this,d=c.options,e=d.groupBy,f=d.formatResult,g=c.getQuery(c.currentValue),h=c.classes.suggestion,i=c.classes.selected,j=a(c.suggestionsContainer),k=a(c.noSuggestionsContainer),l=d.beforeRender,m="",n=function(a,c){var f=a.data[e];return b===f?"":(b=f,d.formatGroup(a,b))};return d.triggerSelectOnValidInput&&c.isExactMatch(g)?void c.select(0):(a.each(c.suggestions,function(a,b){e&&(m+=n(b,g,a)),m+='<div class="'+h+'" data-index="'+a+'">'+f(b,g,a)+"</div>"}),this.adjustContainerWidth(),k.detach(),j.html(m),a.isFunction(l)&&l.call(c.element,j,c.suggestions),c.fixPosition(),j.show(),d.autoSelectFirst&&(c.selectedIndex=0,j.scrollTop(0),j.children("."+h).first().addClass(i)),c.visible=!0,void c.findBestHint())},noSuggestions:function(){var b=this,c=b.options.beforeRender,d=a(b.suggestionsContainer),e=a(b.noSuggestionsContainer);this.adjustContainerWidth(),e.detach(),d.empty(),d.append(e),a.isFunction(c)&&c.call(b.element,d,b.suggestions),b.fixPosition(),d.show(),b.visible=!0},adjustContainerWidth:function(){var b,c=this,d=c.options,e=a(c.suggestionsContainer);"auto"===d.width?(b=c.el.outerWidth(),e.css("width",b>0?b:300)):"flex"===d.width&&e.css("width","")},findBestHint:function(){var b=this,c=b.el.val().toLowerCase(),d=null;c&&(a.each(b.suggestions,function(a,b){var e=0===b.value.toLowerCase().indexOf(c);return e&&(d=b),!e}),b.signalHint(d))},signalHint:function(b){var c="",d=this;b&&(c=d.currentValue+b.value.substr(d.currentValue.length)),d.hintValue!==c&&(d.hintValue=c,d.hint=b,(this.options.onHint||a.noop)(c))},verifySuggestionsFormat:function(b){return b.length&&"string"==typeof b[0]?a.map(b,function(a){return{value:a,data:null}}):b},validateOrientation:function(b,c){return b=a.trim(b||"").toLowerCase(),a.inArray(b,["auto","bottom","top"])===-1&&(b=c),b},processResponse:function(a,b,c){var d=this,e=d.options;a.suggestions=d.verifySuggestionsFormat(a.suggestions),e.noCache||(d.cachedResponse[c]=a,e.preventBadQueries&&!a.suggestions.length&&d.badQueries.push(b)),b===d.getQuery(d.currentValue)&&(d.suggestions=a.suggestions,d.suggest())},activate:function(b){var c,d=this,e=d.classes.selected,f=a(d.suggestionsContainer),g=f.find("."+d.classes.suggestion);return f.find("."+e).removeClass(e),d.selectedIndex=b,d.selectedIndex!==-1&&g.length>d.selectedIndex?(c=g.get(d.selectedIndex),a(c).addClass(e),c):null},selectHint:function(){var b=this,c=a.inArray(b.hint,b.suggestions);b.select(c)},select:function(a){var b=this;b.hide(),b.onSelect(a)},moveUp:function(){var b=this;if(b.selectedIndex!==-1)return 0===b.selectedIndex?(a(b.suggestionsContainer).children("."+b.classes.suggestion).first().removeClass(b.classes.selected),b.selectedIndex=-1,b.ignoreValueChange=!1,b.el.val(b.currentValue),void b.findBestHint()):void b.adjustScroll(b.selectedIndex-1)},moveDown:function(){var a=this;a.selectedIndex!==a.suggestions.length-1&&a.adjustScroll(a.selectedIndex+1)},adjustScroll:function(b){var c=this,d=c.activate(b);if(d){var e,f,g,h=a(d).outerHeight();e=d.offsetTop,f=a(c.suggestionsContainer).scrollTop(),g=f+c.options.maxHeight-h,e<f?a(c.suggestionsContainer).scrollTop(e):e>g&&a(c.suggestionsContainer).scrollTop(e-c.options.maxHeight+h),c.options.preserveInput||(c.ignoreValueChange=!0,c.el.val(c.getValue(c.suggestions[b].value))),c.signalHint(null)}},onSelect:function(b){var c=this,d=c.options.onSelect,e=c.suggestions[b];c.currentValue=c.getValue(e.value),c.currentValue===c.el.val()||c.options.preserveInput||c.el.val(c.currentValue),c.signalHint(null),c.suggestions=[],c.selection=e,a.isFunction(d)&&d.call(c.element,e)},getValue:function(a){var b,c,d=this,e=d.options.delimiter;return e?(b=d.currentValue,c=b.split(e),1===c.length?a:b.substr(0,b.length-c[c.length-1].length)+a):a},dispose:function(){var b=this;b.el.off(".autocomplete").removeData("autocomplete"),a(window).off("resize.autocomplete",b.fixPositionCapture),a(b.suggestionsContainer).remove()}},a.fn.devbridgeAutocomplete=function(c,d){var e="autocomplete";return arguments.length?this.each(function(){var f=a(this),g=f.data(e);"string"==typeof c?g&&"function"==typeof g[c]&&g[c](d):(g&&g.dispose&&g.dispose(),g=new b(this,c),f.data(e,g))}):this.first().data(e)},a.fn.autocomplete||(a.fn.autocomplete=a.fn.devbridgeAutocomplete)});
// Copyright 2015 Olaf Frohn https://github.com/ofrohn, see LICENSE
!function(){function t(t,e){function a(a,r){var i=t([a*=180/Math.PI,r*=180/Math.PI]),o=e([a,r]);return[(1-n)*i[0]+n*o[0],(n-1)*i[1]-n*o[1]]}var n,r=d3.geo.projection(a).scale(1),i=r.center,o=r.translate;return r.alpha=function(a){if(!arguments.length)return n;n=+a;var s=t.center(),l=e.center(),c=t.translate(),h=e.translate();return i([(1-n)*s[0]+n*l[0],(1-n)*s[1]+n*l[1]]),o([(1-n)*c[0]+n*h[0],(1-n)*c[1]+n*h[1]]),r},delete r.translate,delete r.center,r.alpha(0)}function e(t,e){var n=a(t.map(function(t){return t*K}),e);return n.map(function(t){return t/K})}function a(t,e){var a,n,r,i,o,s,l,c,h,u,p=1e-5;return e?(s=t[0],0>s&&(s+=Q),l=t[1],s-=e[0],i=e[1],o=e[2],a=Math.sin(l)*Math.sin(i)-Math.cos(l)*Math.cos(i)*Math.cos(s),Math.abs(a)<p&&(a=-Math.cos(l+i)+Math.cos(l)*Math.cos(i)*(1-Math.cos(s))),n=-Math.cos(l)*Math.sin(s),c=0!==a||0!==n?Math.atan2(n,a):s-Math.PI,h=o+c,h>Math.PI&&(h-=Q),s%Math.PI===0?(u=l+Math.cos(s)*i,u>Z&&(u=Math.PI-u),-Z>u&&(u=-Math.PI-u)):(r=Math.sin(l)*Math.cos(i)+Math.cos(l)*Math.sin(i)*Math.cos(s),Math.abs(r)>.99?(u=Math.abs(Math.acos(Math.sqrt(a*a+n*n))),0>r&&(u*=-1)):u=Math.asin(r)),[h,u]):t}function n(t,e){var a=t.getUTCFullYear(),n=t.getUTCMonth()+1,r=t.getUTCDate(),i=t.getUTCHours(),o=t.getUTCMinutes(),s=t.getUTCSeconds();(1==n||2==n)&&(a-=1,n+=12);var l=Math.floor(a/100),c=2-l+Math.floor(l/4),h=Math.floor(365.25*a),u=Math.floor(30.6001*(n+1)),p=c+h+u-730550.5+r+(i+o/60+s/3600)/24,d=p/36525,f=280.46061837+360.98564736629*p+387933e-9*d*d-d*d*d/3871e4+e;if(f>0)for(;f>360;)f-=360;else for(;0>f;)f+=360;return f}function r(t,a){return e(t,X[a])}function i(t,e){if("equatorial"===e)return t;for(var a=X[e],n=t.features,r=0;r<n.length;r++)n[r].geometry.coordinates=l(n[r],a);return t}function o(t){var e=[];for(var a in t)if(v(t,a)&&-1!==O.planets.which.indexOf(a)){var n=dt().id(a);v(t[a],"parent")&&n.parentBody(t[a].parent),n.elements(t[a].elements[0]),"ter"===a?W.origin=n:e.push(n)}return e.push(dt().id("sol")),e.push(dt().id("lun")),e}function s(t,e){for(var a={},n=(X[e],t.features),r=0;r<n.length;r++)a[n[r].id]={name:n[r].properties.name,center:n[r].properties.display.slice(0,2),scale:n[r].properties.display[2]};return a}function l(t,a){var n=[];switch(t.geometry.type){case"Point":n=e(t.geometry.coordinates,a);break;case"LineString":n.push(p(t.geometry.coordinates,a));break;case"MultiLineString":n=d(t.geometry.coordinates,a);break;case"Polygon":n.push(p(t.geometry.coordinates[0],a));break;case"MultiPolygon":n.push(d(t.geometry.coordinates[0],a))}return n}function c(t,e){var a=[];if(!e)return[];b(e)||(e=[e]);for(var n=0;n<e.length;n++)switch(e[n]){case"center":a=a.concat("lat"===t?u(t,O.center[0],"N"):u(t,O.center[1],"S"));break;case"outline":"lon"===t?(a=a.concat(u(t,O.center[1]-89.99,"S")),a=a.concat(u(t,O.center[1]+89.99),"N")):(a=a.concat(u(t,O.center[0]-179.99,"E")),a=a.concat(u(t,O.center[0]+179.99,"W")));break;default:if(y(e[n])){a=a.concat("lat"===t?u(t,e[n],"N"):u(t,e[n],"S"));break}}return h(a)}function h(t){for(var e=[],a=0;a<t.length;a++){var n={type:"Feature",id:a,properties:{},geometry:{type:"Point"}};n.properties.value=t[a].value,n.properties.orientation=t[a].orientation,n.geometry.coordinates=t[a].coordinates,e.push(n)}return e}function u(t,e,a){var n,r,i,o,s,l=t,c=[],h=e;"equatorial"===O.transform&&"lon"===l&&(l="ra"),"ra"===l?(n=0,r=23,i=1):"lon"===l?(n=0,r=350,i=10):(n=-80,r=80,i=10);for(var u=n;r>=u;u+=i){var p=a;"lat"===l?(s=[h,u],o=u.toString()+"°",p+=0>u?"S":"N"):"ra"===l?(s=[15*u,h],o=u.toString()+"ʰ"):(s=[u,h],o=u.toString()+"°"),c.push({coordinates:s,value:o,orientation:p})}return c}function p(t,a){for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],a));return n}function d(t,e){for(var a=[],n=0;n<t.length;n++)a.push(p(t[n],e));return a}function f(t){return document.getElementById(t)}function m(t){return t+"px"}function M(t,e){return Math.round(Math.pow(10,e)*t)/Math.pow(10,e)}function g(t){return 10>t?"0"+t:t}function v(t,e){return null!==t&&hasOwnProperty.call(t,e)}function y(t){return!isNaN(parseFloat(t))&&isFinite(t)}function b(t){return"[object Array]"===Object.prototype.toString.call(t)}function w(t){var e=0,a=0;if(t.offsetParent)do e+=t.offsetLeft,a+=t.offsetTop;while(null!==(t=t.offsetParent));return[e,a]}function x(t,e){for(;t.parentNode;){if(t.id===e)return!0;t=t.parentNode}return!1}function k(t,e,a){var n=e.valueOf()-t.valueOf(),r=a||"d";switch(r){case"y":case"yr":n/=31556926080;break;case"m":case"mo":n/=26298e5;break;case"d":case"dy":n/=864e5;break;case"h":case"hr":n/=36e5;break;case"n":case"mn":n/=6e4;break;case"s":case"sec":n/=1e3;break;case"ms":}return Math.floor(n)}function z(t){if(t){var e=t.split(".");if(!(e.length<1)&&(e=e[0].split("-"),e[0]=e[0].replace(/\D/g,""),e[0]))return e[1]=e[1]?e[1].replace(/\D/g,""):"1",e[2]=e[2]?e[2].replace(/\D/g,""):"1",new Date(Date.UTC(e[0],e[1]-1,e[2]))}}function P(t,e){return t=(t*K+Q)%Q,e=(e*K+Q)%Q,Math.abs(t-e)>Math.PI&&(t>e?t-=Q:e>t&&(e-=Q)),d3.interpolateNumber(t/K,e/K)}function I(t){function e(){var t=this,e=t.value;S(t)!==!1&&(c.width=e,W.resize({width:e}))}function a(){var t=this,e=t.value,a=D(e,c.transform);null!==a&&(c.center[0]=a),c.transform=e,W.reload({transform:e})}function n(){var t=this;t&&(c.projection=t.value,W.reproject(c))}function r(){S(this)!==!1&&i()!==!1&&W.rotate(c)}function i(){var t=f("centerx"),e=f("centery"),a=f("centerz");if(t&&e){if("equatorial"!==c.transform)c.center[0]=parseFloat(t.value);else{var n=parseFloat(t.value);c.center[0]=n>12?15*n-360:15*n}c.center[1]=parseFloat(e.value);var r=parseFloat(a.value);return c.center[2]=isNaN(r)?0:r,""!==t.value&&""!==e.value}}function o(){var t=this.value,e=[];if(""===t)return W.constellation=null,void W.redraw();var a=W.constellations[t];c.center=a.center,E(c.center,c.transform);var n=W.zoomBy();1!==n&&e.push({param:"zoom",value:1/n,duration:0}),e.push({param:"center",value:a.center,duration:0});var r=a.scale>10?10:a.scale;e.push({param:"zoom",value:r,duration:0}),W.constellation=t,W.animate(e,!1)}function s(){var t,e=this;switch(e.type){case"checkbox":t=e.checked,q(e);break;case"number":if(S(e)===!1)return;t=parseFloat(e.value);break;case"color":if(A(e)===!1)return;t=e.value;break;case"text":if(-1===e.id.search(/fill$/))return;if(A(e)===!1)return;t=e.value}null!==t&&(l(e.id,t),i(),W.apply(c))}function l(t,e){var a=t.split("-");switch(a.length){case 1:c[a[0]]=e;break;case 2:c[a[0]][a[1]]=e;break;case 3:c[a[0]][a[1]][a[2]]=e;break;default:return}}var c=et.set(t),h=W.projections(),u=W.eulerAngles(),p=d3.select("#celestial-form").append("div").attr("class","ctrl"),d=p.append("form").attr("id","params").attr("name","params").attr("method","get").attr("action","#"),m=d.append("div").attr("class","col").attr("id","general");m.append("label").attr("title","Map width in pixel, 0 indicates full width").attr("for","width").html("Width "),m.append("input").attr("type","number").attr("maxlength","4").attr("max","20000").attr("min","0").attr("title","Map width").attr("id","width").attr("value",c.width).on("change",e),m.append("span").html("px"),m.append("label").attr("title","Map projection, (hemi) indicates hemispherical projection").attr("for","projection").html("Projection");var M=m.append("select").attr("id","projection").on("change",n),g=0,v=Object.keys(h).map(function(t,e){var a=h[t].clip&&h[t].clip===!0?h[t].n+" (hemi)":h[t].n;return t===c.projection&&(g=e),{o:t,n:a}});M.selectAll("option").data(v).enter().append("option").attr("value",function(t){return t.o}).text(function(t){return t.n}),M.property("selectedIndex",g),g=0,m.append("label").attr("title","Coordinate space in which the map is displayed").attr("for","transform").html("Coordinates"),M=m.append("select").attr("id","transform").on("change",a),v=Object.keys(u).map(function(t,e){return t===c.transform&&(g=e),{o:t,n:t.replace(/^([a-z])/,function(t,e){return e.toUpperCase()})}}),M.selectAll("option").data(v).enter().append("option").attr("value",function(t){return t.o}).text(function(t){return t.n}),M.property("selectedIndex",g),m.append("br"),m.append("label").attr("title","Center coordinates long/lat in selected coordinate space").attr("for","centerx").html("Center"),m.append("input").attr("type","number").attr("id","centerx").attr("title","Center right ascension/longitude").attr("max","24").attr("min","0").attr("step","0.1").on("change",r),m.append("span").attr("id","cxunit").html("h"),m.append("input").attr("type","number").attr("id","centery").attr("title","Center declination/latitude").attr("max","90").attr("min","-90").attr("step","0.1").on("change",r),m.append("span").html("°"),m.append("label").attr("title","Orientation").attr("for","centerz").html("Orientation"),m.append("input").attr("type","number").attr("id","centerz").attr("title","Center orientation").attr("max","180").attr("min","-180").attr("step","0.1").on("change",r),m.append("span").html("°"),m.append("label").attr("for","orientationfixed").html("Fixed"),m.append("input").attr("type","checkbox").attr("id","orientationfixed").property("checked",c.orientationfixed).on("change",s),m.append("label").attr("title","Center and zoom in on this constellation").attr("for","constellation").html("Show"),m.append("select").attr("id","constellation").on("change",o),E(c.center,c.transform),m=d.append("div").attr("class","col").attr("id","stars"),m.append("label").attr("class","header").attr("for","stars-show").html("Stars"),m.append("input").attr("type","checkbox").attr("id","stars-show").property("checked",c.stars.show).on("change",s),m.append("label").attr("for","stars-limit").html("down to magnitude"),m.append("input").attr("type","number").attr("id","stars-limit").attr("title","Star display limit (magnitude)").attr("value",c.stars.limit).attr("max","6").attr("min","-1").attr("step","0.1").on("change",s),m.append("label").attr("for","stars-colors").html("with spectral colors"),m.append("input").attr("type","checkbox").attr("id","stars-colors").property("checked",c.stars.colors).on("change",s),m.append("label").attr("for","stars-color").html("or default color "),m.append("input").attr("type","color").attr("autocomplete","off").attr("id","stars-style-fill").attr("title","Star color").property("value",c.stars.style.fill).on("change",s),m.append("br"),m.append("label").attr("for","stars-names").html("Show designations"),m.append("input").attr("type","checkbox").attr("id","stars-names").property("checked",c.stars.names).on("change",s),m.append("label").attr("for","stars-namelimit").html("down to mag"),m.append("input").attr("type","number").attr("id","stars-namelimit").attr("title","Star designaton display limit (magnitude)").attr("value",c.stars.namelimit).attr("max","6").attr("min","-1").attr("step","0.1").on("change",s),m.append("label").attr("for","stars-desig").attr("title","include HD/HIP designations").html("all"),m.append("input").attr("type","checkbox").attr("id","stars-desig").property("checked",c.stars.desig).on("change",s),m.append("label").attr("for","stars-proper").html("proper names"),m.append("input").attr("type","checkbox").attr("id","stars-proper").property("checked",c.stars.proper).on("change",s),m.append("label").attr("for","stars-propernamelimit").html("down to mag"),m.append("input").attr("type","number").attr("id","stars-propernamelimit").attr("title","Star name display limit (magnitude)").attr("value",c.stars.propernamelimit).attr("max","6").attr("min","-1").attr("step","0.1").on("change",s),m.append("br"),m.append("label").attr("for","stars-size").html("Stellar disk size: base"),m.append("input").attr("type","number").attr("id","stars-size").attr("title","Size of the displayed star disk; base").attr("value",c.stars.size).attr("max","100").attr("min","0").attr("step","0.1").on("change",s),m.append("label").attr("for","stars-exponent").html(" * e ^ (exponent"),m.append("input").attr("type","number").attr("id","stars-exponent").attr("title","Size of the displayed star disk; exponent").attr("value",c.stars.exponent).attr("max","3").attr("min","-1").attr("step","0.01").on("change",s),m.append("span").text(" * (magnitude + 2))  [* adaptation]"),q(f("stars-show")),m=d.append("div").attr("class","col").attr("id","dsos"),m.append("label").attr("class","header").attr("title","Deep Space Objects").attr("for","dsos-show").html("DSOs"),m.append("input").attr("type","checkbox").attr("id","dsos-show").property("checked",c.dsos.show).on("change",s),m.append("label").attr("for","dsos-limit").html("down to mag"),m.append("input").attr("type","number").attr("id","dsos-limit").attr("title","DSO display limit (magnitude)").attr("value",c.dsos.limit).attr("max","6").attr("min","0").attr("step","0.1").on("change",s),m.append("label").attr("for","dsos-names").html("with names"),m.append("input").attr("type","checkbox").attr("id","dsos-names").property("checked",c.dsos.names).on("change",s),m.append("label").attr("for","dsos-desig").html("or designations"),m.append("input").attr("type","checkbox").attr("id","dsos-desig").property("checked",c.dsos.desig).on("change",s),m.append("label").attr("for","dsos-namelimit").html("down to mag"),m.append("input").attr("type","number").attr("id","dsos-namelimit").attr("title","DSO name display limit (magnitude)").attr("value",c.dsos.namelimit).attr("max","6").attr("min","0").attr("step","0.1").on("change",s),m.append("br"),m.append("label").attr("for","dsos-size").html("DSO symbol size: (base"),m.append("input").attr("type","number").attr("id","dsos-size").attr("title","Size of the displayed symbol: base").attr("value",c.dsos.size).attr("max","100").attr("min","0").attr("step","0.1").on("change",s),m.append("label").attr("for","dsos-exponent").html(" * 2 [* adaptation] - magnitude) ^ exponent"),m.append("input").attr("type","number").attr("id","dsos-exponent").attr("title","Size of the displayed symbol; exponent").attr("value",c.dsos.exponent).attr("max","3").attr("min","-1").attr("step","0.01").on("change",s),q(f("dsos-show")),m=d.append("div").attr("class","col").attr("id","constellations"),m.append("label").attr("class","header").html("Constellations"),m.append("label").attr("for","constellations-names").html("Show names"),m.append("input").attr("type","checkbox").attr("id","constellations-names").property("checked",c.constellations.names).on("change",s),m.append("label").attr("for","constellations-desig").html("abbreviated"),m.append("input").attr("type","checkbox").attr("id","constellations-desig").property("checked",c.constellations.desig).on("change",s),m.append("label").attr("for","constellations-lines").html("with lines"),m.append("input").attr("type","checkbox").attr("id","constellations-lines").property("checked",c.constellations.lines).on("change",s),m.append("label").attr("for","constellations-bounds").html("with boundaries"),m.append("input").attr("type","checkbox").attr("id","constellations-bounds").property("checked",c.constellations.bounds).on("change",s),q(f("constellations-names")),m=d.append("div").attr("class","col").attr("id","lines"),m.append("label").attr("class","header").html("Lines"),m.append("label").attr("title","Laitudet/longitude grid lines").attr("for","lines-graticule").html("Graticule"),m.append("input").attr("type","checkbox").attr("id","lines-graticule-show").property("checked",c.lines.graticule.show).on("change",s),m.append("label").attr("for","lines-equatorial").html("Equator"),m.append("input").attr("type","checkbox").attr("id","lines-equatorial-show").property("checked",c.lines.equatorial.show).on("change",s),m.append("label").attr("for","lines-ecliptic").html("Ecliptic"),m.append("input").attr("type","checkbox").attr("id","lines-ecliptic-show").property("checked",c.lines.ecliptic.show).on("change",s),m.append("label").attr("for","lines-galactic").html("Galactic plane"),m.append("input").attr("type","checkbox").attr("id","lines-galactic-show").property("checked",c.lines.galactic.show).on("change",s),m.append("label").attr("for","lines-supergalactic").html("Supergalactic plane"),m.append("input").attr("type","checkbox").attr("id","lines-supergalactic-show").property("checked",c.lines.supergalactic.show).on("change",s),m=d.append("div").attr("class","col").attr("id","other"),m.append("label").attr("class","header").html("Other"),m.append("label").attr("for","mw-show").html("Milky Way"),m.append("input").attr("type","checkbox").attr("id","mw-show").property("checked",c.mw.show).on("change",s),m.append("label").attr("for","mw-style-fill").html(" color"),m.append("input").attr("type","color").attr("id","mw-style-fill").attr("title","Milky Way color").attr("value",c.mw.style.fill).on("change",s),m.append("label").attr("for","mw-style-opacity").html(" opacity"),m.append("input").attr("type","number").attr("id","mw-style-opacity").attr("title","Transparency of each Milky Way layer").attr("value",c.mw.style.opacity).attr("max","1").attr("min","0").attr("step","0.01").on("change",s),m.append("br"),m.append("label").attr("for","background").html("Background color"),m.append("input").attr("type","color").attr("id","background-fill").attr("title","Background color").attr("value",c.background.fill).on("change",s),m.append("label").attr("title","Star/DSO sizes are increased with higher zoom-levels").attr("for","adaptable").html("Adaptable object sizes"),m.append("input").attr("type","checkbox").attr("id","adaptable").property("checked",c.adaptable).on("change",s),C(),D(c.transform)}function q(t){var e,a=t.id;switch(a){case"stars-show":e=!f(a).checked;for(var n=0;n<ot[a].length;n++)T(ot[a][n],e);case"stars-names":for(e=!f("stars-names").checked||!f("stars-show").checked,n=0;n<ot["stars-names"].length;n++)T(ot["stars-names"][n],e);case"stars-proper":for(e=!f("stars-names").checked||!f("stars-show").checked||!f("stars-proper").checked,n=0;n<ot["stars-proper"].length;n++)T(ot["stars-proper"][n],e);break;case"dsos-show":for(e=!f(a).checked,n=0;n<ot[a].length;n++)T(ot[a][n],e);case"dsos-names":for(e=!f("dsos-names").checked||!f("dsos-show").checked,n=0;n<ot["dsos-names"].length;n++)T(ot["dsos-names"][n],e);break;case"constellations-show":for(e=!f(a).checked,n=0;n<ot[a].length;n++)T(ot[a][n],e);break;case"mw-show":for(e=!f(a).checked,n=0;n<ot[a].length;n++)T(ot[a][n],e)}}function T(t,e){var a=f(t);a.disabled=e,a.previousSibling.style.color=e?"#999":"#000"}function j(t,e){var a=w(t);d3.select("#error").html(e).style({top:m(a[1]+t.offsetHeight+1),left:m(a[0]),opacity:1}),t.focus()}function S(t){var e,a="hr"===t.id||"min"===t.id||"sec"===t.id?1:0;if(t.validity){if(e=t.validity,e.typeMismatch||e.badInput)return j(t,t.title+": check field value"),!1;if(e.rangeOverflow||e.rangeUnderflow)return j(t,t.title+" must be between "+(parseInt(t.min)+a)+" and "+(parseInt(t.max)-a)),!1}else{if(e=t.value,!y(e))return j(t,t.title+": check field value"),!1;if(e=parseFloat(e),e<t.min||e>t.max)return j(t,t.title+" must be between "+(t.min+a)+" and "+(+t.max-a)),!1}return d3.select("#error").style({top:"-9999px",left:"-9999px",opacity:0}),!0}function A(t){var e;if(t.validity){if(e=t.validity,e.typeMismatch||e.badInput)return j(t,t.title+": check field value"),!1;if(-1===t.value.search(/^#[0-9A-F]{6}$/i))return j(t,t.title+": not a color value"),!1}else{if(e=t.value,""===e)return!0;if(-1===e.search(/^#[0-9A-F]{6}$/i))return j(t,t.title+": not a color value"),!1}return d3.select("#error").style({top:"-9999px",left:"-9999px",opacity:0}),!0}function D(t,e){var a=f("centerx");return a?(e&&("equatorial"===t&&"equatorial"!==e?(a.value=(a.value/15).toFixed(1),a.value<0&&(a.value+=24)):"equatorial"!==t&&"equatorial"===e&&(a.value=(15*a.value).toFixed(1),a.value>180&&(a.value-=360))),"equatorial"===t?(a.min="0",a.max="24",f("cxunit").innerHTML="h"):(a.min="-180",a.max="180",f("cxunit").innerHTML="°"),a.value):null}function E(t,e){var a=f("centerx"),n=f("centery"),r=f("centerz");a&&n&&(null===t&&(t=[0,0,0]),t.length<=2&&(t[2]=0),a.value="equatorial"!==e?t[0].toFixed(1):t[0]<0?(t[0]/15+24).toFixed(1):(t[0]/15).toFixed(1),n.value=t[1].toFixed(1),r.value=null!==t[2]?t[2].toFixed(1):0)}function C(){var t,e,a,n=/\d+(\.\d+)?/g,r={s:6,d:6},i=W.settings();return a=i.dsos.data,t=a.match(n),null!==t&&(r.d=parseFloat(t[t.length-1])),6!=r.d&&(f("dsos-limit").max=r.d,f("dsos-namelimit").max=r.d),e=i.stars.data,t=e.match(n),null!==t&&(r.s=parseFloat(t[t.length-1])),6!=r.s&&(f("stars-limit").max=r.s,f("stars-namelimit").max=r.s),r}function F(t){function e(){h.setTime(Date.now()),f("datetime").value=r(h,u),i()}function a(){navigator.geolocation.getCurrentPosition(function(t){c=[M(t.coords.latitude,4),M(t.coords.longitude,4)],f("lat").value=c[0],f("lon").value=c[1],i()})}function n(){p.show(h)}function r(t,e){var a;if(e&&"0"!==e){var n=Math.floor(Math.abs(e)/60),r=Math.abs(e)-60*n,i=0>e?" +":" −";a=i+g(n)+g(r)}else a=" ±0000";return s(t)+a}function i(){var e=f("lon").value,a=f("lat").value;h=s.parse(f("datetime").value.slice(0,-6));var n=h.getTimezoneOffset(),r=new Date(h.valueOf()+6e4*(u-n));t.horizon.show=!!f("horizon-show").checked,t.planets.show=!!f("planets-show").checked,""!==e&&""!==a&&(c=[parseFloat(a),parseFloat(e)],l=W.getPoint(tt.inverse(r,[90,0],c),t.transform),l[2]=0,"zenith"===t.follow?W.rotate({center:l,horizon:t.horizon}):W.apply({horizon:t.horizon}))}var o=d3.select("#celestial-form").append("div").attr("id","loc"),s=d3.time.format("%Y-%m-%d %H:%M:%S"),l=[0,0],c=[0,0],h=new Date,u=h.getTimezoneOffset(),p=new mt(t,function(t,e){f("datetime").value=r(t,e),u=e,i()});v(t,"geopos")&&null!==t.geopos&&2===t.geopos.length&&(c=t.geopos);var d=o.append("div").attr("class","col").attr("id","location");d.append("label").attr("title","Location coordinates long/lat").attr("for","lat").html("Location"),d.append("input").attr("type","number").attr("id","lat").attr("title","Latitude").attr("placeholder","Latitude").attr("max","90").attr("min","-90").attr("step","0.0001").attr("value",c[0]).on("change",function(){S(this)===!0&&i()}),d.append("span").html("°"),d.append("input").attr("type","number").attr("id","lon").attr("title","Longitude").attr("placeholder","Longitude").attr("max","180").attr("min","-180").attr("step","0.0001").attr("value",c[1]).on("change",function(){S(this)===!0&&i()}),d.append("span").html("°"),"geolocation"in navigator&&d.append("input").attr("type","button").attr("value","Here").attr("id","here").on("click",a),d.append("label").attr("title","Local date/time").attr("for","datetime").html(" Date/time"),d.append("input").attr("type","button").attr("id","day-left").attr("title","One day back").on("click",function(){h.setDate(h.getDate()-1),f("datetime").value=r(h,u),i()}),d.append("input").attr("type","text").attr("id","datetime").attr("title","Date and time").attr("value",r(h,u)).on("click",n,!0).on("input",function(){this.value=r(h,u),p.isVisible()||n()}),d.append("div").attr("id","datepick").on("click",n),d.append("input").attr("type","button").attr("id","day-right").attr("title","One day forward").on("click",function(){h.setDate(h.getDate()+1),f("datetime").value=r(h,u),i()}),d.append("input").attr("type","button").attr("value","Now").attr("id","now").on("click",e),d.append("br"),d.append("label").attr("title","Show horizon marker").attr("for","horizon-show").html(" Horizon marker"),d.append("input").attr("type","checkbox").attr("id","horizon-show").property("checked",t.horizon.show).on("change",i),d.append("label").attr("title","Show solar system objects").attr("for","planets-show").html(" Planets, Sun & Moon"),d.append("input").attr("type","checkbox").attr("id","planets-show").property("checked",t.planets.show).on("change",i),d3.select(document).on("mousedown",function(){!x(d3.event.target,"celestial-date")&&p.isVisible()&&p.hide()}),W.getPosition=function(){},W.date=function(t){return t?void(p.isVisible()||(h.setTime(t.valueOf()),f("datetime").value=r(t,u),W.redraw())):h},W.position=function(){return c},W.zenith=function(){return l},W.nadir=function(){var t=-l[1],e=l[0]+180;return e>180&&(e-=360),[e,t-.001]},setTimeout(i,1e3)}var O,L,N,H,U,W={version:"0.6.10",container:null,data:[]},_=.035,G=1.4,V=2e3,B=2500,Y=1500,R=10;W.display=function(a){function n(){for(var t in O.lines)v(O.lines,t)&&("graticule"===t?(Mt.append("path").datum(Nt).attr("class","graticule"),v(O.lines.graticule,"lon")&&O.lines.graticule.lon.pos.length>0&&Mt.selectAll(".gridvalues_lon").data(c("lon",O.lines.graticule.lon.pos)).enter().append("path").attr("class","graticule_lon"),v(O.lines.graticule,"lat")&&O.lines.graticule.lat.pos.length>0&&Mt.selectAll(".gridvalues_lat").data(c("lat",O.lines.graticule.lat.pos)).enter().append("path").attr("class","graticule_lat")):Mt.append("path").datum(d3.geo.circle().angle([90]).origin(e(J[t],X[Pt]))).attr("class",t));d3.json(Ft+"mw.json",function(t,e){if(t)return window.alert("Your Browser doesn't support local file loading or the file doesn't exist. See readme.md"),console.warn(t);var a=i(e,Pt);Mt.selectAll(".mway").data(a.features).enter().append("path").attr("class","mw"),d()}),d3.json(Ft+"constellations.json",function(t,e){if(t)return console.warn(t);var n=i(e,Pt);Mt.selectAll(".constnames").data(n.features).enter().append("text").attr("class","constname");var r=s(e,Pt);if(f("constellation")){var o=d3.select("#constellation"),l=0,c=Object.keys(r).map(function(t,e){return t===a.constellation&&(l=e),{o:t,n:r[t].name}});c=[{o:"",n:"(Select constellation)"}].concat(c),o.selectAll("option").data(c).enter().append("option").attr("value",function(t){return t.o}).text(function(t){return t.n}),o.property("selectedIndex",l)}W.constellations=r,d()}),d3.json(Ft+"constellations.bounds.json",function(t,e){if(t)return console.warn(t);var a=i(e,Pt);Mt.selectAll(".bounds").data(a.features).enter().append("path").attr("class","boundaryline"),d()}),d3.json(Ft+"constellations.lines.json",function(t,e){if(t)return console.warn(t);var a=i(e,Pt);Mt.selectAll(".lines").data(a.features).enter().append("path").attr("class","constline"),d()}),d3.json(Ft+O.stars.data,function(t,e){if(t)return console.warn(t);var a=i(e,Pt);Mt.selectAll(".stars").data(a.features).enter().append("path").attr("class","star"),d()}),d3.json(Ft+O.dsos.data,function(t,e){if(t)return console.warn(t);var a=i(e,Pt);Mt.selectAll(".dsos").data(a.features).enter().append("path").attr("class","dso"),d()}),d3.json(Ft+"planets.json",function(t,e){if(t)return console.warn(t);var a=o(e,Pt);Mt.selectAll(".planets").data(a).enter().append("path").attr("class","planet"),d()}),W.data.length>0&&W.data.forEach(function(t){v(t,"file")?d3.json(t.file,t.callback):setTimeout(t.callback,0)},this)}function r(t){if(t&&1!==t){var e=L.scale(),a=e*t,n=N.scaleExtent(),r=Y*Math.sqrt(Math.abs(1-t));a<n[0]&&(a=n[0]),a>n[1]&&(a=n[1]);var i=d3.interpolateNumber(e,a);return d3.select({}).transition().duration(r).tween("scale",function(){return function(t){var e=i(t);L.scale(e),d()}}).transition().duration(0).tween("scale",function(){N.scale(a),d()}),r}}function l(t){O=O.set(t),d()}function h(t){var e,a,n,r=O.center,i=L.rotate(),o=L.scale(),s=V,l=!1,c=O.orientationfixed;M(i[1],1)===-M(t.center[1],1)&&(l=!0),O=O.set(t);var h=M(d3.geo.distance(r,O.center),2),u=d3.geo.distance([r[2],0],[O.center[2],0]);return _>h&&_>u?(Ct=ut(O.center),L.rotate(Ct),d()):(a=o>Tt*G?d3.interpolateNumber(o,Tt):function(){return o},n=0===u?function(){return i[2]}:P(r[2],O.center[2]),h>3.14&&(O.center[0]-=.01),O.orientationfixed=!1,e=0===h?function(){return O.center}:d3.geo.interpolate(r,O.center),s=0!==h?s*h:s*u,d3.select({}).transition().duration(s).tween("center",function(){return function(t){var r=ut(e(t));r[2]=n(t);var o=a(.5>t?t:1-t);l&&(r[1]=i[1]),L.scale(o),L.rotate(r),d()}}).transition().duration(0).tween("center",function(){O.orientationfixed=c,Ct=ut(O.center),L.rotate(Ct),d()})),s}function u(t){kt=ct(),(O.width!==kt||t)&&(qt=kt/It,Tt=zt.scale*kt/1024,Ot.attr("width",kt).attr("height",qt),N.scaleExtent([Tt,Tt*R]).scale(Tt),L.translate([kt/2,qt/2]).scale(Tt),bt&&(bt.style.height=m(qt)),d())}function p(e){var a=ht(e.projection);if(a){var n=L.rotate(),i=L.center(),o=L.scale(),s=N.scaleExtent(),l=W.projection(O.projection).center(i).translate([kt/2,qt/2]).scale([s[0]]),c=B,h=0,u=d3.interpolateNumber(It,a.ratio);zt.clip!=a.clip&&(c=0);var f=W.projection(e.projection).center(i).translate([kt/2,kt/a.ratio/2]).scale([a.scale*kt/1024]),M=O.adaptable;return o>s[0]?(h=r(.1),setTimeout(p,h,e),h+c):(O.location&&T("horizon-show",a.clip),L=t(l,f),O.adaptable=!1,d3.select({}).transition().duration(c).tween("projection",function(){return function(t){L.alpha(t).rotate(n),H.projection(L),q(a.clip),It=u(t),qt=kt/It,Ot.attr("width",kt).attr("height",qt),bt&&(bt.style.height=m(qt)),d()}}).transition().duration(0).tween("projection",function(){zt=a,It=zt.ratio,qt=kt/zt.ratio,Tt=zt.scale*kt/1024,Ot.attr("width",kt).attr("height",qt),bt&&(bt.style.height=m(qt)),O.projection=e.projection,L=W.projection(e.projection).rotate(n).translate([kt/2,qt/2]).scale(Tt),H.projection(L),q(zt.clip),N.projection(L).scaleExtent([Tt,Tt*R]).scale(Tt),O.adaptable=M,d()}),c)}}function d(){var t=L.rotate();O.adaptable&&(Et=Math.sqrt(L.scale()/Tt)),Et||(Et=1),jt=O.stars.size,At=O.stars.exponent,St=O.dsos.size||jt,Dt=O.dsos.exponent,O.orientationfixed&&(t[2]=O.center[2],L.rotate(t)),O.center=[-t[0],-t[1],t[2]],E(O.center,O.transform),lt(),g(),O.mw.show&&Mt.selectAll(".mw").each(function(t){w(O.mw.style),H(t),Lt.fill()});for(var e in O.lines)v(O.lines,e)&&O.lines[e].show===!0&&(w(O.lines[e]),Mt.selectAll("."+e).attr("d",H),Lt.stroke());if(v(O.lines.graticule,"lon")&&(x(O.lines.graticule.lon),Mt.selectAll(".graticule_lon").each(function(t){if(y(t.geometry.coordinates)){var e=L(t.geometry.coordinates);st(e,t.properties.orientation),Lt.fillText(t.properties.value,e[0],e[1])}})),v(O.lines.graticule,"lat")&&(x(O.lines.graticule.lat),Mt.selectAll(".graticule_lat").each(function(t){if(y(t.geometry.coordinates)){var e=L(t.geometry.coordinates);st(e,t.properties.orientation),Lt.fillText(t.properties.value,e[0],e[1])}})),g(!0),O.constellations.show&&(O.constellations.bounds&&(Mt.selectAll(".boundaryline").each(function(t){w(O.constellations.boundstyle),W.constellation&&W.constellation===t.id&&(Lt.lineWidth*=1.5,Lt.setLineDash([])),H(t),Lt.stroke()}),g(!0)),O.constellations.names&&(x(O.constellations.namestyle),Mt.selectAll(".constname").each(function(t){if(y(t.geometry.coordinates)){k(t.properties.rank,O.constellations.namestyle.font);var e=L(t.geometry.coordinates);Lt.fillText(ot(t),e[0],e[1])}})),O.constellations.lines&&Mt.selectAll(".constline").each(function(t){w(O.constellations.linestyle),H(t),Lt.stroke()})),O.stars.show&&(w(O.stars.style),Mt.selectAll(".star").each(function(t){if(y(t.geometry.coordinates)&&t.properties.mag<=O.stars.limit){var e=L(t.geometry.coordinates),a=tt(t);Lt.fillStyle=it(t),Lt.beginPath(),Lt.arc(e[0],e[1],a,0,2*Math.PI),Lt.closePath(),Lt.fill(),O.stars.names&&t.properties.mag<=O.stars.namelimit*Et&&(x(O.stars.namestyle),Lt.fillText(Q(t),e[0]+a,e[1])),O.stars.proper&&t.properties.mag<=O.stars.propernamelimit*Et&&(x(O.stars.propernamestyle),Lt.fillText(K(t),e[0]-a,e[1]))}})),O.dsos.show&&Mt.selectAll(".dso").each(function(t){if(y(t.geometry.coordinates)&&j(t.properties,O.dsos.limit)){var e=L(t.geometry.coordinates),a=t.properties.type;w(O.dsos.symbols[a]);var n=S(t,e);v(O.dsos.symbols[a],"stroke")?Lt.stroke():Lt.fill(),O.dsos.names&&j(t.properties,O.dsos.namelimit)&&(x(O.dsos.namestyle),Lt.fillStyle=O.dsos.symbols[a].fill,Lt.fillText(C(t),e[0]+n,e[1]-n))}}),O.location&&"equatorial"===O.transform&&O.planets.show&&W.origin){var a=W.date(),n=W.origin(a).spherical();Mt.selectAll(".planet").each(function(t){var e=t.id(),r=t(a).equatorial(n);if(y(r.pos)){var i=L(r.pos),o=O.planets.symbols[e];"lun"!==e?(x(O.planets.style),Lt.fillStyle=o.fill,Lt.fillText(o.symbol,i[0],i[1])):rt.symbol().type("crescent").size(144).age(r.age).position(i)(Lt)}})}W.data.length>0&&W.data.forEach(function(t){t.redraw()}),O.location&&O.horizon.show&&!zt.clip&&(U.origin(W.nadir()),w(O.horizon),Mt.selectAll(".horizon").datum(U).attr("d",H),Lt.fill(),O.horizon.stroke&&Lt.stroke()),O.controls&&z(L.scale())}function g(t){var e=L.rotate();L.rotate([0,0]),
w(O.background),Mt.selectAll(".outline").attr("d",H),t===!0?Lt.stroke():Lt.fill(),L.rotate(e)}function y(t){return zt.clip&&d3.geo.distance(O.center,t)>Z?0:1}function w(t){Lt.fillStyle=t.fill||null,Lt.strokeStyle=t.stroke||null,Lt.lineWidth=t.width||null,Lt.globalAlpha=t.opacity||1,Lt.font=t.font||null,Lt.setLineDash(v(t,"dash")?t.dash:[]),Lt.beginPath()}function x(t){Lt.fillStyle=t.fill,Lt.textAlign=t.align||"left",Lt.textBaseline=t.baseline||"bottom",Lt.globalAlpha=t.opacity||1,Lt.font=t.font}function k(t,e){Lt.font=b(e)?1===e.length?e[0]:t>e.length?e[e.length-1]:e[t-1]:e}function z(t){var e=f("celestial-zoomin"),a=f("celestial-zoomout");e&&a&&(e.disabled=t>=Tt*R*.99,a.disabled=Tt>=t)}function q(t){t?(L.clipAngle(90),Mt.selectAll(".outline").remove(),Mt.append("path").datum(d3.geo.circle().angle([90])).attr("class","outline")):(L.clipAngle(null),Mt.selectAll(".outline").remove(),Mt.append("path").datum(Nt.outline).attr("class","outline"))}function j(t,e){return 999===t.mag&&Math.sqrt(parseInt(t.dim))>e||999!==t.mag&&t.mag<=e}function S(t,e){var a=t.properties,n=D(a)||9,r=A(a.type);return rt.symbol().type(r).size(n).position(e)(Lt),Math.sqrt(n)/2}function A(t){return t&&v(O.dsos.symbols,t)?O.dsos.symbols[t].shape:"circle"}function D(t){return t.mag&&999!==t.mag?Math.pow(2*St*Et-t.mag,Dt):Math.pow(parseInt(t.dim)*St*Et/7,.5)}function C(t){var e=t.properties;if(""!==e.name)return O.dsos.desig&&e.desig?e.desig:e.name}function Q(t){var e=t.properties.desig;return O.stars.desig?e:e.replace(/^(HD|HIP|V\d{3}).+/,"")}function K(t){var e=t.properties.name;return e}function tt(t){var e=t.properties.mag;if(null===e)return.1;var a=jt*Et*Math.exp(At*(e+2));return Math.max(a,.1)}function it(t){var e=t.properties.bv;return!O.stars.colors||isNaN(e)?O.stars.style.fill:at(e)}function ot(t){return O.constellations.desig?t.properties.desig:t.properties[O.lang]}function st(t,e){for(var a=e.split(""),n="center",r="middle",i=a.length-1;i>=0;i--)switch(a[i]){case"N":r="bottom";break;case"S":r="top";break;case"E":n="left",t[0]+=2;break;case"W":n="right",t[0]-=2}return Lt.textAlign=n,Lt.textBaseline=r,t}function lt(){Lt.clearRect(0,0,kt+xt[0],qt+xt[1])}function ct(){return O.width&&O.width>0?O.width:bt?bt.clientWidth-xt[0]:window.innerWidth-2*xt[0]}function ht(t){if(v(nt,t)){var e=nt[t];return v(e,"ratio")||(e.ratio=2),e}}function ut(t){if(null===t)return[0,0,0];var e=$.equatorial;return t[2]||(t[2]=0),[e[0]-t[0],e[1]-t[1],e[2]+t[2]]}function pt(){if(gt&&!(gt.length<1)){var t,e=gt[vt];switch(e.param){case"projection":t=p({projection:e.value});break;case"center":t=h({center:e.value});break;case"zoom":t=r(e.value)}e.callback&&setTimeout(e.callback,t),vt++,yt===!0&&vt===gt.length&&(vt=0),t=0===e.duration||e.duration<t?t:e.duration,vt<gt.length&&(mt=setTimeout(pt,t))}}function dt(){clearTimeout(mt)}var ft,mt,Mt=W.container,gt=[],vt=0,yt=!1;O=et.set(a),O.stars.size=O.stars.size||7,O.stars.exponent=O.stars.exponent||-.28,O.center=O.center||[0,0],O.lang&&-1!==O.lang.search(/^de|es$/)||(O.lang="name");var bt=f(O.container);if(bt){ft="#"+O.container;var wt=window.getComputedStyle(bt,null);parseInt(wt.width)||O.width||(bt.style.width=m(bt.parentNode.clientWidth))}else ft="body",bt=null;var xt=[16,16],kt=ct(),zt=ht(O.projection);if(O.lines.graticule.lat&&"outline"===O.lines.graticule.lat.pos[0]&&(zt.scale-=2),zt){var Pt=O.transform||"equatorial",It=zt.ratio,qt=kt/It,Tt=zt.scale*kt/1024,jt=O.stars.size,St=O.dsos.size||jt,At=O.stars.exponent,Dt=O.dsos.exponent||At,Et=1,Ct=ut(O.center),Ft=O.datapath||"";Ft=Ft.replace(/([^\/]$)/,"$1/"),"body"!=ft&&(f(O.container).style.height=m(qt)),L=W.projection(O.projection).rotate(Ct).translate([kt/2,qt/2]).scale(Tt),N=d3.geo.zoom().projection(L).center([kt/2,qt/2]).scaleExtent([Tt,Tt*R]).on("zoom.redraw",d);var Ot=d3.select(ft).selectAll("canvas");0===Ot[0].length&&(Ot=d3.select(ft).append("canvas")),Ot.attr("width",kt).attr("height",qt);var Lt=Ot.node().getContext("2d"),Nt=d3.geo.graticule().minorStep([15,10]);H=d3.geo.path().projection(L).context(Lt),Mt?Mt.selectAll("*").remove():Mt=d3.select(ft).append("container"),O.interactive?Ot.call(N):Ot.attr("style","cursor: default!important"),q(zt.clip),d3.select(window).on("resize",u),d3.select(ft).on("dblclick",function(){return r(1.5625),!1}),O.controls===!0&&null===f("celestial-zoomin")&&(d3.select(ft).append("input").attr("type","button").attr("id","celestial-zoomin").attr("value","+").on("click",function(){return r(1.25),!1}),d3.select(ft).append("input").attr("type","button").attr("id","celestial-zoomout").attr("value","−").on("click",function(){return r(.8),!1})),O.location===!0&&(U=d3.geo.circle().angle([90]),Mt.append("path").datum(U).attr("class","horizon"),null===f("loc")?F(O):"zenith"===O.follow&&h({center:W.zenith()}),T("horizon-show",zt.clip)),O.form===!0&&null===f("params")&&I(O),null===f("error")&&d3.select("body").append("div").attr("id","error"),this.container=Mt,this.clip=y,this.map=H,this.mapProjection=L,this.context=Lt,this.metrics=function(){return{width:kt,height:qt}},this.setStyle=w,this.setTextStyle=x,this.setConstStyle=k,this.dsoSymbol=S,this.redraw=d,this.resize=function(t){t&&v(t,"width")&&(O.width=t.width),u(!0)},this.reload=function(t){t&&v(t,"transform")&&(Pt=O.transform=t.transform,Nt.minorStep("equatorial"===Pt?[15,10]:[10,10]),Mt.selectAll("*").remove(),q(),Mt.append("path").datum(U).attr("class","horizon"),n())},this.apply=function(t){l(t)},this.reproject=function(t){return p(t)},this.rotate=function(t){return t?h(t):O.center},this.zoomBy=function(t){return t?r(t):L.scale()/Tt},this.color=function(t){return t&&v(O.dsos.symbols,t)?O.dsos.symbols[t].fill:"#000"},this.animate=function(t,e){t&&(gt=t,vt=0,yt=e?!0:!1,pt())},this.stop=function(t){dt(),t===!0&&(gt=[])},this.go=function(t){gt.length<1||(t&&t<gt.length&&(vt=t),pt())},v(this,"date")||(this.date=function(){console.log("Celestial.date() needs config.location = true to work.")}),n()}},"object"==typeof module&&module.exports&&(module.exports=W),W.projection=function(t){var e,a,n;if(!v(nt,t))throw new Error("Projection not supported: "+t);return e=nt[t],a=null!==e.arg?d3.geo[t].raw(e.arg):d3.geo[t].raw,n=function(t,e){var n=a(-t,e);return n},n.invert=function(t,e){try{var n=a.invert(t,e);return n[0]=n&&-n[0],n}catch(r){console.log(r)}},d3.geo.projection(n)};var $={equatorial:[0,0,0],ecliptic:[0,0,23.4393],galactic:[93.5949,28.9362,-58.5988],supergalactic:[137.31,59.5283,57.7303]},J={equatorial:[0,90],ecliptic:[-90,66.5607],galactic:[-167.1405,27.1283],supergalactic:[-76.2458,15.7089]};W.eulerAngles=function(){return $},W.poles=function(){return J};var Q=2*Math.PI,Z=Math.PI/2,K=Math.PI/180,X={ecliptic:[-90,23.4393,90],"inverse ecliptic":[90,23.4393,-90],galactic:[-167.1405,62.8717,122.9319],"inverse galactic":[122.9319,62.8717,-167.1405],supergalactic:[283.7542,74.2911,26.4504],"inverse supergalactic":[26.4504,74.2911,283.7542],init:function(){for(var t in this)this[t].constructor==Array&&(this[t]=this[t].map(function(t){return t*K}))},add:function(t,e){return e&&t&&3===e.length&&!this.hasOwnProperty(t)?(this[t]=e.map(function(t){return t*K}),this[t]):void 0}};X.init(),W.euler=function(){return X};var tt=function(t,e,a){var r=n(t,a[1])-e[0];0>r&&(r+=360),r*=K;var i=e[1]*K,o=a[0]*K,s=Math.asin(Math.sin(i)*Math.sin(o)+Math.cos(i)*Math.cos(o)*Math.cos(r)),l=Math.acos((Math.sin(i)-Math.sin(s)*Math.sin(o))/(Math.cos(s)*Math.cos(o)));return Math.sin(r)>0&&(l=2*Math.PI-l),[s/K,l/K,0]};tt.inverse=function(t,e,a){var r=e[0]*K,i=e[1]*K,o=a[0]*K,s=Math.asin(Math.sin(r)*Math.sin(o)+Math.cos(r)*Math.cos(o)*Math.cos(i)),l=((Math.sin(r)-Math.sin(s)*Math.sin(o))/(Math.cos(s)*Math.cos(o))).toFixed(6);l=Math.acos(l),l/=K;var c=n(t,a[1])-l;return[c,s/K,0]},W.horizontal=tt,W.add=function(t){var e={};return v(t,"type")?"dso"!==t.type&&"json"!==t.type||v(t,"file")&&v(t,"callback")?"line"!==t.type&&"raw"!==t.type||v(t,"callback")?(v(t,"file")&&(e.file=t.file),e.type=t.type,v(t,"callback")&&(e.callback=t.callback),v(t,"redraw")&&(e.redraw=t.redraw),void W.data.push(e)):console.log("Can't add data"):console.log("Can't add data file"):console.log("Missing type")},W.remove=function(t){return null!==t&&t<W.data.length?W.data.splice(t,1):void 0},W.clear=function(){W.data=[]},W.getData=i,W.getPoint=r;var et={width:0,projection:"aitoff",transform:"equatorial",center:null,geopos:null,follow:"zenith",orientationfixed:!0,adaptable:!0,interactive:!0,form:!1,location:!1,daterange:[],controls:!0,lang:"",container:"celestial-map",datapath:"data/",stars:{show:!0,limit:6,colors:!0,style:{fill:"#ffffff",opacity:1},names:!0,proper:!1,desig:!1,namestyle:{fill:"#ddddbb",font:"11px 'Palatino Linotype', Georgia, Times, 'Times Roman', serif",align:"left",baseline:"top"},namelimit:2.5,propernamestyle:{fill:"#ddddbb",font:"13px 'Palatino Linotype', Georgia, Times, 'Times Roman', serif",align:"right",baseline:"bottom"},propernamelimit:1.5,size:7,exponent:-.28,data:"stars.6.json"},dsos:{show:!0,limit:6,names:!0,desig:!0,namestyle:{fill:"#cccccc",font:"11px 'Lucida Sans Unicode', Helvetica, Arial, serif",align:"left",baseline:"top"},namelimit:4,size:null,exponent:1.4,data:"dsos.bright.json",symbols:{gg:{shape:"circle",fill:"#ff0000"},g:{shape:"ellipse",fill:"#ff0000"},s:{shape:"ellipse",fill:"#ff0000"},s0:{shape:"ellipse",fill:"#ff0000"},sd:{shape:"ellipse",fill:"#ff0000"},e:{shape:"ellipse",fill:"#ff0000"},i:{shape:"ellipse",fill:"#ff0000"},oc:{shape:"circle",fill:"#ff9900",stroke:"#ff9900",width:2},gc:{shape:"circle",fill:"#ff9900"},en:{shape:"square",fill:"#ff00cc"},bn:{shape:"square",fill:"#ff00cc"},sfr:{shape:"square",fill:"#cc00ff"},rn:{shape:"square",fill:"#0000ff"},pn:{shape:"diamond",fill:"#00cccc"},snr:{shape:"diamond",fill:"#ff00cc"},dn:{shape:"square",fill:"#999999",stroke:"#999999",width:2},pos:{shape:"marker",fill:"#cccccc",stroke:"#cccccc",width:1.5}}},constellations:{show:!0,names:!0,desig:!0,namestyle:{fill:"#cccc99",align:"center",baseline:"middle",opacity:.8,font:["14px 'Lucida Sans Unicode', Helvetica, Arial, sans-serif","12px 'Lucida Sans Unicode', Helvetica, Arial, sans-serif","11px 'Lucida Sans Unicode', Helvetica, Arial, sans-serif"]},lines:!0,linestyle:{stroke:"#cccccc",width:1.5,opacity:.6},bounds:!1,boundstyle:{stroke:"#ccff00",width:1,opacity:.8,dash:[2,4]}},mw:{show:!0,style:{fill:"#ffffff",opacity:"0.15"}},lines:{graticule:{show:!0,stroke:"#cccccc",width:.6,opacity:.8,lon:{pos:[""],fill:"#eee",font:"10px 'Lucida Sans Unicode', Helvetica, Arial, sans-serif"},lat:{pos:[""],fill:"#eee",font:"10px 'Lucida Sans Unicode', Helvetica, Arial, sans-serif"}},equatorial:{show:!0,stroke:"#aaaaaa",width:1.3,opacity:.7},ecliptic:{show:!0,stroke:"#66cc66",width:1.3,opacity:.7},galactic:{show:!1,stroke:"#cc6666",width:1.3,opacity:.7},supergalactic:{show:!1,stroke:"#cc66cc",width:1.3,opacity:.7}},background:{fill:"#000000",opacity:1,stroke:"#000000",width:1.5},horizon:{show:!1,stroke:"#000099",width:1,fill:"#000000",opacity:.5},planets:{show:!1,which:["sol","mer","ven","ter","lun","mar","jup","sat","ura","nep"],style:{fill:"#00ccff",font:"bold 17px 'Lucida Sans Unicode', Consolas, sans-serif",align:"center",baseline:"middle"},symbols:{sol:{symbol:"☉",fill:"#ffff00"},mer:{symbol:"☿",fill:"#cccccc"},ven:{symbol:"♀",fill:"#eeeecc"},ter:{symbol:"⊕",fill:"#00ffff"},lun:{symbol:"●",fill:"#ffffff"},mar:{symbol:"♂",fill:"#ff9999"},cer:{symbol:"⚳",fill:"#cccccc"},ves:{symbol:"⚶",fill:"#cccccc"},jup:{symbol:"♃",fill:"#ff9966"},sat:{symbol:"♄",fill:"#ffcc66"},ura:{symbol:"♅",fill:"#66ccff"},nep:{symbol:"♆",fill:"#6666ff"},plu:{symbol:"♇",fill:"#aaaaaa"},eri:{symbol:"⚪",fill:"#eeeeee"}}},daylight:{show:!1,fill:"#fff",opacity:.4},set:function(t){var e,a,n={};if(!t)return this;for(e in this)if(v(this,e))if(v(t,e)&&null!==t[e])if(null===this[e]||this[e].constructor!=Object)n[e]=t[e];else{n[e]={};for(a in this[e])n[e][a]=v(t[e],a)?t[e][a]:this[e][a]}else n[e]=this[e];return n}};W.settings=function(){return et};var at=d3.scale.quantize().domain([3.347,-.335]).range(["#ff4700","#ff4b00","#ff4f00","#ff5300","#ff5600","#ff5900","#ff5b00","#ff5d00","#ff6000","#ff6300","#ff6500","#ff6700","#ff6900","#ff6b00","#ff6d00","#ff7000","#ff7300","#ff7500","#ff7800","#ff7a00","#ff7c00","#ff7e00","#ff8100","#ff8300","#ff8506","#ff870a","#ff8912","#ff8b1a","#ff8e21","#ff9127","#ff932c","#ff9631","#ff9836","#ff9a3c","#ff9d3f","#ffa148","#ffa34b","#ffa54f","#ffa753","#ffa957","#ffab5a","#ffad5e","#ffb165","#ffb269","#ffb46b","#ffb872","#ffb975","#ffbb78","#ffbe7e","#ffc184","#ffc489","#ffc78f","#ffc892","#ffc994","#ffcc99","#ffce9f","#ffd1a3","#ffd3a8","#ffd5ad","#ffd7b1","#ffd9b6","#ffdbba","#ffddbe","#ffdfc2","#ffe1c6","#ffe3ca","#ffe4ce","#ffe8d5","#ffe9d9","#ffebdc","#ffece0","#ffefe6","#fff0e9","#fff2ec","#fff4f2","#fff5f5","#fff6f8","#fff9fd","#fef9ff","#f9f6ff","#f6f4ff","#f3f2ff","#eff0ff","#ebeeff","#e9edff","#e6ebff","#e3e9ff","#e0e7ff","#dee6ff","#dce5ff","#d9e3ff","#d7e2ff","#d3e0ff","#c9d9ff","#bfd3ff","#b7ceff","#afc9ff","#a9c5ff","#a4c2ff","#9fbfff","#9bbcff"]),nt={airy:{n:"Airy’s Minimum Error",arg:Math.PI/2,scale:360,ratio:1,clip:!0},aitoff:{n:"Aitoff",arg:null,scale:162},armadillo:{n:"Armadillo",arg:0,scale:250},august:{n:"August",arg:null,scale:94,ratio:1.4},azimuthalEqualArea:{n:"Azimuthal Equal Area",arg:null,scale:340,ratio:1,clip:!0},azimuthalEquidistant:{n:"Azimuthal Equidistant",arg:null,scale:320,ratio:1,clip:!0},baker:{n:"Baker Dinomic",arg:null,scale:160,ratio:1.4},berghaus:{n:"Berghaus Star",arg:0,scale:320,ratio:1,clip:!0},boggs:{n:"Boggs Eumorphic",arg:null,scale:170},bonne:{n:"Bonne",arg:Math.PI/2.5,scale:225,ratio:.88},bromley:{n:"Bromley",arg:null,scale:162},cassini:{n:"Cassini",arg:null,scale:325,ratio:1,clip:!0},collignon:{n:"Collignon",arg:null,scale:100,ratio:2.6},craig:{n:"Craig Retroazimuthal",arg:0,scale:310,ratio:1.5,clip:!0},craster:{n:"Craster Parabolic",arg:null,scale:160},cylindricalEqualArea:{n:"Cylindrical Equal Area",arg:Math.PI/6,scale:190,ratio:2.3},cylindricalStereographic:{n:"Cylindrical Stereographic",arg:Math.PI/4,scale:230,ratio:1.3},eckert1:{n:"Eckert I",arg:null,scale:175},eckert2:{n:"Eckert II",arg:null,scale:175},eckert3:{n:"Eckert III",arg:null,scale:190},eckert4:{n:"Eckert IV",arg:null,scale:190},eckert5:{n:"Eckert V",arg:null,scale:182},eckert6:{n:"Eckert VI",arg:null,scale:182},eisenlohr:{n:"Eisenlohr",arg:null,scale:102},equirectangular:{n:"Equirectangular",arg:null,scale:165},fahey:{n:"Fahey",arg:null,scale:196,ratio:1.4},mtFlatPolarParabolic:{n:"Flat Polar Parabolic",arg:null,scale:175},mtFlatPolarQuartic:{n:"Flat Polar Quartic",arg:null,scale:230,ratio:1.65},mtFlatPolarSinusoidal:{n:"Flat Polar Sinusoidal",arg:null,scale:175,ratio:1.9},foucaut:{n:"Foucaut",arg:null,scale:142},ginzburg4:{n:"Ginzburg IV",arg:null,scale:180,ratio:1.7},ginzburg5:{n:"Ginzburg V",arg:null,scale:196,ratio:1.55},ginzburg6:{n:"Ginzburg VI",arg:null,scale:190,ratio:1.4},ginzburg8:{n:"Ginzburg VIII",arg:null,scale:205,ratio:1.3},ginzburg9:{n:"Ginzburg IX",arg:null,scale:190,ratio:1.4},homolosine:{n:"Goode Homolosine",arg:null,scale:160,ratio:2.2},hammer:{n:"Hammer",arg:2,scale:180},hatano:{n:"Hatano",arg:null,scale:186},healpix:{n:"HEALPix",arg:1,scale:320,ratio:1.2},hill:{n:"Hill Eucyclic",arg:2,scale:190,ratio:1.1},kavrayskiy7:{n:"Kavrayskiy VII",arg:null,scale:185,ratio:1.75},lagrange:{n:"Lagrange",arg:Math.PI/4,scale:88,ratio:1.6,clip:!1},larrivee:{n:"l'Arrivée",arg:null,scale:160,ratio:1.25},laskowski:{n:"Laskowski Tri-Optimal",arg:null,scale:165,ratio:1.7},loximuthal:{n:"Loximuthal",arg:Math.PI/4,scale:175,ratio:1.8},mercator:{n:"Mercator",arg:null,scale:160,ratio:1.3},miller:{n:"Miller",arg:null,scale:160,ratio:1.5},mollweide:{n:"Mollweide",arg:null,scale:180},naturalEarth:{n:"Natural Earth",arg:null,scale:185,ratio:1.85},nellHammer:{n:"Nell Hammer",arg:null,scale:160,ratio:2.6},orthographic:{n:"Orthographic",arg:null,scale:480,ratio:1,clip:!0},patterson:{n:"Patterson Cylindrical",arg:null,scale:160,ratio:1.75},polyconic:{n:"Polyconic",arg:null,scale:160,ratio:1.3},quincuncial:{n:"Quincuncial",arg:null,scale:160,ratio:1.3},rectangularPolyconic:{n:"Rectangular Polyconic",arg:0,scale:160,ratio:1.65},robinson:{n:"Robinson",arg:null,scale:160},sinusoidal:{n:"Sinusoidal",arg:null,scale:160,ratio:2},stereographic:{n:"Stereographic",arg:null,scale:500,ratio:1,clip:!0},times:{n:"Times",arg:null,scale:210,ratio:1.4},twoPointEquidistant:{n:"Two-Point Equidistant",arg:Math.PI/2,scale:320,ratio:1.15,clip:!0},vanDerGrinten:{n:"van Der Grinten",arg:null,scale:160,ratio:1},vanDerGrinten2:{n:"van Der Grinten II",arg:null,scale:160,ratio:1},vanDerGrinten3:{n:"van Der Grinten III",arg:null,scale:160,ratio:1},vanDerGrinten4:{n:"van Der Grinten IV",arg:null,scale:160,ratio:1.6},wagner4:{n:"Wagner IV",arg:null,scale:185},wagner6:{n:"Wagner VI",arg:null,scale:160},wagner7:{n:"Wagner VII",arg:null,scale:190,ratio:1.8},wiechel:{n:"Wiechel",arg:null,scale:360,ratio:1,clip:!0},winkel3:{n:"Winkel Tripel",arg:null,scale:196,ratio:1.7}};W.projections=function(){return nt};var rt={};rt.symbol=function(){function t(t){o[a()](t)}var e,a=d3.functor("circle"),n=d3.functor(64),r=d3.functor(Math.PI),i=(d3.functor("#fff"),d3.functor("")),o=(d3.functor([2,2]),{circle:function(t){var a=Math.sqrt(n()),r=a/2;return t.arc(e[0],e[1],r,0,2*Math.PI),r},square:function(t){var a=Math.sqrt(n()),r=a/1.7;return t.moveTo(e[0]-r,e[1]-r),t.lineTo(e[0]+r,e[1]-r),t.lineTo(e[0]+r,e[1]+r),t.lineTo(e[0]-r,e[1]+r),t.closePath(),r},diamond:function(t){var a=Math.sqrt(n()),r=a/1.5;return t.moveTo(e[0],e[1]-r),t.lineTo(e[0]+r,e[1]),t.lineTo(e[0],e[1]+r),t.lineTo(e[0]-r,e[1]),t.closePath(),r},triangle:function(t){var a=Math.sqrt(n()),r=a/Math.sqrt(3);return t.moveTo(e[0],e[1]-r),t.lineTo(e[0]+r,e[1]+r),t.lineTo(e[0]-r,e[1]+r),t.closePath(),r},ellipse:function(t){var a=Math.sqrt(n()),r=a/2;return t.save(),t.translate(e[0],e[1]),t.scale(1.6,.8),t.beginPath(),t.arc(0,0,r,0,2*Math.PI),t.closePath(),t.restore(),r},marker:function(t){var a=Math.sqrt(n()),r=a/2;return t.moveTo(e[0],e[1]-r),t.lineTo(e[0],e[1]+r),t.moveTo(e[0]-r,e[1]),t.lineTo(e[0]+r,e[1]),t.closePath(),r},"cross-circle":function(t){var a=Math.sqrt(n()),r=a/2;return t.moveTo(e[0],e[1]-a),t.lineTo(e[0],e[1]+a),t.moveTo(e[0]-a,e[1]),t.lineTo(e[0]+a,e[1]),t.stroke(),t.beginPath(),t.moveTo(e[0],e[1]),t.arc(e[0],e[1],r,0,2*Math.PI),t.closePath(),r},"stroke-circle":function(t){var a=Math.sqrt(n()),r=a/2;return t.moveTo(e[0],e[1]-a),t.lineTo(e[0],e[1]+a),t.stroke(),t.beginPath(),t.moveTo(e[0],e[1]),t.arc(e[0],e[1],r,0,2*Math.PI),t.closePath(),r},crescent:function(t){var a=Math.sqrt(n()),i=a/2,o=r(),s=.5*(1-Math.cos(o)),l=1.6*Math.abs(s-.5)+.01,c=o>Math.PI,h=Math.abs(s)>.5?c:!c;return t.save(),t.fillStyle="#557",t.moveTo(e[0],e[1]),t.arc(e[0],e[1],i,0,2*Math.PI),t.closePath(),t.fill(),t.fillStyle="#eee",t.beginPath(),t.moveTo(e[0],e[1]),t.arc(e[0],e[1],i,-Math.PI/2,Math.PI/2,c),t.scale(l,1),t.arc(e[0]/l,e[1],i,Math.PI/2,-Math.PI/2,h),t.closePath(),t.fill(),t.restore(),i}});return t.type=function(e){return arguments.length?(a=d3.functor(e),t):a},t.size=function(e){return arguments.length?(n=d3.functor(e),t):n},t.age=function(e){return arguments.length?(r=d3.functor(e),t):r},t.text=function(e){return arguments.length?(i=d3.functor(e),t):i},t.position=function(a){return arguments.length?(e=a,t):void 0},t},W.Canvas=rt;var it={sinh:function(t){return(Math.pow(Math.E,t)-Math.pow(Math.E,-t))/2},cosh:function(t){return(Math.pow(Math.E,t)+Math.pow(Math.E,-t))/2},tanh:function(t){return 2/(1+Math.exp(-2*t))-1},asinh:function(t){return Math.log(t+Math.sqrt(t*t+1))},acosh:function(t){return Math.log(t+Math.sqrt(t*t-1))},normalize0:function(t){return(t+3*Math.PI)%(2*Math.PI)-Math.PI},normalize:function(t){return(t+2*Math.PI)%(2*Math.PI)},cartesian:function(t){var e=t[0],a=Z-t[1],n=t[2];return{x:n*Math.sin(a)*Math.cos(e),y:n*Math.sin(a)*Math.sin(e),z:n*Math.cos(a)}},spherical:function(t){var e=Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z),a=Math.atan(t.y/t.x),n=Math.acos(t.z/e);return[a/K,n/K,e]},distance:function(t,e){return Math.acos(Math.sin(t[1])*Math.sin(e[1])+Math.cos(t[1])*Math.cos(e[1])*Math.cos(t[0]-e[0]))}},ot={"stars-show":["stars-limit","stars-colors","stars-style-fill","stars-names","stars-size","stars-exponent"],"stars-names":["stars-proper","stars-desig","stars-namelimit"],"stars-proper":["stars-propernamelimit"],"dsos-show":["dsos-limit","dsos-names","dsos-size","dsos-exponent"],"dsos-names":["dsos-desig","dsos-namelimit"],"mw-show":["mw-style-opacity","mw-style-fill"],"constellations-names":["constellations-desig"]},st={sol:.0002959122082855911,mer:0x95955473dbc3,ven:0x89d9374048629,ter:0xa923c08a47948,lun:36599199229256,mar:319711652803400,cer:467549107200,ves:129071530155,jup:0xd2088431b2a1400,sat:0x3ee37dea29c61e0,ura:0x99ad2c257ccb88,nep:0xb54f909dc5b7b8,plu:7327611364884,eri:827117568e4},lt={sol:"☉",mer:"☿",ven:"♀",ter:"⊕",lun:"●",mar:"♂",cer:"⚳",ves:"⚶",jup:"♃",sat:"♄",ura:"♅",nep:"♆",plu:"♇",eri:"⚪"},ct=23.43928*K,ht=Math.sin(ct),ut=Math.cos(ct),pt=["a","e","i","w","M","L","W","N","n","ep","ref","lecl","becl","Tilt"],dt=function(){function t(e){return w(e),"sol"===d?(b.x=0,b.y=0,b.z=0,t):(x(),t)}function e(t,e){for(var a=e>1?t*t:-t*t,n=e*a*t/6,r=(1-e)*t-n,i=4;Math.abs(n)>1e-15;)n*=a/(i*(i+1)),r-=n,i+=2;return r}function n(){var t,a,n,r,i=b.e,o=b.M,s=1e-8,l=0,c=1.9,h=!1,u=0;if(!o)return 0;if(1>i&&((o<-Math.PI||o>Math.PI)&&(r=it.normalize0(o),l=o-r,o=r),.9>i)){t=Math.atan2(Math.sin(o),Math.cos(o)-i);do a=(t-i*Math.sin(t)-o)/(1-i*Math.cos(t)),t-=a;while(Math.abs(a)>s);return t}if(0>o&&(o=-o,h=!0),t=o,s*=Math.abs(1-i),1e-15>s&&(s=1e-15),(i>.8&&o<Math.PI/3||i>1)&&(n=o/Math.abs(1-i),n*n>6*Math.abs(1-i)&&(n=o<Math.PI?Math.pow(6*o,1/3):it.asinh(o/i)),t=n),i>1&&o>4&&(t=Math.log(o)),1>i)for(;Math.abs(c)>s;)a=u++>8?e(t,i)-o:t-i*Math.sin(t)-o,c=-a/(1-i*Math.cos(t)),t+=c;else for(;Math.abs(c)>s;)a=u++>7?-e(t,i)-o:i*it.sinh(t)-t-o,c=-a/(i*it.cosh(t)-1),t+=c;return h?l-t:l+t}function r(){var t,e,a,r,i;1===b.e?(i=b.jd0-b.T,r=b.w0*i*.5,e=Math.pow(r+Math.sqrt(r*r+1),1/3),b.v=2*Math.atan(e-1/e)):(b.E=n(),b.e>1?(t=b.e-it.cosh(b.E),e=it.sinh(b.E)):(t=Math.cos(b.E)-b.e,e=Math.sin(b.E)),e*=Math.sqrt(Math.abs(1-b.e*b.e)),b.v=Math.atan2(e,t)),a=b.q*(1+b.e),b.r=a/(1+b.e*Math.cos(b.v))}function i(){b.hasOwnProperty("w")||(b.w=b.W-b.N),b.hasOwnProperty("M")||(b.M=b.L-b.W),b.e<1&&(b.M=it.normalize0(b.M)),b.P=Q*Math.sqrt(Math.pow(b.a,3)/M)/365.25,b.T=b.jd0-b.M/Z/b.P,1!==b.e?(b.q=b.a*(1-b.e),b.t0=b.a*Math.sqrt(Math.abs(b.a)/M)):(b.w0=3/Math.sqrt(2)/(b.q*Math.sqrt(b.q/M)),b.a=0,b.t0=0),b.am=Math.sqrt(M*b.q*(1+b.e))}function o(){if(!b.ref||"ecl"===b.ref)return b.tx=b.x,b.ty=b.y,void(b.tz=b.z);var t=b.lecl,e=Math.PI/2-b.becl,n=[0,e,-t];a(b,n);var r=it.cartesian([b.tl,b.tb,b.r]);b.tx=r.x,b.ty=r.y,b.tz=r.z}function s(t){ct=(23.439292-.0130042*b.cy-1.667e-7*b.cy*b.cy+5.028e-7*b.cy*b.cy*b.cy)*K,ht=Math.sin(ct),ut=Math.cos(ct);var e="lun"===d?{x:0,y:0,z:0}:{x:t.x,y:t.y,z:t.z};b.xeq=b.x-e.x,b.yeq=(b.y-e.y)*ut-(b.z-e.z)*ht,b.zeq=(b.y-e.y)*ht+(b.z-e.z)*ut,b.ra=it.normalize(Math.atan2(b.yeq,b.xeq)),b.dec=Math.atan2(b.zeq,Math.sqrt(b.xeq*b.xeq+b.yeq*b.yeq)),"lun"===d&&(b=p(b,t)),b.pos=[b.ra/K,b.dec/K],b.rt=Math.sqrt(b.xeq*b.xeq+b.yeq*b.yeq+b.zeq*b.zeq)}function l(){var t=b.v+b.w;return b.x=b.r*(Math.cos(b.N)*Math.cos(t)-Math.sin(b.N)*Math.sin(t)*Math.cos(b.i)),b.y=b.r*(Math.sin(b.N)*Math.cos(t)+Math.cos(b.N)*Math.sin(t)*Math.cos(b.i)),b.z=b.r*Math.sin(t)*Math.sin(b.i),b}function c(){var t=Math.atan2(b.y,b.x),e=Math.atan2(b.z,Math.sqrt(b.x*b.x+b.y*b.y));return b.l=it.normalize(t),b.b=e,b}function h(t){var e=t.getUTCFullYear(),a=t.getUTCMonth()+1,n=t.getUTCDate(),r=(t.getUTCHours()-12+t.getUTCMinutes()/60+t.getUTCSeconds()/3600)/24,i=-4799;if(i>e)return-1;var o=Math.floor((14-a)/12),s=e+4800-o,l=a+12*o-3,c=n+Math.floor((153*l+2)/5)+365*s+Math.floor(s/4)-Math.floor(s/100)+Math.floor(s/400)-32045;return c+r}function u(t){return"undefined"!=typeof ft?ft.elements(t):void 0}function p(t,e){return c(),"undefined"!=typeof ft?ft.corr(t,e):void 0}var d,f,m,M=st.sol,g="sol",y={},b={},w=function(t){var e;b=[],t&&(e=t instanceof Date?new Date(t.valueOf()):z(t)),e||(e=new Date),b.jd=h(e),e=z(y.ep),e||(e=z("2000-01-01")),b.jd0=h(e),b.d=b.jd-b.jd0,b.cy=b.d/36525},x=function(){var t;if("lun"===d){if(b=u(b),!b)return}else{for(var e=0;e<pt.length;e++)t=pt[e],v(y,t)&&(v(y,"d"+t)?b[t]=y[t]+y["d"+t]*b.cy:v(y,t)&&(b[t]=y[t]));v(b,"M")&&!v(b,"dM")&&v(b,"n")&&(b.M+=b.n*b.d)}i(),r(),l()};return t.cartesian=function(){return b},t.spherical=function(){return c(),b},t.equatorial=function(t){return s(t),b},t.transpose=function(){return o(b),b},t.elements=function(e){var a;if(!arguments.length)return y;for(var n=0;n<pt.length;n++)a=pt[n],v(e,a)&&(y[a]=e[a],"a"===a||"e"===a?y[a]*=1:"ref"!==a&&"ep"!==a&&(y[a]*=K),v(e,"d"+a)&&(a="d"+a,y[a]=e[a],y[a]*="da"===a||"de"===a?1:K));return t},t.parentBody=function(e){return arguments.length?(g=e,M=st[g],t):g},t.id=function(e){return arguments.length?(d=e,m=lt[e],t):d},t.name=function(e){return arguments.length?(f=e,t):f},t.symbol=function(e){return arguments.length?(m=lt[e],t):m},t},ft={elements:function(t){var e=(t.jd-2451545)/36525,a=e*e,n=e*a,r=e*n,i=1e-4*a,o=1e-6*n,s=1e-8*r,l=3400.4*Math.cos(K*(235.7004+890534.223*e-32.601*i+3.664*o-1.769*s))-635.6*Math.cos(K*(100.737+413335.3554*e-122.571*i-10.684*o+5.028*s))-235.6*Math.cos(K*(134.9634+477198.8676*e+89.97*i+14.348*o-6.797*s))+218.1*Math.cos(K*(238.1713+854535.1727*e-31.065*i+3.623*o-1.769*s))+181*Math.cos(K*(10.6638+1367733.0907*e+57.37*i+18.011*o-8.566*s))-39.9*Math.cos(K*(103.2079+377336.3051*e-121.035*i-10.724*o+5.028*s))-38.4*Math.cos(K*(233.2295+926533.2733*e-34.136*i+3.705*o-1.769*s))+33.8*Math.cos(K*(336.4374+1303869.5784*e-155.171*i-7.02*o+3.259*s))+28.8*Math.cos(K*(111.4008+1781068.4461*e-65.201*i+7.328*o-3.538*s))+12.6*Math.cos(K*(13.1347+1331734.0404*e+58.906*i+17.971*o-8.566*s))+11.4*Math.cos(K*(186.5442+966404.0351*e-68.058*i-.567*o+.232*s))-11.1*Math.cos(K*(222.5657-441199.8173*e-91.506*i-14.307*o+6.797*s))-10.2*Math.cos(K*(269.9268+954397.7353*e+179.941*i+28.695*o-13.594*s))+9.7*Math.cos(K*(145.6272+1844931.9583*e+147.34*i+32.359*o-15.363*s))+9.6*Math.cos(K*(240.6422+818536.1225*e-29.529*i+3.582*o-1.769*s))+8*Math.cos(K*(297.8502+445267.1115*e-16.3*i+1.832*o-.884*s))-6.2*Math.cos(K*(132.4925+513197.9179*e+88.434*i+14.388*o-6.797*s))+6*Math.cos(K*(173.5506+1335801.3346*e-48.901*i+5.496*o-2.653*s))+3.7*Math.cos(K*(113.8717+1745069.3958*e-63.665*i+7.287*o-3.538*s))+3.6*Math.cos(K*(338.9083+1267870.5281*e-153.636*i-7.061*o+3.259*s))+3.2*Math.cos(K*(246.3642+2258267.3137*e+24.769*i+21.675*o-10.335*s))-3*Math.cos(K*(8.1929+1403732.141*e+55.834*i+18.052*o-8.566*s))+2.3*Math.cos(K*(98.2661+449334.4057*e-124.107*i-10.643*o+5.028*s))-2.2*Math.cos(K*(357.5291+35999.0503*e-1.536*i+.041*o+0*s))-2*Math.cos(K*(38.5872+858602.4669*e-138.871*i-8.852*o+4.144*s))-1.8*Math.cos(K*(105.6788+341337.2548*e-119.499*i-10.765*o+5.028*s))-1.7*Math.cos(K*(201.474+826670.7108*e-245.142*i-21.367*o+10.057*s))+1.6*Math.cos(K*(184.1196+401329.0556*e+125.428*i+18.579*o-8.798*s))-1.4*Math.cos(K*(308.4192-489205.1674*e+158.029*i+14.915*o-7.029*s))+1.3*Math.cos(K*(325.7736-63863.5122*e-212.541*i-25.031*o+11.826*s)),c=-.55*Math.cos(K*(238.2+854535.2*e))+.1*Math.cos(K*(103.2+377336.3*e))+.1*Math.cos(K*(233.2+926533.3*e)),h=383397.6+l+c*e,u=.014217*Math.cos(K*(100.737+413335.3554*e-122.571*i-10.684*o+5.028*s))+.008551*Math.cos(K*(325.7736-63863.5122*e-212.541*i-25.031*o+11.826*s))-.001383*Math.cos(K*(134.9634+477198.8676*e+89.97*i+14.348*o-6.797*s))+.001353*Math.cos(K*(10.6638+1367733.0907*e+57.37*i+18.011*o-8.566*s))-.001146*Math.cos(K*(66.5106+349471.8432*e-335.112*i-35.715*o+16.854*s))-915e-6*Math.cos(K*(201.474+826670.7108*e-245.142*i-21.367*o+10.057*s))+869e-6*Math.cos(K*(103.2079+377336.3051*e-121.035*i-10.724*o+5.028*s))-628e-6*Math.cos(K*(235.7004+890534.223*e-32.601*i+3.664*o-1.769*s))-393e-6*Math.cos(K*(291.5472-127727.0245*e-425.082*i-50.062*o+23.651*s))+284e-6*Math.cos(K*(328.2445-99862.5625*e-211.005*i-25.072*o+11.826*s))-278e-6*Math.cos(K*(162.8868-31931.7561*e-106.271*i-12.516*o+5.913*s))-24e-5*Math.cos(K*(269.9268+954397.7353*e+179.941*i+28.695*o-13.594*s))+23e-5*Math.cos(K*(111.4008+1781068.4461*e-65.201*i+7.328*o-3.538*s))+229e-6*Math.cos(K*(167.2476+762807.1986*e-457.683*i-46.398*o+21.882*s))-202e-6*Math.cos(K*(83.3826-12006.2998*e+247.999*i+29.262*o-13.826*s))+19e-5*Math.cos(K*(190.8102-541062.3799*e-302.511*i-39.379*o+18.623*s))+177e-6*Math.cos(K*(357.5291+35999.0503*e-1.536*i+.041*o+0*s))+153e-6*Math.cos(K*(32.2842+285608.3309*e-547.653*i-60.746*o+28.679*s))-137e-6*Math.cos(K*(44.8902+1431596.6029*e+269.911*i+43.043*o-20.392*s))+122e-6*Math.cos(K*(145.6272+1844931.9583*e+147.34*i+32.359*o-15.363*s))+116e-6*Math.cos(K*(302.211+1240006.0662*e-367.713*i-32.051*o+15.085*s))-111e-6*Math.cos(K*(203.9449+790671.6605*e-243.606*i-21.408*o+10.057*s))-108e-6*Math.cos(K*(68.9815+313472.7929*e-333.576*i-35.756*o+16.854*s))+96e-6*Math.cos(K*(336.4374+1303869.5784*e-155.171*i-7.02*o+3.259*s))-9e-5*Math.cos(K*(98.2661+449334.4057*e-124.107*i-10.643*o+5.028*s))+9e-5*Math.cos(K*(13.1347+1331734.0404*e+58.906*i+17.971*o-8.566*s))+56e-6*Math.cos(K*(55.8468-1018261.2475*e-392.482*i-53.726*o+25.42*s))-56e-6*Math.cos(K*(238.1713+854535.1727*e-31.065*i+3.623*o-1.769*s))+52e-6*Math.cos(K*(308.4192-489205.1674*e+158.029*i+14.915*o-7.029*s))-5e-5*Math.cos(K*(133.0212+698943.6863*e-670.224*i-71.429*o+33.708*s))-49e-6*Math.cos(K*(267.9846+1176142.554*e-580.254*i-57.082*o+26.911*s))-49e-6*Math.cos(K*(184.1196+401329.0556*e+125.428*i+18.579*o-8.798*s))-45e-6*Math.cos(K*(49.1562-75869.812*e+35.458*i+4.231*o-2.001*s))+44e-6*Math.cos(K*(257.3208-191590.5367*e-637.623*i-75.093*o+35.477*s))+42e-6*Math.cos(K*(105.6788+341337.2548*e-119.499*i-10.765*o+5.028*s))+42e-6*Math.cos(K*(160.4159+4067.2942*e-107.806*i-12.475*o+5.913*s))+4e-5*Math.cos(K*(246.3642+2258267.3137*e+24.769*i+21.675*o-10.335*s))-4e-5*Math.cos(K*(156.5838-604925.8921*e-515.053*i-64.41*o+30.448*s))+36e-6*Math.cos(K*(169.7185+726808.1483*e-456.147*i-46.439*o+21.882*s))+29e-6*Math.cos(K*(113.8717+1745069.3958*e-63.665*i+7.287*o-3.538*s))-29e-6*Math.cos(K*(297.8502+445267.1115*e-16.3*i+1.832*o-.884*s))-28e-6*Math.cos(K*(294.0181-163726.0747*e-423.546*i-50.103*o+23.651*s))+27e-6*Math.cos(K*(263.6238+381403.5993*e-228.841*i-23.199*o+10.941*s))-26e-6*Math.cos(K*(358.0578+221744.8187*e-760.194*i-85.777*o+40.505*s))-26e-6*Math.cos(K*(8.1929+1403732.141*e+55.834*i+18.052*o-8.566*s)),p=-.0022*Math.cos(K*(103.2+377336.3*e)),d=.055544+u+.001*e*p,f=.0011776*Math.cos(K*(49.1562-75869.812*e+35.458*i+4.231*o-2.001*s))-971e-7*Math.cos(K*(235.7004+890534.223*e-32.601*i+3.664*o-1.769*s))+908e-7*Math.cos(K*(186.5442+966404.0351*e-68.058*i-.567*o+.232*s))+623e-7*Math.cos(K*(83.3826-12006.2998*e+247.999*i+29.262*o-13.826*s))+483e-7*Math.cos(K*(51.6271-111868.8623*e+36.994*i+4.19*o-2.001*s))+348e-7*Math.cos(K*(100.737+413335.3554*e-122.571*i-10.684*o+5.028*s))-316e-7*Math.cos(K*(308.4192-489205.1674*e+158.029*i+14.915*o-7.029*s))-253e-7*Math.cos(K*(46.6853-39870.7617*e+33.922*i+4.272*o-2.001*s))-141e-7*Math.cos(K*(274.1928-553068.6797*e-54.513*i-10.116*o+4.797*s))+127e-7*Math.cos(K*(325.7736-63863.5122*e-212.541*i-25.031*o+11.826*s))+117e-7*Math.cos(K*(184.1196+401329.0556*e+125.428*i+18.579*o-8.798*s))-78e-7*Math.cos(K*(98.3124-151739.624*e+70.916*i+8.462*o-4.001*s))-63e-7*Math.cos(K*(238.1713+854535.1727*e-31.065*i+3.623*o-1.769*s))+63e-7*Math.cos(K*(134.9634+477198.8676*e+89.97*i+14.348*o-6.797*s))+36e-7*Math.cos(K*(321.5076+1443602.9027*e+21.912*i+13.78*o-6.566*s))-35e-7*Math.cos(K*(10.6638+1367733.0907*e+57.37*i+18.011*o-8.566*s))+24e-7*Math.cos(K*(149.8932+337465.5434*e-87.113*i-6.453*o+3.028*s))+24e-7*Math.cos(K*(170.9849-930404.9848*e+66.523*i+.608*o-.232*s)),m=-.0203*Math.cos(K*(125-1934.1*e))+.0034*Math.cos(K*(220.2-1935.5*e)),M=.0449858+f+.001*m,g=-15.448*Math.sin(K*(100.737+413335.3554*e-122.571*i-10.684*o+5.028*s))-9.642*Math.sin(K*(325.7736-63863.5122*e-212.541*i-25.031*o+11.826*s))-2.721*Math.sin(K*(134.9634+477198.8676*e+89.97*i+14.348*o-6.797*s))+2.607*Math.sin(K*(66.5106+349471.8432*e-335.112*i-35.715*o+16.854*s))+2.085*Math.sin(K*(201.474+826670.7108*e-245.142*i-21.367*o+10.057*s))+1.477*Math.sin(K*(10.6638+1367733.0907*e+57.37*i+18.011*o-8.566*s))+.968*Math.sin(K*(291.5472-127727.0245*e-425.082*i-50.062*o+23.651*s))-.949*Math.sin(K*(103.2079+377336.3051*e-121.035*i-10.724*o+5.028*s))-.703*Math.sin(K*(167.2476+762807.1986*e-457.683*i-46.398*o+21.882*s))-.66*Math.sin(K*(235.7004+890534.223*e-32.601*i+3.664*o-1.769*s))-.577*Math.sin(K*(190.8102-541062.3799*e-302.511*i-39.379*o+18.623*s))-.524*Math.sin(K*(269.9268+954397.7353*e+179.941*i+28.695*o-13.594*s))-.482*Math.sin(K*(32.2842+285608.3309*e-547.653*i-60.746*o+28.679*s))+.452*Math.sin(K*(357.5291+35999.0503*e-1.536*i+.041*o+0*s))-.381*Math.sin(K*(302.211+1240006.0662*e-367.713*i-32.051*o+15.085*s))-.342*Math.sin(K*(328.2445-99862.5625*e-211.005*i-25.072*o+11.826*s))-.312*Math.sin(K*(44.8902+1431596.6029*e+269.911*i+43.043*o-20.392*s))+.282*Math.sin(K*(162.8868-31931.7561*e-106.271*i-12.516*o+5.913*s))+.255*Math.sin(K*(203.9449+790671.6605*e-243.606*i-21.408*o+10.057*s))+.252*Math.sin(K*(68.9815+313472.7929*e-333.576*i-35.756*o+16.854*s))-.211*Math.sin(K*(83.3826-12006.2998*e+247.999*i+29.262*o-13.826*s))+.193*Math.sin(K*(267.9846+1176142.554*e-580.254*i-57.082*o+26.911*s))+.191*Math.sin(K*(133.0212+698943.6863*e-670.224*i-71.429*o+33.708*s))-.184*Math.sin(K*(55.8468-1018261.2475*e-392.482*i-53.726*o+25.42*s))+.182*Math.sin(K*(145.6272+1844931.9583*e+147.34*i+32.359*o-15.363*s))-.158*Math.sin(K*(257.3208-191590.5367*e-637.623*i-75.093*o+35.477*s))+.148*Math.sin(K*(156.5838-604925.8921*e-515.053*i-64.41*o+30.448*s))-.111*Math.sin(K*(169.7185+726808.1483*e-456.147*i-46.439*o+21.882*s))+.101*Math.sin(K*(13.1347+1331734.0404*e+58.906*i+17.971*o-8.566*s))+.1*Math.sin(K*(358.0578+221744.8187*e-760.194*i-85.777*o+40.505*s))+.087*Math.sin(K*(98.2661+449334.4057*e-124.107*i-10.643*o+5.028*s))+.08*Math.sin(K*(42.948+1653341.4216*e-490.283*i-42.734*o+20.113*s))+.08*Math.sin(K*(222.5657-441199.8173*e-91.506*i-14.307*o+6.797*s))+.077*Math.sin(K*(294.0181-163726.0747*e-423.546*i-50.103*o+23.651*s))-.073*Math.sin(K*(280.8834-1495460.1151*e-482.452*i-68.074*o+32.217*s))-.071*Math.sin(K*(304.6819+1204007.0159*e-366.177*i-32.092*o+15.085*s))-.069*Math.sin(K*(233.7582+1112279.0417*e-792.795*i-82.113*o+38.736*s))-.067*Math.sin(K*(34.7551+249609.2807*e-546.117*i-60.787*o+28.679*s))-.067*Math.sin(K*(263.6238+381403.5993*e-228.841*i-23.199*o+10.941*s))+.055*Math.sin(K*(21.6203-1082124.7597*e-605.023*i-78.757*o+37.246*s))+.055*Math.sin(K*(308.4192-489205.1674*e+158.029*i+14.915*o-7.029*s))-.054*Math.sin(K*(8.7216+1589477.9094*e-702.824*i-67.766*o+31.939*s))-.052*Math.sin(K*(179.8536+1908795.4705*e+359.881*i+57.39*o-27.189*s))-.05*Math.sin(K*(98.7948+635080.1741*e-882.765*i-96.461*o+45.533*s))-.049*Math.sin(K*(128.6604-95795.2683*e-318.812*i-37.547*o+17.738*s))-.047*Math.sin(K*(17.3544+425341.6552*e-370.57*i-39.946*o+18.854*s))-.044*Math.sin(K*(160.4159+4067.2942*e-107.806*i-12.475*o+5.913*s))-.043*Math.sin(K*(238.1713+854535.1727*e-31.065*i+3.623*o-1.769*s))+.042*Math.sin(K*(270.4555+1140143.5037*e-578.718*i-57.123*o+26.911*s))-.042*Math.sin(K*(132.4925+513197.9179*e+88.434*i+14.388*o-6.797*s))-.041*Math.sin(K*(122.3573-668789.4043*e-727.594*i-89.441*o+42.274*s))-.04*Math.sin(K*(105.6788+341337.2548*e-119.499*i-10.765*o+5.028*s))+.038*Math.sin(K*(135.4921+662944.6361*e-668.688*i-71.47*o+33.708*s))-.037*Math.sin(K*(242.391-51857.2124*e-460.54*i-54.293*o+25.652*s))+.036*Math.sin(K*(336.4374+1303869.5784*e-155.171*i-7.02*o+3.259*s))+.035*Math.sin(K*(223.0943-255454.0489*e-850.164*i-100.124*o+47.302*s))-.034*Math.sin(K*(193.2811-577061.4302*e-300.976*i-39.419*o+18.623*s))+.031*Math.sin(K*(87.6023-918398.685*e-181.476*i-28.654*o+13.594*s)),v=2.4*Math.sin(K*(103.2+377336.3*e)),y=83.353+4069.0137*e-103.238*i-12.492*o+5.263*s+g+.001*e*v,b=-1.4979*Math.sin(K*(49.1562-75869.812*e+35.458*i+4.231*o-2.001*s))-.15*Math.sin(K*(357.5291+35999.0503*e-1.536*i+.041*o+0*s))-.1226*Math.sin(K*(235.7004+890534.223*e-32.601*i+3.664*o-1.769*s))+.1176*Math.sin(K*(186.5442+966404.0351*e-68.058*i-.567*o+.232*s))-.0801*Math.sin(K*(83.3826-12006.2998*e+247.999*i+29.262*o-13.826*s))-.0616*Math.sin(K*(51.6271-111868.8623*e+36.994*i+4.19*o-2.001*s))+.049*Math.sin(K*(100.737+413335.3554*e-122.571*i-10.684*o+5.028*s))+.0409*Math.sin(K*(308.4192-489205.1674*e+158.029*i+14.915*o-7.029*s))+.0327*Math.sin(K*(134.9634+477198.8676*e+89.97*i+14.348*o-6.797*s))+.0324*Math.sin(K*(46.6853-39870.7617*e+33.922*i+4.272*o-2.001*s))+.0196*Math.sin(K*(98.3124-151739.624*e+70.916*i+8.462*o-4.001*s))+.018*Math.sin(K*(274.1928-553068.6797*e-54.513*i-10.116*o+4.797*s))+.015*Math.sin(K*(325.7736-63863.5122*e-212.541*i-25.031*o+11.826*s))-.015*Math.sin(K*(184.1196+401329.0556*e+125.428*i+18.579*o-8.798*s))-.0078*Math.sin(K*(238.1713+854535.1727*e-31.065*i+3.623*o-1.769*s))-.0045*Math.sin(K*(10.6638+1367733.0907*e+57.37*i+18.011*o-8.566*s))+.0044*Math.sin(K*(321.5076+1443602.9027*e+21.912*i+13.78*o-6.566*s))-.0042*Math.sin(K*(162.8868-31931.7561*e-106.271*i-12.516*o+5.913*s))-.0031*Math.sin(K*(170.9849-930404.9848*e+66.523*i+.608*o-.232*s))+.0031*Math.sin(K*(103.2079+377336.3051*e-121.035*i-10.724*o+5.028*s))+.0029*Math.sin(K*(222.612-1042273.8471*e+103.516*i+4.798*o-2.232*s))+.0028*Math.sin(K*(184.0733+1002403.0853*e-69.594*i-.526*o+.232*s)),w=25.9*Math.sin(K*(125-1934.1*e))-4.3*Math.sin(K*(220.2-1935.5*e)),x=.38*Math.sin(K*(357.5+35999.1*e)),k=125.0446-1934.13618*e+20.762*i+2.139*o-1.65*s+b+.001*(w+x*e),z=-.92581*Math.sin(K*(235.7004+890534.223*e-32.601*i+3.664*o-1.769*s))+.33262*Math.sin(K*(100.737+413335.3554*e-122.571*i-10.684*o+5.028*s))-.18402*Math.sin(K*(357.5291+35999.0503*e-1.536*i+.041*o+0*s))+.11007*Math.sin(K*(134.9634+477198.8676*e+89.97*i+14.348*o-6.797*s))-.06055*Math.sin(K*(238.1713+854535.1727*e-31.065*i+3.623*o-1.769*s))+.04741*Math.sin(K*(325.7736-63863.5122*e-212.541*i-25.031*o+11.826*s))-.03086*Math.sin(K*(10.6638+1367733.0907*e+57.37*i+18.011*o-8.566*s))+.02184*Math.sin(K*(103.2079+377336.3051*e-121.035*i-10.724*o+5.028*s))+.01645*Math.sin(K*(49.1562-75869.812*e+35.458*i+4.231*o-2.001*s))+.01022*Math.sin(K*(233.2295+926533.2733*e-34.136*i+3.705*o-1.769*s))-.00756*Math.sin(K*(336.4374+1303869.5784*e-155.171*i-7.02*o+3.259*s))-.0053*Math.sin(K*(222.5657-441199.8173*e-91.506*i-14.307*o+6.797*s))-.00496*Math.sin(K*(162.8868-31931.7561*e-106.271*i-12.516*o+5.913*s))-.00472*Math.sin(K*(297.8502+445267.1115*e-16.3*i+1.832*o-.884*s))-.00271*Math.sin(K*(240.6422+818536.1225*e-29.529*i+3.582*o-1.769*s))+.00264*Math.sin(K*(132.4925+513197.9179*e+88.434*i+14.388*o-6.797*s))-.00254*Math.sin(K*(186.5442+966404.0351*e-68.058*i-.567*o+.232*s))+.00234*Math.sin(K*(269.9268+954397.7353*e+179.941*i+28.695*o-13.594*s))-.0022*Math.sin(K*(13.1347+1331734.0404*e+58.906*i+17.971*o-8.566*s))-.00202*Math.sin(K*(355.0582+71998.1006*e-3.072*i+.082*o+0*s))+.00167*Math.sin(K*(328.2445-99862.5625*e-211.005*i-25.072*o+11.826*s))-.00143*Math.sin(K*(173.5506+1335801.3346*e-48.901*i+5.496*o-2.653*s))-.00121*Math.sin(K*(98.2661+449334.4057*e-124.107*i-10.643*o+5.028*s))-.00116*Math.sin(K*(145.6272+1844931.9583*e+147.34*i+32.359*o-15.363*s))+.00102*Math.sin(K*(105.6788+341337.2548*e-119.499*i-10.765*o+5.028*s))-9e-4*Math.sin(K*(184.1196+401329.0556*e+125.428*i+18.579*o-8.798*s))-86e-5*Math.sin(K*(338.9083+1267870.5281*e-153.636*i-7.061*o+3.259*s))-78e-5*Math.sin(K*(111.4008+1781068.4461*e-65.201*i+7.328*o-3.538*s))+69e-5*Math.sin(K*(323.3027-27864.4619*e-214.077*i-24.99*o+11.826*s))+66e-5*Math.sin(K*(51.6271-111868.8623*e+36.994*i+4.19*o-2.001*s))+65e-5*Math.sin(K*(38.5872+858602.4669*e-138.871*i-8.852*o+4.144*s))-6e-4*Math.sin(K*(83.3826-12006.2998*e+247.999*i+29.262*o-13.826*s))+54e-5*Math.sin(K*(201.474+826670.7108*e-245.142*i-21.367*o+10.057*s))-52e-5*Math.sin(K*(308.4192-489205.1674*e+158.029*i+14.915*o-7.029*s))+48e-5*Math.sin(K*(8.1929+1403732.141*e+55.834*i+18.052*o-8.566*s))-41e-5*Math.sin(K*(46.6853-39870.7617*e+33.922*i+4.272*o-2.001*s))-33e-5*Math.sin(K*(274.1928-553068.6797*e-54.513*i-10.116*o+4.797*s))+3e-4*Math.sin(K*(160.4159+4067.2942*e-107.806*i-12.475*o+5.913*s)),P=3.96*Math.sin(K*(119.7+131.8*e))+1.96*Math.sin(K*(125-1934.1*e)),I=.463*Math.sin(K*(357.5+35999.1*e))+.152*Math.sin(K*(238.2+854535.2*e))-.071*Math.sin(K*(27.8+131.8*e))-.055*Math.sin(K*(103.2+377336.3*e))-.026*Math.sin(K*(233.2+926533.3*e)),q=14*Math.sin(K*(357.5+35999.1*e))+5*Math.sin(K*(238.2+854535.2*e)),T=218.31665+481267.88134*e-13.268*i+1.856*o-1.534*s+z+.001*(P+I*e+q*i);

return t.a=h,t.e=d,t.i=2*Math.asin(M),t.w=it.normalize(K*(y-k)),t.N=it.normalize(K*k),t.M=it.normalize(K*(T-y)),t},corr:function(t,e){var a=it.normalize(e.M+Math.PI),n=it.normalize(e.w+Math.PI),r=t.M+t.w,i=r+t.N-a-n,o=-.022234*Math.sin(t.M-2*i)+.011494*Math.sin(2*i)+-.003246*Math.sin(a)+-.001029*Math.sin(2*t.M-2*i)+-994838e-9*Math.sin(t.M-2*i+a)+925025e-9*Math.sin(t.M+2*i)+802851e-9*Math.sin(2*i-a)+715585e-9*Math.sin(t.M-a)+-610865e-9*Math.sin(i)+-541052e-9*Math.sin(t.M+a)+-261799e-9*Math.sin(2*r-2*i)+191986e-9*Math.sin(t.M-4*i);t.ra+=o;var s=-.003019*Math.sin(r-2*i)+-959931e-9*Math.sin(t.M-r-2*i)+-802851e-9*Math.sin(t.M+r-2*i)+575958e-9*Math.sin(r+2*i)+296706e-9*Math.sin(2*t.M+r);return t.dec+=s,t.age=it.normalize(t.l-e.l+Math.PI),t.phase=.5*(1-Math.cos(t.age)),t}},mt=function(t,e){function a(){var t=f("mon").value,e=f("yr").value,a=new Date(e,t,1),n=d3.select("#cal"),r=new Date;e=parseInt(e),t=parseInt(t),a.setDate(a.getDate()-a.getDay());for(var i=n.node();i.firstChild;)i.removeChild(i.firstChild);for(var o=0;7>o;o++)n.append("div").classed({date:!0,weekday:!0}).html(w[o]);for(o=0;42>o;o++){var s=a.getMonth(),l=a.getDay(),c=x(a);n.append("div").classed({date:!0,grey:s!==t,weekend:s===t&&(0===l||6===l),today:0===k(a,r),selected:0===k(a,g)}).attr("id",c).on("click",M).html(a.getDate().toString()),a.setDate(a.getDate()+1)}}function n(){P.append("select").attr("title","Year").attr("id","yr").on("change",a),r()}function r(){var t=d3.select("select#yr"),e=g.getFullYear(),a=0,n=c(g);t.selectAll("*").remove(),t.selectAll("option").data(n).enter().append("option").text(function(t,n){return t===e&&(a=n),t.toString()}),t.property("selectedIndex",a)}function i(){var t=P.append("select").attr("title","Month").attr("id","mon").on("change",a),e=0,n=g.getMonth();t.selectAll("option").data(b).enter().append("option").attr("value",function(t,a){return a===n&&(e=a),a}).text(function(t){return t}),t.property("selectedIndex",e)}function o(t){P.append("div").attr("id",t).on("click",function(){var e=f("mon"),n=f("yr");"left"===t?0===e.selectedIndex?(e.selectedIndex=11,n.selectedIndex--):e.selectedIndex--:11===e.selectedIndex?(e.selectedIndex=0,n.selectedIndex++):e.selectedIndex++,a()})}function s(){P.append("input").attr("type","number").attr("id","hr").attr("title","Hours").attr("max","24").attr("min","-1").attr("step","1").attr("value",g.getHours()).on("change",function(){S(this)===!0&&M()}),P.append("input").attr("type","number").attr("id","min").attr("title","Minutes").attr("max","60").attr("min","-1").attr("step","1").attr("value",g.getMinutes()).on("change",function(){S(this)===!0&&M()}),P.append("input").attr("type","number").attr("id","sec").attr("title","Seconds").attr("max","60").attr("min","-1").attr("step","1").attr("value",g.getSeconds()).on("change",function(){S(this)===!0&&M()})}function l(){var t=P.append("select").attr("title","Time zone offset from UTC").attr("id","tz").on("change",M),e=15,a=g.getTimezoneOffset();t.selectAll("option").data(v).enter().append("option").attr("value",function(t,n){var r=Object.keys(t)[0];return t[r]===a&&(e=n),t[r]}).text(function(t){return Object.keys(t)[0]}),t.property("selectedIndex",e)}function c(t){for(var e=h(t.getFullYear()),a=[],n=e[0];n<=e[1];n++)a.push(n);return a}function h(t){return!z||z.length<1?[t-10,t+10]:1===z.length&&y(z[0])?z[0]>=100?[z[0]-10,z[0]+10]:[t-z[0],t+z[0]]:2===z.length&&y(z[0])&&y(z[1])?z[1]>=100?[z[0],z[1]]:[z[0]-z[1],z[0]+z[1]]:[t-10,t+10]}function u(t,e){for(var a=f(t),n=0;n<a.childNodes.length;n++)if(a.childNodes[n].value==e){a.selectedIndex=n;break}}function p(t){t&&g.setTime(t.valueOf()),u("yr",g.getFullYear()),u("mon",g.getMonth()),a(),f("hr").value=g.getHours(),f("min").value=g.getMinutes(),f("sec").value=g.getSeconds()}function d(){d3.select("#celestial-date").style("opacity",0),d3.select("#error").style({top:"-9999px",left:"-9999px",opacity:0}),d3.select("#datepick").classed("active",!1),setTimeout(function(){f("celestial-date").style.top=m(-9999)},600)}function M(){var t=f("hr").value,a=f("min").value,n=f("sec").value,i=f("tz").value;this.id&&-1!==this.id.search(/^\d/)&&(g=x.parse(this.id)),r(),g.setHours(t,a,n),p(),e(g,i)}var g=new Date,v=(d3.time.format("%Z"),[{"−12:00":720},{"−11:00":660},{"−10:00":600},{"−09:30":570},{"−09:00":540},{"−08:00":480},{"−07:00":420},{"−06:00":360},{"−05:00":300},{"−04:30":270},{"−04:00":240},{"−03:30":210},{"−03:00":180},{"−02:00":120},{"−01:00":60},{"±00:00":0},{"+01:00":-60},{"+02:00":-120},{"+03:00":-180},{"+03:30":-210},{"+04:00":-240},{"+04:30":-270},{"+05:00":-300},{"+05:30":-330},{"+05:45":-345},{"+06:00":-360},{"+06:30":-390},{"+07:00":-420},{"+08:00":-480},{"+08:30":-510},{"+08:45":-525},{"+09:00":-540},{"+09:30":-570},{"+10:00":-600},{"+10:30":-630},{"+11:00":-660},{"+12:00":-720},{"+12:45":-765},{"+13:00":-780},{"+14:00":-840}]),b=["January","February","March","April","May","June","July","August","September","October","November","December"],w=["Su","M","Tu","W","Th","F","Sa"],x=(c(g),d3.time.format("%Y-%m-%d")),z=t.daterange||[],P=d3.select("#celestial-form").append("div").attr("id","celestial-date");o("left"),i(),n(),o("right");P.append("div").attr("id","cal");a(),s(),l(),this.show=function(t){var e=f("celestial-date"),a=f("datepick"),n=a.offsetLeft+a.offsetWidth-e.offsetWidth,r=a.offsetTop-e.offsetHeight-1;-9999===e.offsetTop?(g.setTime(t.valueOf()),p(),d3.select("#celestial-date").style({top:m(r),left:m(n),opacity:1}),d3.select("#datepick").classed("active",!0)):d()},this.isVisible=function(){return-9999!==f("celestial-date").offsetTop},this.hide=function(){d()}};!function(){function t(t,e,a){var n=t.translate(),r=Math.atan2(e[1]-n[1],e[0]-n[0])-Math.atan2(a[1]-n[1],a[0]-n[0]);return[Math.cos(r/2),0,0,Math.sin(r/2)]}function e(t,e){var a=t.invert(e);return a&&isFinite(a[0])&&isFinite(a[1])&&s(a)}function a(t){var e=.5*t[0]*u,a=.5*t[1]*u,n=.5*t[2]*u,r=Math.sin(e),i=Math.cos(e),o=Math.sin(a),s=Math.cos(a),l=Math.sin(n),c=Math.cos(n);return[i*s*c+r*o*l,r*s*c-i*o*l,i*o*c+r*s*l,i*s*l-r*o*c]}function n(t,e){var a=t[0],n=t[1],r=t[2],i=t[3],o=e[0],s=e[1],l=e[2],c=e[3];return[a*o-n*s-r*l-i*c,a*s+n*o+r*c-i*l,a*l-n*c+r*o+i*s,a*c+n*l-r*s+i*o]}function r(t,e){if(t&&e){var a=c(t,e),n=Math.sqrt(l(a,a)),r=.5*Math.acos(Math.max(-1,Math.min(1,l(t,e)))),i=Math.sin(r)/n;return n&&[Math.cos(r),a[2]*i,-a[1]*i,a[0]*i]}}function i(t,e){var a=Math.max(-1,Math.min(1,l(t,e))),n=0>a?-1:1,r=Math.acos(n*a),i=Math.sin(r);return i?function(a){var o=n*Math.sin((1-a)*r)/i,s=Math.sin(a*r)/i;return[t[0]*o+e[0]*s,t[1]*o+e[1]*s,t[2]*o+e[2]*s,t[3]*o+e[3]*s]}:function(){return t}}function o(t){return[Math.atan2(2*(t[0]*t[1]+t[2]*t[3]),1-2*(t[1]*t[1]+t[2]*t[2]))*p,Math.asin(Math.max(-1,Math.min(1,2*(t[0]*t[2]-t[3]*t[1]))))*p,Math.atan2(2*(t[0]*t[3]+t[1]*t[2]),1-2*(t[2]*t[2]+t[3]*t[3]))*p]}function s(t){var e=t[0]*u,a=t[1]*u,n=Math.cos(a);return[n*Math.cos(e),n*Math.sin(e),Math.sin(a)]}function l(t,e){for(var a=0,n=t.length,r=0;n>a;++a)r+=t[a]*e[a];return r}function c(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function h(t){for(var e=0,a=arguments.length,n=[];++e<a;)n.push(arguments[e]);var r=d3.dispatch.apply(null,n);return r.of=function(e,a){return function(n){try{var i=n.sourceEvent=d3.event;n.target=t,d3.event=n,r[n.type].apply(e,a)}finally{d3.event=i}}},r}var u=Math.PI/180,p=180/Math.PI;d3.geo.zoom=function(){function l(t){m++||t({type:"zoomstart"})}function c(t){t({type:"zoom"})}function u(t){--m||t({type:"zoomend"})}var p,d,f,m=0,M=h(g,"zoomstart","zoom","zoomend"),g=d3.behavior.zoom().on("zoomstart",function(){var i=d3.mouse(this),s=a(p.rotate()),h=e(p,i);h&&(f=h),v.call(g,"zoom",function(){p.scale(y.k=d3.event.scale);var a=d3.mouse(this),l=r(f,e(p,a));p.rotate(y.r=o(s=l?n(s,l):n(t(p,i,a),s))),i=a,c(M.of(this,arguments))}),l(M.of(this,arguments))}).on("zoomend",function(){v.call(g,"zoom",null),u(M.of(this,arguments))}),v=g.on,y={r:[0,0,0],k:1};return g.rotateTo=function(t){var e=r(s(t),s([-y.r[0],-y.r[1]]));return o(n(a(y.r),e))},g.projection=function(t){return arguments.length?(p=t,y={r:p.rotate(),k:p.scale()},g.scale(y.k)):p},g.duration=function(t){return arguments.length?(d=t,g):d},g.event=function(t){t.each(function(){var t=d3.select(this),e=M.of(this,arguments),n=y,r=d3.transition(t);if(r!==t){r.each("start.zoom",function(){this.__chart__&&(y=this.__chart__,y.hasOwnProperty("r")||(y.r=p.rotate())),p.rotate(y.r).scale(y.k),l(e)}).tween("zoom:zoom",function(){var t=g.size()[0],s=i(a(y.r),a(n.r)),l=d3.geo.distance(y.r,n.r),h=d3.interpolateZoom([0,0,t/y.k],[l,0,t/n.k]);return d&&r.duration(d(.001*h.duration)),function(a){var n=h(a);this.__chart__=y={r:o(s(n[0]/l)),k:t/n[2]},p.rotate(y.r).scale(y.k),g.scale(y.k),c(e)}}).each("end.zoom",function(){u(e)});try{r.each("interrupt.zoom",function(){u(e)})}catch(s){console.log(s)}}else this.__chart__=y,l(e),c(e),u(e)})},d3.rebind(g,M,"on")}}(),this.Celestial=W}();
function AutoCompleteTrieNode(e){this.key=e,this.children={},this.ids=[]}function AutoCompleteTrie(){this.root=new AutoCompleteTrieNode(null)}AutoCompleteTrie.prototype._insert=function(e,t){for(var o=this.root,i=0;i<e.length;i++){var r=e[i];"-"!=r&&"_"!=r||(r=" "),o.children[r]||(o.children[r]=new AutoCompleteTrieNode(r)),(o=o.children[r]).ids.push(t)}},AutoCompleteTrie.prototype.insert=function(e,t){for(var o=(e=e.toLowerCase()).split(/[- _]/),i=0;i<o.length;i++)this._insert(o.slice(i).join(" "),t)},AutoCompleteTrie.prototype.query=function(e){var t=this.root;e=e.toLowerCase();for(var o=0;o<e.length;o++){var i=e[o];if("-"!=i&&"_"!=i||(i=" "),!t.children[i])return[];t=t.children[i]}t.ids.sort();o=0;for(var r=0;r<t.ids.length;++r)r>0&&t.ids[r]==t.ids[r-1]||(t.ids[o]=t.ids[r],o++);for(;t.ids.length>o;)t.ids.pop();return t.ids};